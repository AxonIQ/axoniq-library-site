<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Axon Server EE - OAuth Extension</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-server-reference/v2024.1/axon-server/security/access-control-oauth2/">
    <link rel="prev" href="../access-control-ldap/">
    <link rel="next" href="../../performance/">
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../../../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../../../../_/img/apple-touch-icon.png"><!-- 180Ã—180 -->
    <link rel="manifest" href="../../../../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../../../_'</script>


  </head>
  <body class="article">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../../../../_/img/logo-dark4x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../../../axon-framework-reference/development/">Axon Framework</a>
                <a class="navbar-item" href="../../../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../">Axon Server</a>
                <a class="navbar-item" href="../../../../../synapse-reference/v0.11/">Axon Synapse</a>
                <a class="navbar-item" href="../../../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
        <a class="navbar-item navbar-button" href="https://console.axoniq.io" target="_blank">AxonIQ Console</a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../">Axon Server Reference</a></li>
    <li><a href="../">Security</a></li>
    <li><a href="./">Axon Server EE - OAuth Extension</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Axon%20Server%20EE%20-%20OAuth%20Extension" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Axon%20Server%20EE%20-%20OAuth%20Extension%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BAxon%20Server%20EE%20-%20OAuth%20Extension%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-server-reference%2Fv2024.1%2Faxon-server%2Fsecurity%2Faccess-control-oauth2%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v2024.1</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../../../development/axon-server/security/access-control-oauth2/">development</a>
    <a class="version item is-current" href="./">v2024.1</a>
    <a class="version item is-missing" href="../../../../0/">older releases</a>
  </div>
</div>
</div>
<div class="body">
<div class="nav-container" data-component="axon-server-reference" data-version="v2024.1">
  <aside class="nav card">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../">Axon Server</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../installation/">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/local-installation/">Local installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/docker-k8s/">Docker / K8s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/">Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/admin-configuration/">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/configuration/">System properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/command-line-interface/">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/rest-api/">REST API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/grpc-api/">gRPC API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/actuator-endpoints/">Actuator Endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/axon-server-metrics/">Axon Server Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/grpc-metrics/">gRPC Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/heartbeat-monitoring/">Heartbeat Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/diagnostics/">Diagnostics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/multi-context/">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/tiered-storage/">Tiered Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/event-transformation/">Event Transformation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/tagging/">Tagging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/backups/">Backups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/recovery/">Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/plugins/">Axon Server Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/logging/">Logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/logging/logging-format/">Logging Format</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/error-codes/">Error Codes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../clustering/">Clustering</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/cluster-basics/">Cluster Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/node-roles/">Node Roles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-groups/">Replication Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-logs/">Replication Logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ssl/">SSL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../access-control-ee/">Access Control for Axon Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../access-control-clients/">Security for Axon Framework Client Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../access-control-cli/">Access Control and the CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../access-control-api/">Access Control on the REST and gRPC APIs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../access-control-ldap/">Axon Server EE - LDAP Extension</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Axon Server EE - OAuth Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../performance/">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/tuning-event-processing/">Event Segments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/flow-control/">Flow Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../migration/">Migration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/non-axon-server-to-axon-server/">Non-Axon Server to Axon Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../architecture/">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture/control-database/">Control Database</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-minor-releases/">Minor Releases</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Axon Server EE - OAuth Extension</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><!-- vale Google.Passive = NO -->
<!-- vale Google.Will = NO -->
<!-- vale AxonIQ.Headings = NO --></p>
</div>
<div class="paragraph">
<p>This extension will allow you to use OAuth2 integration for authentication in Axon Server.
User accounts and roles from the OAuth provider are not synchronized to the Axon Server cluster, because no roles are associated with them.
This means an account needs to be made in the cluster with the username from the provider, and roles assigned.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_the_oauth_extension"><a class="anchor" href="#_installing_the_oauth_extension"></a>Installing the OAuth Extension</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To install the OAuth Extension, you need to unpack the distribution ZIP-file, so the JAR files are in the &#8220;exts&#8221;
subdirectory of the working directory of Axon Server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ mkdir exts
$ unzip -j axon-server-extension-oauth-4.5-SNAPSHOT-bin.zip -d exts
Archive:  axon-server-extension-oauth-4.5-SNAPSHOT-bin.zip
  inflating: exts/axon-server-extension-oauth-4.5-SNAPSHOT.jar
  inflating: exts/commons-compress-1.9.jar
  inflating: exts/commons-lang3-3.8.1.jar
  inflating: exts/content-type-2.1.jar
  inflating: exts/javax.inject-1.jar
  inflating: exts/javax.persistence-api-2.2.jar
  inflating: exts/javax.transaction-api-1.3.jar
  inflating: exts/jcip-annotations-1.0-1.jar
  inflating: exts/lang-tag-1.4.4.jar
  inflating: exts/nimbus-jose-jwt-9.1.3.jar
  inflating: exts/oauth2-oidc-sdk-8.23.1.jar
  inflating: exts/spring-boot-starter-oauth2-client-2.1.6.RELEASE.jar
  inflating: exts/spring-security-oauth2-client-5.1.5.RELEASE.jar
  inflating: exts/spring-security-oauth2-core-5.1.5.RELEASE.jar
  inflating: exts/spring-security-oauth2-jose-5.1.5.RELEASE.jar
  inflating: exts/tomcat-embed-el-9.0.21.jar
  inflating: exts/validation-api-2.0.1.Final.jar
$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the actual version numbers may differ in your case.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_oauth_extension"><a class="anchor" href="#_configuring_the_oauth_extension"></a>Configuring the OAuth Extension</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The options used are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.accesscontrol.enabled</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This must be set to &#8220;true&#8221; to enable access control.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.enterprise.oauth2.enabled</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This must be set to &#8220;true&#8221; to enable the OAuth extension.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.enterprise.oauth2.mode</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Set this value to &#8220;google&#8221; for Google Apps authentication, or &#8220;oidc&#8221; to use the generic OpenID Connect integration.
The OpenID Connect integration is known to work with <a href="https://www.keycloak.org/">KeyCloak server</a>.</p>
</div>
<div class="sect2">
<h3 id="_configuration_google_apps_authentication"><a class="anchor" href="#_configuration_google_apps_authentication"></a>Configuration Google Apps Authentication</h3>
<div class="paragraph">
<p>For authentication using Google Apps accounts, you&#8217;ll can use the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.enterprise.oauth2.authorization-uri</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This optional value can be used to configure the URI that will trigger the authentication using OAuth2. The default value is &#8220;/oauth2/authorization&#8221; and should work fine.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.registration.google.client-id</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be set to the client-id provided by the Google Developer Console where you registered the cluster.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.registration.google.client-secret</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be set to the secret provided by the Google Developer Console where you registered the cluster.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.registration.google.scope</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This setting is used to configure what information Google should share with the Axon Server cluster.
A good value to use is &#8220;email&#8221;, which will allow you to use the email address as username, as is common with Google accounts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.enterprise.oauth2.username-map.google</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This setting tells the <em>extension</em> what value to use as username and requires that this value is provided by Google using the &#8220;scope&#8221; setting described above.
If the email address is to be used, as suggested above, the value should be &#8220;email&#8221;.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.enterprise.oauth2.request-params</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This setting defines a map of parameters to add to the redirect URL, to customize the behavior of the provider&#8217;s integration.
For Google, if the users use the same browser with multiple Google accounts, a good setting to add is
&#8220;prompt&#8221;, with value &#8220;select_account&#8221;:</p>
</div>
<div class="paragraph">
<p>`properties axoniq.axonserver.enterprise.oauth2.request-params.prompt=select_account `</p>
</div>
<div class="paragraph">
<p>This will force Google to always ask which account must be used to continue, even if there is only a single account in use, and that account is currently active.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_openid_connect_authentication_with_keycloak"><a class="anchor" href="#_configuring_openid_connect_authentication_with_keycloak"></a>Configuring OpenID Connect authentication with <a href="https://www.keycloak.org/">KeyCloak</a></h3>
<div class="paragraph">
<p>For authentication using <a href="https://www.keycloak.org/">KeyCloak</a>, you need to configure a realm and, in it, configure Axon Server as a client.
You can use the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.enterprise.oauth2.forceOidcLogout</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Setting this property to &#8220;true&#8221; will ensure that, when the user logs out from the Axon Server UI, a logout request will also be sent to KeyCloak.
If set to &#8220;false&#8221; (the default), the user will still have a valid session in KeyCloak, and a subsequent login attempt using the same browser window may immediately succeed, without a prompt for a password.
Naturally this is dependent on session validity settings within KeyCloak.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.registration.oidcclient.client-id</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be set to the client ID configured for Axon Server.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.registration.oidcclient.client-secret</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be set to the client secret configured for Axon Server.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.registration.oidcclient.client-name</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be set to the client name configured for Axon Server.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.registration.oidcclient.provider</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be set to the value &#8220;keycloak&#8221;.
* <code>spring.security.oauth2.client.registration.oidcclient.scope</code></p>
</div>
<div class="paragraph">
<p>This should be set to a (comma separated) list of the information that needs to be shared, typically &#8220;openid,email,profile&#8221;.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.security.oauth2.client.provider.keycloak.issuer-uri</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be set to the realm&#8217;s URL on KeyCloak.
For example, if the realm is named &#8220;test-realm&#8221; and KeyCloak is exposed at &#8220;<a href="http://keycloak-test:8090&#8221" class="bare">http://keycloak-test:8090&#8221</a>;, then the value is &#8220;<a href="http://keycloak-test:8090/realms/test-realm&#8221" class="bare">http://keycloak-test:8090/realms/test-realm&#8221</a>;.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>axoniq.axonserver.enterprise.oauth2.username-map.oidcclient</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This setting tells the <em>extension</em> what value to use as username.
The suggested value is &#8220;username&#8221;, which refers to that value from the &#8220;profile&#8221; scope.
Alternatively, just as with the Google Apps integration mentioned above, you can use &#8220;email&#8221;.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_users_access_and_roles"><a class="anchor" href="#_configuring_the_users_access_and_roles"></a>Configuring the User&#8217;s Access and Roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a username is unknown in the Axon Server cluster, even when authentication succeeds, the user will not be allowed to log in.
To allow this, a user with &#8220;ADMIN&#8221; level access needs to create a user, optionally without a password, and assign the roles for this user.
The Axon Server CLI has a special options (&#8220;--no-password&#8221;) to allow the creation of accounts without a password.
Note that if you create an account <em>with</em> a password, this will allow the user to choose to use that as well as the OAuth integration.</p>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../access-control-ldap/">Axon Server EE - LDAP Extension</a></span>
  <span class="next"><a href="../../performance/">Performance</a></span>
</nav>
    </article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-cloud">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-synapse">Axon Synapse</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
  </body>
</html>
