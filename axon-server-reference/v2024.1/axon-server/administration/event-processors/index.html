<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Event Processors</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-server-reference/v2024.1/axon-server/administration/event-processors/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../../../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../../../../_/img/apple-touch-icon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../../../_'</script>


  </head>
  <body class="article">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../../../../_/img/logo-dark4x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../../../axon-framework-reference/development/">Axon Framework</a>
                <a class="navbar-item" href="../../../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../">Axon Server</a>
                <a class="navbar-item" href="../../../../../synapse-reference/v0.11/">Axon Synapse</a>
                <a class="navbar-item" href="../../../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
        <a class="navbar-item navbar-button" href="https://console.axoniq.io" target="_blank">AxonIQ Console</a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../">Axon Server Reference</a></li>
    <li><a href="./">Event Processors</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Event%20Processors" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Event%20Processors%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BEvent%20Processors%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-server-reference%2Fv2024.1%2Faxon-server%2Fadministration%2Fevent-processors%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v2024.1</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../../../development/axon-server/administration/event-processors/">development</a>
    <a class="version item" href="../../../../v2024.2/axon-server/administration/event-processors/">v2024.2</a>
    <a class="version item is-current" href="./">v2024.1</a>
    <a class="version item is-missing" href="../../../../0/">older releases</a>
  </div>
</div>
</div>
<div class="body">
<div class="nav-container" data-component="axon-server-reference" data-version="v2024.1">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../">Axon Server</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../installation/">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/local-installation/">Local installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/docker-k8s/">Docker / K8s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../admin-configuration/">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/configuration/">System properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/command-line-interface/">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/rest-api/">REST API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/grpc-api/">gRPC API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/actuator-endpoints/">Actuator Endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/axon-server-metrics/">Axon Server Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/grpc-metrics/">gRPC Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/heartbeat-monitoring/">Heartbeat Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/diagnostics/">Diagnostics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../multi-context/">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tiered-storage/">Tiered Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-transformation/">Event Transformation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tagging/">Tagging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backups/">Backups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../recovery/">Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/">Axon Server Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../logging/">Logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../logging/logging-format/">Logging Format</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../error-codes/">Error Codes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../clustering/">Clustering</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/cluster-basics/">Cluster Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/node-roles/">Node Roles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-groups/">Replication Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-logs/">Replication Logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../security/">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/ssl/">SSL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ee/">Access Control for Axon Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-clients/">Security for Axon Framework Client Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-cli/">Access Control and the CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-api/">Access Control on the REST and gRPC APIs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ldap/">Axon Server EE - LDAP Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-oauth2/">Axon Server EE - OAuth Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../performance/">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/tuning-event-processing/">Event Segments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/flow-control/">Flow Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../migration/">Migration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/non-axon-server-to-axon-server/">Non-Axon Server to Axon Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../architecture/">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture/control-database/">Control Database</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-minor-releases/">Minor Releases</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Event Processors</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><!-- vale Google.Passive = NO -->
<!-- vale Google.Will = NO -->
<!-- vale Google.We = NO -->
<!-- vale Google.EnDash = NO -->
<!-- vale AxonIQ.Headings = NO --></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_reset_the_token_of_an_event_processor"><a class="anchor" href="#_how_to_reset_the_token_of_an_event_processor"></a>How to reset the token of an event processor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It might be desirable to reset the position an event processor works on.
This causes a replay of the events for this event processor.
Resetting the position is done by resetting the token of the event processor.</p>
</div>
<div class="paragraph">
<p>We document the following ways to reset the token of an event processor:
- Using Axon Framework - Using the REST API - Using the Axon Server Connector</p>
</div>
<div class="paragraph">
<p>A minimal project showing these approaches can be found <a href="https://github.com/AxonIQ/code-samples/tree/master/reset-handler">here</a>.</p>
</div>
<div class="sect2">
<h3 id="_general"><a class="anchor" href="#_general"></a>General</h3>
<div class="paragraph">
<p>Independent of the method chosen, an event processor needs to be stopped before its token can be reset.
This requires all instances of the event processor (on all nodes) to release their claims on segments.
Now, when <code>resetTokens()</code> is called, the executing instance can temporarily claim all segments, reset the tokens and store the new values.
After the token has been reset, the event processor can be started again.</p>
</div>
<div class="paragraph">
<p>Note that older versions of axon framework (pre 4.6) directly acknowledge a received admin instruction, without waiting for its execution.
This might require manually waiting for an Event Processor to be fully stopped before the token can be reset.
A possible approach for this is shown in the last section of this page.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-axon-framework"><a class="anchor" href="#using-axon-framework"></a>Using Axon Framework</h3>
<div class="paragraph">
<p>Axon Framework exposes all required functionality for a reset in the <code>StreamingEventProcessor</code> class.
In the following, we provide a sample for its usage.
For more details, read the documentation on the framework classes <a href="../../../../../axon-framework-reference/development/events/event-processors/streaming/#_triggering_a_reset" class="xref page">here</a>.
Instances of <code>StreamingEventProcessor</code> can be obtained by querying the <code>eventProcessingConfiguration</code> method of your global configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.axonframework.config.Configuration;
// …
private final Configuration configuration;
// …

configuration.eventProcessingConfiguration()
    .eventProcessorByProcessingGroup(processorName,
        StreamingEventProcessor.class)
    // …</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calling <code>shutDown</code>, <code>resetTokens</code> and <code>start</code> on the retrieved <code>StreamingEventProcessor</code> performs the required steps to reset its token.
This can be achieved as shown in the following code snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">configuration.eventProcessingConfiguration()
    .eventProcessorByProcessingGroup(processorName,
        StreamingEventProcessor.class)
    .ifPresent(streamingEventProcessor -&gt; \{
        if (streamingEventProcessor.supportsReset()) \{
            streamingEventProcessor.shutDown();
            streamingEventProcessor.resetTokens();
            streamingEventProcessor.start();
        }
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this only concerns stopping the local instances.
If there are instances running on other nodes, you either need to use Axon Server or build a solution for this yourself.
For more details, refer to the section in the Axon Framework reference guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_rest_api"><a class="anchor" href="#_using_the_rest_api"></a>Using the REST API</h3>
<div class="paragraph">
<p>Axon Server exposes a REST API to pause and start Event Processors.
When used in conjunction with the <code>resetTokens</code> method from earlier, this can be used to make sure that all instances of an Event Processor are paused before a token is reset.
The required parameters to do this are the following:
- <em>component</em>: name of the component the Event Processor is part of - <em>processor</em>: name of the Event Processor itself - <em>context</em>: name of the context for which to reset the tokens - <em>tokenStoreId</em>: the identifier used to distinguish the desired token from other tokens stored in the same store.</p>
</div>
<div class="paragraph">
<p>Now <code>/v1/components/{component}/processors/{processor}/pause?context={context}&amp;tokenStoreIdentifier={tokenStoreId}</code> can be called, causing Axon Server to request all matched Event Processors to stop.
Then a reset as shown in <a href="#using-axon-framework">the example using the framework</a>
can be performed.
This is not Axon Server specific and hence is the same for all shown methods.</p>
</div>
<div class="paragraph">
<p>As a final step, the Event Processors can be started again with a patch request to the following URL:
<code>/v1/components/{component}/processors/{processor}/start?context={context}&amp;tokenStoreIdentifier={tokenStoreId}</code> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_axon_server_connector"><a class="anchor" href="#_using_the_axon_server_connector"></a>Using the Axon Server Connector</h3>
<div class="paragraph">
<p>To reset Event Processors with the Axon Server Connector, the dependency has to be available on your classpath, for example by using the following maven dependency.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.axoniq&lt;/groupId&gt;
    &lt;artifactId&gt;axonserver-connector-java&lt;/artifactId&gt;
    &lt;version&gt;4.6.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>All operations related to administration go through an <code>AdminChannel</code>, which can be obtained from an <code>AxonServerConnectionFactory</code> as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private AdminChannel adminChannel() \{
    AxonServerConnectionFactory connectionFactory = AxonServerConnectionFactory.forClient(componentName).build();
    return connectionFactory.connect(contextName).adminChannel();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, <code>componentName</code> and <code>contextName</code> are values supplied by external configuration.
In simple cases, these might be the same as in your Axon Framework configuration.</p>
</div>
<div class="paragraph">
<p>Using the provided admin channel, you can pause, reset, and restart the event processors.
In contrast to the approach based on the Axon Framework, you also need to provide a <code>tokenStoreIdentifier</code>, since there can be multiple applications connected to one Axon Server that share the same token store.
An example on how to get this identifier can be found in the Axon Framework Documentation on Retrieving the Token Store Identifier.</p>
</div>
<div class="paragraph">
<p>Now resetting the tokens can be done by simply calling the <code>pauseEventProcessor</code>, <code>resetTokens</code> and <code>startEventProcessor</code>
methods in the correct order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">adminChannel().pauseEventProcessor(eventProcessorName, tokenStoreIdentifier)
        .thenRun(eventProcessor::resetTokens)
        .thenRun(() -&gt; adminChannel().startEventProcessor(eventProcessorName, tokenStoreIdentifier))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that Axon Server makes sure to stop and start all matched EventProcessors on all nodes with this call.</p>
</div>
</div>
<div class="sect2">
<h3 id="_handling_asynchronous_behaviour_in_older_axon_framework_versions_pre_4_6"><a class="anchor" href="#_handling_asynchronous_behaviour_in_older_axon_framework_versions_pre_4_6"></a>Handling asynchronous behaviour in older Axon Framework versions (pre 4.6)</h3>
<div class="paragraph">
<p>Prior to version 4.6, Axon Framework did immediately acknowledge receiving a pause instruction.
This means, that the Axon Server would receive these <code>ACCEPTED</code> Results before all Event Processors have terminated.</p>
</div>
<div class="paragraph">
<p>Starting from Axon Framework version 4.6, Axon Server will only respond with <code>SUCCESS</code> once all connected Event Processors have successfully been paused.
To make sure that older Axon Framework versions wait until all Event Processors have terminated, we need to implement a bit of custom logic.
This works with both, the Axon Server Connector approach and the REST API approach.
In the following, we will show an approach using the axon server connector admin channel.</p>
</div>
<div class="paragraph">
<p>We use the following method to allow waiting for all instances of an event processor, identified by a tuple of
<code>eventProcessorName</code> and <code>tokenStoreIdentifier</code> to reach a desired state, either running or not running.
Since APIs are built around an asynchronous execution model, we work with <code>Mono</code> and <code>Flux</code> here.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    protected Mono&lt;Result&gt; awaitForStatus(String eventProcessorName, String tokenStoreIdentifier, boolean running) \{
        return Flux.from(new ResultStreamPublisher&lt;&gt;(adminChannel::eventProcessors))
                   .filter(eventProcessor -&gt; eventProcessor.getIdentifier().getProcessorName()
                                                           .equals(eventProcessorName))
                   .filter(eventProcessor -&gt; eventProcessor.getIdentifier().getTokenStoreIdentifier()
                                                           .equals(tokenStoreIdentifier))
                   .flatMap(eventProcessor -&gt; Flux.fromIterable(eventProcessor.getClientInstanceList()))
                   .map(clientInstance -&gt; clientInstance.getIsRunning() == running)
                   .reduce(Boolean::logicalAnd)
                   .filter(result -&gt; result.equals(true))
                   .switchIfEmpty(Mono.error(new RuntimeException("")))
                   .retryWhen(Retry.fixedDelay(3, Duration.ofSeconds(2)))
                   .thenReturn(Result.SUCCESS);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The basic idea is to filter all received event processor descriptions to only retain the relevant ones, get a list of all connected client nodes and ensure their state equals the desired state passed in as a parameter.
If one of them is in the wrong state, the check is repeated at most 3 times with a fixed delay of 2 seconds.
If there are still clients in the wrong state, an error is returned.</p>
</div>
<div class="paragraph">
<p>Using an approach like this allows you to build custom functionality to handle unresponsive clients in a tailor-made solution.</p>
</div>
</div>
</div>
</div>
            </article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-cloud">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-synapse">Axon Synapse</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://axoniq.bsky.social/">Bluesky</a></li>
          <li><a class="ext" target="_blank" href="https://www.instagram.com/axoniq/">Instagram</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
  </body>
</html>
