<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Multi-Context</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-server-reference/development/axon-server/administration/multi-context/">
    <link rel="prev" href="../monitoring/diagnostics/">
    <link rel="next" href="../tiered-storage/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../../../_/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" href="../../../../../_/img/favicon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../../../_/static/manifest.webmanifest">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../../../_'</script>


<link rel="icon" href="../../../../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
    <div class="header_container">
      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io">
        <img src="../../../../../_/img/docs-logo.png" class="header_logo"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-center">
        <a class="navbar-item" href="../../../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../../../axon-framework-reference/4.11/">Axon Framework</a>
                <a class="navbar-item" href="../../../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../../development/">Axon Server</a>
                <a class="navbar-item" href="../../../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
            </div>
          </div>
        <a class="navbar-item navbar-button" href="https://platform.axoniq.io" target="_blank">Axoniq Platform</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../">Axon Server Reference</a></li>
    <li><a href="../">Administration</a></li>
    <li><a href="./">Multi-Context</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Multi-Context" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Multi-Context%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BMulti-Context%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-server-reference%2Fv2025.1%2Faxon-server%2Fadministration%2Fmulti-context%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v2025.1</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../../../development/axon-server/administration/multi-context/">development</a>
    <a class="version item" href="../../../../v2025.2/axon-server/administration/multi-context/">v2025.2</a>
    <a class="version item is-current" href="./">v2025.1</a>
    <a class="version item" href="../../../../v2025.0/axon-server/administration/multi-context/">v2025.0</a>
    <a class="version item" href="../../../../v2024.2/axon-server/administration/multi-context/">v2024.2</a>
    <a class="version item" href="../../../../v2024.1/axon-server/administration/multi-context/">v2024.1</a>
    <a class="version item is-missing" href="../../../../0/">older releases</a>
  </div>
</div>
</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-server-reference" data-version="v2025.1">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../">Axon Server</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../installation/">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/local-installation/">Local installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/docker-k8s/">Docker / K8s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../admin-configuration/">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/configuration/">System properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/command-line-interface/">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/rest-api/">REST API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/grpc-api/">gRPC API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/actuator-endpoints/">Actuator Endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/axon-server-metrics/">Axon Server Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/grpc-metrics/">gRPC Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/heartbeat-monitoring/">Heartbeat Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/diagnostics/">Diagnostics</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tiered-storage/">Tiered Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-transformation/">Event Transformation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tagging/">Tagging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backups/">Backups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../recovery/">Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/">Axon Server Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../persistent-streams/">Persistent Streams</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../logging/">Logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../logging/logging-format/">Logging Format</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../error-codes/">Error Codes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../integration/">Integrations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../openapi/integration-api/">Axon Server Integration HTTP API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../openapi/integration-outbound-api/">Axon Server Outbound HTTP API</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../clustering/">Clustering</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/cluster-basics/">Cluster Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/node-roles/">Node Roles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-groups/">Replication Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-logs/">Replication Logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../security/">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/ssl/">SSL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ee/">Access Control for Axon Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-clients/">Security for Axon Framework Client Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-cli/">Access Control and the CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-api/">Access Control on the REST and gRPC APIs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ldap/">Axon Server EE - LDAP Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-oauth2/">Axon Server EE - OAuth Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../performance/">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/tuning-event-processing/">Event Segments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/flow-control/">Flow Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../migration/">Migration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/non-axon-server-to-axon-server/">Non-Axon Server to Axon Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../architecture/">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture/config-database/">Config Database</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../troubleshooting/">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-minor-releases/">Patch Releases</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Page content" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Multi-Context</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><!-- vale Google.Passive = NO -->
<!-- vale Google.We = NO -->
<!-- vale Google.Will = NO -->
<!-- vale Google.EnDash = NO -->
<!-- vale AxonIQ.AcronymCase = NO --></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The <em>Developer</em> and <em>Starter</em> plans only support 1 (non-admin) context.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To recap the definition as we have seen in the <a href="../../clustering/cluster-basics/" class="xref page">clustering</a> section, contexts allow for strong separation of data without requiring deploying and managing full instances.</p>
</div>
<div class="paragraph">
<p>An Axon Server cluster can be setup to store events for multiple contexts.
Each context has it own set of files (containing Event/Snapshot data) stored in a separate directory.
Axon Server will replicate the context data to a number of nodes depending on the replication group the context is assigned to.
When you are creating a context you can either add it to an already existing replication group, or create a new replication group for this context.
More on replication groups can be found in the <a href="../../clustering/replication-groups/" class="xref page">replication groups</a> section.</p>
</div>
<div class="paragraph">
<p>Each context has a separate physical directory on each of the member nodes.
This directory is by default determined by the <em>axoniq.axonserver.events.storage</em> and <em>axoniq.axonserver.snapshot.storage</em> properties.
Each context getting a subdirectory below the location specified by the property.
Upon creation of a context you can specify a different location.</p>
</div>
<div class="paragraph">
<p>A depiction of multiple registered contexts within an Axon Server EE cluster is shown below</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../_images/multi-context.jpg" alt="Multiple contexts within an Axon Server EE cluster"></span></p>
</div>
<div class="paragraph">
<p>The <a href="../../clustering/cluster-basics/" class="xref page">clustering</a> section details the creation of the <em>admin and default contexts_ when a new Axon Server cluster is created.
The </em>admin_ context <strong>is used to process all configuration changes in Axon Server, so it contains the master configuration from which all contexts get their information.
The</strong> <em>_admin</em> context does not have an event store and the configuration information is stored in a control database.
The <em>default</em> context is the context used by clients when they have not specified any context information.
In case you would like to create a cluster without creating a default context, it is recommended to use the <a href="../../clustering/cluster-basics/#automatic-initialization" class="xref page">Automatic-Initialization</a> feature where you can control explicitly which contexts can be created or not.</p>
</div>
<div class="paragraph">
<p>When you create a context, there are a number of default properties that you can override, specifically for the context.
These are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">property</th>
<th class="tableblock halign-left valign-top">default value</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event.storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[axoniq.axonserver.event.storage]/[context-name]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location where the event store&#8217;s event information will be stored</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event.segment-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">250 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the event store&#8217;s event segments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event.index-format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JUMP_SKIP_INDEX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index type used for the events in this context (JUMP_SKIP_INDEX or BLOOM_FILTER_INDEX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event.max-bloom-filters-in-memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bloom filters for events to be kept in memory (only applicable if index is BLOOM_FILTER_INDEX)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event.max-indexes-in-memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of index files for events to be kept in memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event.retention-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retention time for the events in the primary locations (if secondary location specified)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot.storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[axoniq.axonserver.snapshot.storage]/[context-name]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location where the event store&#8217;s event information will be stored</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot.segment-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">250 MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the event store&#8217;s snapshot segments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot.index-format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JUMP_SKIP_INDEX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index type used for the snapshots in this context (JUMP_SKIP_INDEX or BLOOM_FILTER_INDEX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot.max-bloom-filters-in-memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bloom filters for snapshots to be kept in memory (only applicable if index is BLOOM_FILTER_INDEX)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot.max-indexes-in-memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of index files for snapshots to be kept in memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot.retention-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retention time for the snapshots in the primary locations (if secondary location specified)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_index_formats"><a class="anchor" href="#_index_formats"></a>Index formats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As of version 4.4, Axon Server has a new format for the index of events and snapshots, called JUMP_SKIP_INDEX.
This is the default format for all contexts that are created from this version onwards.
This index format uses a global index to locate the last event for a specific aggregate, and maintains per segment per aggregate the location of the previous event.
It improves the efficiency in looking up aggregates that are distributed over segments that are further apart.
For instance if you have 2000 event segments and an aggregate has events in segment 1500, 1000, and 500, using this index, Axon Server will find the latest event using the global index, and then from the index for segment 1500 that the previous event is in segment 1000. This prevents checking (the indexes of) all the files in between.
When using this index, Axon Server will no longer create bloom filter files.
For existing contexts the index format will remain BLOOM_FILTER_INDEX.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage_in_axon_framework"><a class="anchor" href="#_usage_in_axon_framework"></a>Usage in Axon Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After a context has been set up in Axon Server, Axon Framework applications can connect to it by setting the <code>axon.axonserver.context</code> property when using Spring Boot, or setting the <code>defaultContext</code> on the builder of <code>AxonServerConnectionManager</code> that is passed to the event store.
If you are not using Spring Boot, you likely also have to register the <code>AxonConfiguration</code> as a component on the <code>Configurer</code>.
Using something like <code>AxonServerConfiguration.builder().context(otherContext).build()</code> to use a different context.
Note that depending on message source configuration, other contexts may be used besides the default.</p>
</div>
<div class="sect2">
<h3 id="_sending_messages_to_other_contexts"><a class="anchor" href="#_sending_messages_to_other_contexts"></a>Sending messages to other contexts</h3>
<div class="paragraph">
<p>All messages in that application will be sent and received only from the default context, unless specified otherwise.
In order to send commands and queries to a different context, you can provide a <code>TargetContextResolver</code> to the <code>Configurer</code> as follows:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_axon_configurer" class="tab">
<p>Axon Configurer</p>
</li>
<li id="_tabs_1_spring_boot" class="tab">
<p>Spring Boot</p>
</li>
</ul>
</div>
<div id="_tabs_1_axon_configurer--panel" class="tabpanel" aria-labelledby="_tabs_1_axon_configurer">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Configuration {
    public void configuring() {
        Configurer configurer = DefaultConfigurer
                .defaultConfiguration()
                 .registerComponent(TargetContextResolver.class, configuration -&gt;
                     message -&gt; message.getPayloadType()
                                       .getName()
                                       .startsWith("com.context.booking") ? "booking" : "payment"
                 );
    }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_spring_boot--panel" class="tabpanel" aria-labelledby="_tabs_1_spring_boot">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class Configuration {
    @Bean
    public TargetContextResolver&lt;?&gt; targetContextResolver() {
        return message -&gt; message.getPayloadType().getName().startsWith("com.context.booking") ? "booking" : "payment";
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reading_events_from_multiple_contexts"><a class="anchor" href="#_reading_events_from_multiple_contexts"></a>Reading events from multiple contexts</h3>
<div class="paragraph">
<p>You can stream events from multiple contexts in the same processor.
This is described in the <a href="../../../../../axon-framework-reference/4.11/events/event-processors/streaming/#_multiple_event_sources" class="xref page">Streaming Events Processors' Multiple event sources section</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_multi_tenancy"><a class="anchor" href="#_multi_tenancy"></a>Multi-tenancy</h3>
<div class="paragraph">
<p>When an application handles multiple tenants, it might make sense to create separate store per tenant.
Handling multiple tenants needs additional infrastructure, such as duplication of the event processor for each tenant, as well as datasource configuration.
For this we have created the Multi-Tenancy extension to Axon Framework, that takes care of this infrastructure for you.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Pre-4.4 Context Deletion</strong></p>
</div>
<div class="paragraph">
<p>Note that when you delete an existing context with the preserve data option and then recreate it, without specifying the index format, Axon Server will use the JUMP_SKIP_INDEX format.
This means that it will create a new index for the existing data, if the old format was BLOOM_FILTER_INDEX.
Depending on the size of the event store this can take a long time.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_context_maintenance"><a class="anchor" href="#_context_maintenance"></a>Context maintenance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The operational maintenance of contexts within an Axon Server EE cluster can be done via any one of the following provided utilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#command-line-interface">CLI</a> (axonserver-cli.jar) provided by Axon Server</p>
</li>
<li>
<p><a href="#user-interface">UI Console</a> of Axon Server</p>
</li>
<li>
<p><a href="#rest-api">REST API</a> provided by Axon Server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let us deep dive into these capabilities in more detail.</p>
</div>
<div class="sect2">
<h3 id="command-line-interface"><a class="anchor" href="#command-line-interface"></a>Command-line interface</h3>
<div class="paragraph">
<p>Axon&#8217;s command-line utility (<em>axonserver-cli.jar - part of the Axon Server distributable</em>) offers the following options to operate and maintain contexts</p>
</div>
<div class="sect3">
<h4 id="_creating_contexts"><a class="anchor" href="#_creating_contexts"></a>Creating contexts</h4>
<div class="paragraph">
<p>The register-context command helps in the registration and creation of a new context.
A sample of the command with the mandatory parameters is depicted below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ java -jar ./axonserver-cli.jar register-context -S http://[node]:[port] -c [context-name] -n [members]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a new replication group with the name of the context, with the specified member nodes, and creates a context in this replication group.</p>
</div>
<div class="paragraph">
<p>Another example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ java -jar ./axonserver-cli.jar register-context -S http://[node]:[port] -c [context-name] -g [replication-group] -prop event.storage=[location]  -prop snapshot.storage=[location]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a new context in an already existing replication group.
Event and snapshot files are stored in the specified location.</p>
</div>
<div class="paragraph">
<p><em>Mandatory parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-c</em> refers to the context name.
The context name must match the following regular expression "[a-zA-Z][a-zA-Z_-0-9]*", so it should start with a letter (uppercase or lowercase), followed by a combination of letters, digits, hyphens and underscores.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Optional parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-S</em> if not supplied connects by default to <a href="http://localhost:8024" class="bare">http://localhost:8024</a>. If supplied, it should be any node serving the <em>_admin</em> context</p>
</li>
<li>
<p><em>-g</em> refers to the name of the replication group where the context will be added to</p>
</li>
<li>
<p><em>-n</em> refers to the comma separated list of node names that should be members of the new context.
This parameter registers them as "PRIMARY" member nodes of that context</p>
</li>
<li>
<p><em>-a</em> refers to the comma separated list of node names that should be "ACTIVE_BACKUP" member nodes of that context</p>
</li>
<li>
<p><em>-m</em> refers to the comma separated list of node names that should be "MESSAGING_ONLY" member nodes of that context</p>
</li>
<li>
<p><em>-p</em> refers to the comma separated list of node names that should be "PASSIVE_BACKUP" member nodes of that context</p>
</li>
<li>
<p><em>-s</em> refers to the comma separated list of node names that should be "SECONDARY" member nodes of that context</p>
</li>
<li>
<p><em>-prop</em> refers to properties that can be set for the new context.
The value should be in the form \=\</p>
</li>
<li>
<p><em>-t</em> refers to the access token to authenticate at server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Deleting contexts</em></p>
</div>
<div class="paragraph">
<p>The delete-context command helps in the deletion of a context and its associated data from all member nodes of that context.
A sample of the command with the mandatory parameters is depicted below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ java -jar ./axonserver-cli.jar delete-context -S http://[node]:[port] -c [context-name]</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Mandatory parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-c</em> refers to the context that needs to be deleted</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Optional parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-S</em> if not supplied connects by default to <a href="http://localhost:8024" class="bare">http://localhost:8024</a>. If supplied, it should be any node serving the <em>_admin</em> context</p>
</li>
<li>
<p><em>-t</em> refers to the access token to authenticate at server</p>
</li>
<li>
<p><em>–preserve-event-store&quot;</em> option to keep the event store files when deleting the context (Axon Server deletes the event files by default)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Adding a node to a Context</em></p>
</div>
<div class="paragraph">
<p>The add-node-to-context command helps in the registration of a new member node creation of an existing context.
A sample of the command with the mandatory parameters is depicted below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ java -jar ./axonserver-cli.jar add-node-to-context -S http://[node]:[port] -c [context-name] -r [role of the node] -n [node name]</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Mandatory parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-c</em> refers to an existing context</p>
</li>
<li>
<p><em>-n</em> refers to the node name that should be a member of this context</p>
</li>
<li>
<p><em>-r</em> refers to the role of this node within the context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Optional parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-S</em> if not supplied connects by default to <a href="http://localhost:8024" class="bare">http://localhost:8024</a>. If supplied, it should be any node serving the <em>_admin</em> context</p>
</li>
<li>
<p><em>-t</em> refers to the access token to authenticate at server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Deleting a node from a context</em></p>
</div>
<div class="paragraph">
<p>The delete-node-from-context command helps in the deletion member node from an existing context.
A sample of the command with the mandatory parameters is depicted below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ java -jar ./axonserver-cli.jar delete-node-from-context -S http://[node]:[port] -c [context-name] -n [node name]</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Mandatory parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-c</em> refers to an existing context</p>
</li>
<li>
<p><em>-n</em> refers to the node name that should no longer be a member of this context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Optional parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-S</em> if not supplied connects by default to <a href="http://localhost:8024" class="bare">http://localhost:8024</a>. If supplied, it should be any node serving the <em>_admin</em> context</p>
</li>
<li>
<p><em>-t</em> refers to the access token to authenticate at server</p>
</li>
<li>
<p><em>–preserve-event-store</em> removes the node from the context but leaves the event store files on that node.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>List all contexts</em></p>
</div>
<div class="paragraph">
<p>The contexts command lists down all the contexts registered within the cluster, including its name, the leader member node of the context and all the member nodes within the context</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ java -jar ./axonserver-cli.jar contexts</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Optional parameters</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>-o json</em> will display the output in a JSON format</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="user-interface"><a class="anchor" href="#user-interface"></a>User interface</h3>
<div class="paragraph">
<p>Another option to maintain contexts is via the UI console of Axon Server.
Navigate to the Contexts icon on the navigation menu of the console which will open up the context maintenance screen.
The operations listed above are possible through the console.</p>
</div>
</div>
<div class="sect2">
<h3 id="rest-api"><a class="anchor" href="#rest-api"></a>REST API</h3>
<div class="paragraph">
<p>Axon Server provides a REST API to perform context maintenance operations.
The API is accessible at http:[server]:[port]/swagger-ui.html and offers the <em>context-rest-controller</em> to help perform context maintenance operations</p>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../monitoring/diagnostics/">Diagnostics</a></span>
  <span class="next"><a href="../tiered-storage/">Tiered Storage</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="secondary-footer">
    <p>Copyright © 2025 AxonIQ BV. All Rights Reserved</p>
    <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=e0b2b5cb-139e-4753-acab-bae43f90c5d3" />
  </div>
</footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
    </div>
  </body>
</html>
