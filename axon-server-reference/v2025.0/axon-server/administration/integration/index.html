<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrations</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-server-reference/v2025.0/axon-server/administration/integration/">
    <link rel="prev" href="../error-codes/">
    <link rel="next" href="../../../openapi/integration-api/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../../../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../../../../_/img/apple-touch-icon.png"><!-- 180Ã—180 -->
    <link rel="manifest" href="../../../../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../../../_'</script>


  </head>
  <body class="article">
    <div class="banner">
    <a href="https://console.axoniq.io">Manage and monitor your Axon Framework applications and Axon Server environments. <span class="banner_button" target="_blank">Try AxonIQ Console</span></a>
</div>    
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../../../../_/img/logo-dark4x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../../../axon-framework-reference/4.11/">Axon Framework</a>
                <a class="navbar-item" href="../../../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../">Axon Server</a>
                <a class="navbar-item" href="../../../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
        <a class="navbar-item navbar-button" href="https://axoniq.io/contact" target="_blank">Get in touch</a>
      </div>
    </div>
  </nav>
</header>
    <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../">Axon Server Reference</a></li>
    <li><a href="../">Administration</a></li>
    <li><a href="./">Integrations</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Integrations" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Integrations%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BIntegrations%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-server-reference%2Fv2025.0%2Faxon-server%2Fadministration%2Fintegration%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v2025.0</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../../../development/axon-server/administration/integration/">development</a>
    <a class="version item is-current" href="./">v2025.0</a>
    <a class="version item is-missing" href="../../../../v2024.2/">v2024.2</a>
    <a class="version item is-missing" href="../../../../v2024.1/">v2024.1</a>
    <a class="version item is-missing" href="../../../../0/">older releases</a>
  </div>
</div>
</div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-server-reference" data-version="v2025.0">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../">Axon Server</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../installation/">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/local-installation/">Local installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/docker-k8s/">Docker / K8s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../admin-configuration/">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/configuration/">System properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/command-line-interface/">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/rest-api/">REST API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-configuration/grpc-api/">gRPC API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/actuator-endpoints/">Actuator Endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/axon-server-metrics/">Axon Server Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/grpc-metrics/">gRPC Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/heartbeat-monitoring/">Heartbeat Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../monitoring/diagnostics/">Diagnostics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../multi-context/">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tiered-storage/">Tiered Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-transformation/">Event Transformation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tagging/">Tagging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backups/">Backups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../recovery/">Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/">Axon Server Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../persistent-streams/">Persistent Streams</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../logging/">Logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../logging/logging-format/">Logging Format</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../error-codes/">Error Codes</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="./">Integrations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../openapi/integration-api/">Axon Server Integration HTTP API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../openapi/integration-outbound-api/">Axon Server Outbound HTTP API</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../clustering/">Clustering</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/cluster-basics/">Cluster Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/node-roles/">Node Roles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-groups/">Replication Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../clustering/replication-logs/">Replication Logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../security/">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/ssl/">SSL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ee/">Access Control for Axon Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-clients/">Security for Axon Framework Client Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-cli/">Access Control and the CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-api/">Access Control on the REST and gRPC APIs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ldap/">Axon Server EE - LDAP Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-oauth2/">Axon Server EE - OAuth Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../performance/">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/tuning-event-processing/">Event Segments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/flow-control/">Flow Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../migration/">Migration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/non-axon-server-to-axon-server/">Non-Axon Server to Axon Server</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../architecture/">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture/config-database/">Config Database</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../troubleshooting/">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../rn-as-minor-releases/">Patch Releases</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Integrations</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Axon Server perfectly works with Axon Framework applications. With minimal configuration, the Axon Framework applications distribute commands and queries through Axon Server and use It as an event store.
Sometimes, you want to integrate applications that do not use the Axon Framework, applications that may not be running in a Java virtual machine. This is where the Axon Server Integration option comes in.</p>
</div>
<div class="paragraph">
<p>Axon Server Integration supports:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sending commands and queries to any application that supports HTTP(s) or RSocket communication.</p>
</li>
<li>
<p>Subscribing to events from these applications.</p>
</li>
<li>
<p>Sending commands and queries to Axon Framework applications through HTTP(s)</p>
</li>
<li>
<p>Publishing events and snapshots to Axon Server through HTTP(s).</p>
</li>
<li>
<p>Reading events and snapshots for an aggregate from Axon Server through HTTP(s).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_endpoints"><a class="anchor" href="#_endpoints"></a>Endpoints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must first define an endpoint to forward commands, queries, and events to your application. This endpoint describes your application&#8217;s common properties, such as the base address and protocol to reach it.
Once you have defined the endpoint, you can register handlers for commands, queries, and events.
The endpoint also contains an option for a health operation, which Axon Server uses to check its availability periodically. When the health check fails, Axon Server will no longer route commands and queries to this application and will no longer push events. Once the health check succeeds again, operations will resume.</p>
</div>
<div class="paragraph">
<p>Endpoints contain the following properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">name</dt>
<dd>
<p>a logical name for the application</p>
</dd>
<dt class="hdlist1">context</dt>
<dd>
<p>the Axon Server context</p>
</dd>
<dt class="hdlist1">type</dt>
<dd>
<p>the communication protocol from Axon Server to the application</p>
</dd>
<dt class="hdlist1">wrapping type</dt>
<dd>
<p>describes how messages Axon Server delivers to the application</p>
</dd>
<dt class="hdlist1">content type</dt>
<dd>
<p>defines the content type of the payload of messages</p>
</dd>
<dt class="hdlist1">base URL</dt>
<dd>
<p>the base address of the application, the format depends on the communication protocol</p>
</dd>
<dt class="hdlist1">health URL</dt>
<dd>
<p>address of the health check (relative to the base URL)</p>
</dd>
<dt class="hdlist1">command URL</dt>
<dd>
<p>the default address for command handlers (relative to the base URL)</p>
</dd>
<dt class="hdlist1">query URL</dt>
<dd>
<p>the default address for query handlers (relative to the base URL)</p>
</dd>
<dt class="hdlist1">event URL</dt>
<dd>
<p>the default address for event handlers (relative to the base URL)</p>
</dd>
<dt class="hdlist1">properties</dt>
<dd>
<p>key/value pairs that Axon Server adds in the communication (dependent on the communication protocol)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The command, query, and event URL can contain placeholder <code>{name}</code> which Axon Server will replace with the registered handler&#8217;s actual name.</p>
</div>
<div class="paragraph">
<p>The wrapping type is one of the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Raw, Axon Server sends the message payload in the request body; additional information is provided as headers.</p>
</li>
<li>
<p>Wrapped, Axon Server wraps the payload in a JSON message containing additional information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Benefits of "Raw" wrapping type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Smaller messages for binary payloads</p>
</li>
<li>
<p>Direct access to the payload</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Benefits of "Wrapped" wrapping type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Easier access to the message metadata</p>
</li>
<li>
<p>Support for batches of events</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Axon Server does not know anything about the encoding of the request and event payloads. It uses the <code>content-type</code> property of the endpoint to pass the correct content type in the <code>Raw</code> handlers. It also uses the property to form the <code>Wrapped</code> message content. If the <code>content-type</code> is <code>application/json</code>, it embeds the JSON payload as part of the message.
For <code>application/xml</code> or <code>text/*</code> content types it adds the payload as a string in the message. For all other content types it embeds the payload as a <code>base64</code> encoded string.</p>
</div>
<div class="paragraph">
<p>Currently, Axon Server supports HTTP(s) and RSocket as communication protocols.</p>
</div>
<div class="sect2">
<h3 id="_https"><a class="anchor" href="#_https"></a>HTTP(s)</h3>
<div class="paragraph">
<p>The URL for HTTP(s) endpoints is the server&#8217;s URL. Axon Server adds the custom properties defined on the endpoint as HTTP headers to each request. It expects the health URL to be a GET method, but all handlers must use POST methods.</p>
</div>
<div class="paragraph">
<p>If the endpoint uses HTTPS with a self-signed certificate, you must configure Axon Server to trust this certificate. You can add trusted certificates by setting the property <code>axoniq.axonserver.integration.trust-manager-files</code> in axonserver.properties.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">axoniq.axonserver.integration.trust-manager-files=certificate-1.pem,certificate-2.pem</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rsocket"><a class="anchor" href="#_rsocket"></a><code>RSocket</code></h3>
<div class="paragraph">
<p>The URL for RSocket endpoints is &lt;hostname&gt;:&lt;port&gt;. The command, query, and event URL represent the routing key in the RSocket message.</p>
</div>
<div class="paragraph">
<p>Axon Server adds the custom properties defined on the endpoint as metadata on the RSocket connection.
Note that the keys for the custom properties must be media types.</p>
</div>
<div class="paragraph">
<p>For <code>Raw</code> messages the following additional metadata keys are included:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">axonserver/x-PayloadType</dt>
<dd>
<p>The payload type for the <code>Raw</code> message.</p>
</dd>
<dt class="hdlist1">axonserver/x-PayloadRevision</dt>
<dd>
<p>The payload revision for the <code>Raw</code> message.</p>
</dd>
<dt class="hdlist1">axonserver/x-MessageId</dt>
<dd>
<p>A unique identifier for the message.</p>
</dd>
<dt class="hdlist1">axonserver/x-Metadata</dt>
<dd>
<p>Optional metadata for the message.</p>
</dd>
<dt class="hdlist1">axonserver/x-Priority</dt>
<dd>
<p>Priority of the request (commands and queries only).</p>
</dd>
<dt class="hdlist1">axonserver/x-QueryName</dt>
<dd>
<p>The name of the query.</p>
</dd>
<dt class="hdlist1">axonserver/x-CommandName</dt>
<dd>
<p>The name of the command.</p>
</dd>
<dt class="hdlist1">axonserver/x-RoutingKey</dt>
<dd>
<p>Routing key for the command.</p>
</dd>
<dt class="hdlist1">axonserver/x-EventName</dt>
<dd>
<p>The name of the event.</p>
</dd>
<dt class="hdlist1">axonserver/x-DateTime</dt>
<dd>
<p>The date/time that the event was created (event only).</p>
</dd>
<dt class="hdlist1">axonserver/x-Index</dt>
<dd>
<p>The global index of the event in the event store (event only).</p>
</dd>
<dt class="hdlist1">axonserver/x-AggregateId</dt>
<dd>
<p>The aggregate identifier of the event (optional).</p>
</dd>
<dt class="hdlist1">axonserver/x-AggregateType</dt>
<dd>
<p>The aggregate type of the event (optional).</p>
</dd>
<dt class="hdlist1">axonserver/x-SequenceNumber</dt>
<dd>
<p>The sequence number of the event within the aggregate (optional).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All messages are request/reply messages.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_handlers"><a class="anchor" href="#_command_handlers"></a>Command handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To receive commands in your application, register a command handler at an endpoint. The registration of a command handler contains the following information:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">name</dt>
<dd>
<p>the name of the command.</p>
</dd>
<dt class="hdlist1">commandUrl</dt>
<dd>
<p>the (relative) address of the handler (can be omitted to use the default as defined on the endpoint) .</p>
</dd>
<dt class="hdlist1">loadFactor</dt>
<dd>
<p>relative weight for this handler, if there are multiple handlers for a command, handlers with a higher load factor get a higher percentage of the requests.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_endpoint_types"><a class="anchor" href="#_endpoint_types"></a>Endpoint types</h3>
<div class="paragraph">
<p>Axon Server can send requests containing commands in two different ways. Each endpoint that registers as a command handler must support one of them.</p>
</div>
<div class="sect3">
<h4 id="_raw"><a class="anchor" href="#_raw"></a><code>Raw</code></h4>
<div class="paragraph">
<p>Axon Server serializes a single command directly into the request&#8217;s body when interacting with <code>Raw</code> endpoints. It provides all other relevant information in the HTTP headers of the request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code></p>
</li>
<li>
<p><code>AxonIQ-MessageId</code></p>
</li>
<li>
<p><code>AxonIQ-CommandName</code></p>
</li>
<li>
<p><code>AxonIQ-PayloadType</code></p>
</li>
<li>
<p><code>AxonIQ-PayloadRevision</code></p>
</li>
<li>
<p><code>AxonIQ-Priority</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to the <a href="../../../openapi/integration-outbound-api/#tag/Request-handler/operation/commandRaw" class="xref page">API documentation</a> for detailed information about the HTTP request structure.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wrapped"><a class="anchor" href="#_wrapped"></a><code>Wrapped</code></h4>
<div class="paragraph">
<p>When interacting with <code>Wrapped</code> endpoints, Axon Server generates a JSON message that contains the serialized command and all information related to the command. It then sends that JSON message in the request&#8217;s body.</p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="../../../openapi/integration-outbound-api/#tag/Request-handler/operation/handleWrappedCommand" class="xref page">API documentation</a> for detailed information about the HTTP request structure.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_query_handlers"><a class="anchor" href="#_query_handlers"></a>Query handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Query handlers must explicitly register in Axon Server to receive queries. There are two ways to register a query handler -
using Axon Server&#8217;s Web interface or through the Axon Server HTTP API.</p>
</div>
<div class="paragraph">
<p>In both cases, Axon Server needs the following information:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">name</dt>
<dd>
<p>the name of the query that this handler can handle</p>
</dd>
<dt class="hdlist1">query URL</dt>
<dd>
<p>the (relative) address of the handler (can be omitted to use the default as defined on the endpoint) .</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_endpoint_types_2"><a class="anchor" href="#_endpoint_types_2"></a>Endpoint types</h3>
<div class="paragraph">
<p>Axon Server can send requests containing queries in two different ways. Each endpoint that registers as a query handler must support one of them.</p>
</div>
<div class="sect3">
<h4 id="_raw_2"><a class="anchor" href="#_raw_2"></a><code>Raw</code></h4>
<div class="paragraph">
<p>Axon Server serializes a single query directly into the request&#8217;s body when interacting with <code>Raw</code> endpoints. It provides all other relevant information in the HTTP headers of the request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code></p>
</li>
<li>
<p><code>AxonIQ-MessageId</code></p>
</li>
<li>
<p><code>AxonIQ-QueryName</code></p>
</li>
<li>
<p><code>AxonIQ-PayloadType</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to the <a href="../../../openapi/integration-outbound-api/#tag/Request-handler/operation/queryRaw" class="xref page">API documentation</a> for detailed information about the HTTP request structure.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wrapped_2"><a class="anchor" href="#_wrapped_2"></a><code>Wrapped</code></h4>
<div class="paragraph">
<p>When interacting with <code>Wrapped</code> endpoints, Axon Server generates a JSON message containing the serialized query and all related information. It then sends that JSON message in the request&#8217;s body.</p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="../../../openapi/integration-outbound-api/#tag/Request-handler/operation/handleWrappedQuery" class="xref page">API documentation</a> for detailed information about the HTTP request structure.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_event_handlers"><a class="anchor" href="#_event_handlers"></a>Event handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Any service available at an accessible HTTP/RSocket address can be an event handler. Axon Server can send events to such services via HTTP/RSocket requests. The service must be able to handle requests containing events.</p>
</div>
<div class="paragraph">
<p>Event handlers must explicitly register in Axon Server to receive events. There are two ways to register an event handler -
using Axon Server&#8217;s Web interface or through the Axon Server HTTP API.</p>
</div>
<div class="paragraph">
<p>In both cases, Axon Server needs the following information:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">name</dt>
<dd>
<p>a name for the event handler. This name will be the name of the persistent stream serving the events.</p>
</dd>
<dt class="hdlist1">filter</dt>
<dd>
<p>a filter for the events, for instance <code>payloadType = "com.example.events.Event1"</code></p>
</dd>
<dt class="hdlist1">sequencing policy</dt>
<dd>
<p>describes how events will be distributed across events</p>
</dd>
<dt class="hdlist1">sequencing policy parameters</dt>
<dd>
<p>optional parameters for the sequencing policy</p>
</dd>
<dt class="hdlist1">segments</dt>
<dd>
<p>number of parallel processing segments</p>
</dd>
<dt class="hdlist1">start position</dt>
<dd>
<p>where to start processing events (HEAD for the newest event, TAIL for the oldest event)</p>
</dd>
<dt class="hdlist1">event URL</dt>
<dd>
<p>the (relative) address of the handler (can be omitted to use the default as defined on the endpoint) .</p>
</dd>
<dt class="hdlist1">batch size</dt>
<dd>
<p>the maximum number of events that Axon Server sends in one request to the handler if the endpoint type is <code>Wrapped</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Event handlers are backed by persistent streams. To modify the number of segments, change the number of segments for the related persistent stream.</p>
</div>
<div class="sect2">
<h3 id="_endpoint_types_3"><a class="anchor" href="#_endpoint_types_3"></a>Endpoint types</h3>
<div class="paragraph">
<p>Axon Server can send HTTP requests containing events in two different ways. Each endpoint that registers as an event handler must support one of them.</p>
</div>
<div class="sect3">
<h4 id="_raw_3"><a class="anchor" href="#_raw_3"></a><code>Raw</code></h4>
<div class="paragraph">
<p>Axon Server serializes a single event directly into the request&#8217;s body when interacting with <code>Raw</code> endpoints. It provides all other relevant information in the headers of the request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code></p>
</li>
<li>
<p><code>AxonIQ-MessageId</code></p>
</li>
<li>
<p><code>AxonIQ-EventName</code></p>
</li>
<li>
<p><code>AxonIQ-DateTime</code></p>
</li>
<li>
<p><code>AxonIQ-Index</code></p>
</li>
<li>
<p><code>AxonIQ-AggregateId</code></p>
</li>
<li>
<p><code>AxonIQ-AggregateType</code></p>
</li>
<li>
<p><code>AxonIQ-SequenceNumber</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Raw</code> type supports sending any binary payload directly.
Please refer to the <a href="../../../openapi/integration-outbound-api/#tag/Request-handler/operation/eventsRaw" class="xref page">API documentation</a> for detailed information about the HTTP request structure.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wrapped_3"><a class="anchor" href="#_wrapped_3"></a><code>Wrapped</code></h4>
<div class="paragraph">
<p>When interacting with <code>Wrapped</code> endpoints, Axon Server generates a JSON message that contains a list of events. Each element includes a serialized event and all additional information relevant to the event.</p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="../../../openapi/integration-outbound-api/#tag/Request-handler/operation/handleWrappedEvents" class="xref page">API documentation</a> for detailed information about the HTTP request structure.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integration_configuration"><a class="anchor" href="#_integration_configuration"></a>Integration configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Administrators can configure the following properties for integrations:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">axoniq.axonserver.integration.command-attempts</dt>
<dd>
<p>Sending commands to an endpoint is retried command-attempts times. Default value is 1.</p>
</dd>
<dt class="hdlist1">axoniq.axonserver.integration.command-retry-backoff</dt>
<dd>
<p>The command-retry-backoff property defines the initial waiting time before retrying in milliseconds. After the first retry the retry time is increased exponentially. Default value is 10 milliseconds.</p>
</dd>
<dt class="hdlist1">axoniq.axonserver.integration.query-attempts</dt>
<dd>
<p>Sending queries to an endpoint is retried query-attempts times. Default value is 1.</p>
</dd>
<dt class="hdlist1">axoniq.axonserver.integration.query-retry-backoff</dt>
<dd>
<p>The query-retry-backoff property defines the initial waiting time before retrying in milliseconds. After the first retry the retry time is increased exponentially. Default value is 10 milliseconds.</p>
</dd>
<dt class="hdlist1">axoniq.axonserver.integration.event-retry-backoff</dt>
<dd>
<p>Publishing events to an endpoint is retried as long as the endpoint is healthy and the event handler is registered. The event-retry-backoff property defines the initial waiting time before retrying in milliseconds. After the first retry the retry time is increased exponentially up to a maximum of 30 seconds. Default value is 10 milliseconds.</p>
</dd>
<dt class="hdlist1">axoniq.axonserver.integration.trust-manager-files</dt>
<dd>
<p>Comma separated list of files of trusted certificate authorities.</p>
</dd>
<dt class="hdlist1">axoniq.axonserver.integration.allow-insecure-trust-manager</dt>
<dd>
<p>Option to allow all insecure events when connecting to an HTTPS endpoint (default false).</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_messages"><a class="anchor" href="#_sending_messages"></a>Sending messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can send messages to Axon Server via HTTP requests. Axon Server supports four types of messages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Commands</p>
</li>
<li>
<p>Queries</p>
</li>
<li>
<p>Events</p>
</li>
<li>
<p>Snapshots</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general, you can use two forms to send these requests to Axon Server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Raw</code> where the HTTP content is the actual payload of the message, and all additional information is in the HTTP headers</p>
</li>
<li>
<p><code>Wrapped</code>, where the HTTP content is a JSON object containing the message together with all the relevant information</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the operations on the requests to send messages, check the <a href="../../../openapi/integration-api/" class="xref page">Axon Server Integration API</a>.</p>
</div>
<div class="sect2">
<h3 id="_sending_commands"><a class="anchor" href="#_sending_commands"></a>Sending commands</h3>
<div class="paragraph">
<p>Any application that can not connect directly to Axon Server can still send commands through Axon Server&#8217;s HTTP APIs. This document explains the two ways to do so.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Axon Server routes commands based on a routing key in the request. If multiple handlers exist for the same command, Axon Server sends requests with the same routing key to the same handler. Command handlers often rely on the routing consistency provided by routing keys to cache data between requests.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_the_raw_endpoint"><a class="anchor" href="#_the_raw_endpoint"></a>The <code>Raw</code> endpoint</h4>
<div class="paragraph">
<p>The <code>Raw</code> endpoint URL path follows the <code>/v2/commands/[commandName]</code> pattern. The content of the HTTP request is the serialized command. The sender may provide additional information through HTTP headers.</p>
</div>
<div class="paragraph">
<p>There is one required header:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code>: the serialization type for the context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following headers are optional:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AxonIQ-PayloadType</code>: defines the type of the payload <em>(if missing, the command name as the payload type)</em></p>
</li>
<li>
<p><code>AxonIQ-Priority</code>: priority of the request <em>(default is 0, a higher value means higher priority)</em></p>
</li>
<li>
<p><code>AxonIQ-RoutingKey</code>: the key used for routing (auto-generated if missing)
The code below represents a sample request to the <code>http-raw</code> endpoint sending an <code>io.axoniq.demo.giftcard.api.IssueCardCommand</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/commands/io.axoniq.demo.giftcard.api.IssueCardCommand?context=context1
Content-Type: application/xml

&lt;io.axoniq.demo.giftcard.api.IssueCardCommand&gt;
  &lt;id&gt;sample-card-5&lt;/id&gt;
  &lt;amount&gt;110&lt;/amount&gt;
&lt;/io.axoniq.demo.giftcard.api.IssueCardCommand&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Axon Server then delegates the command to a command handler registered in the <code>context1</code> context.</p>
</div>
<div class="paragraph">
<p>For more details about the <code>Raw</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/dispatchCommandRaw" class="xref page">Send Command API docs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wrapped_endpoint"><a class="anchor" href="#_wrapped_endpoint"></a>Wrapped endpoint</h4>
<div class="paragraph">
<p>The <code>Wrapped</code> endpoint URL path follows the <code>/v2commands</code> pattern. The content of the HTTP request is a JSON message containing all the information for a single command. Below is the above request in <code>Wrapped</code> form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/commands?contexts=default
Content-Type: application/json

{
  "payload": "&lt;io.axoniq.demo.giftcard.api.IssueCardCommand&gt;&lt;id&gt;sample-card-5&lt;/id&gt;&lt;amount&gt;110&lt;/amount&gt;&lt;/io.axoniq.demo.giftcard.api.IssueCardCommand&gt;"
  "name": "io.axoniq.demo.giftcard.api.IssueCardCommand"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The message may contain additional optional fields like <code>payloadType</code>, <code>routingKey</code>, <code>priority</code>, and <code>metaData</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The serialization format of the query object must match the serialization the query handler expects. Even though the HTTP payload is JSON, if the query handler expects XML, the payload must be XML. If the handler expects a JSON serialized payload, the request would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/commands?contexts=default
Content-Type: application/json

{
  "payload": {
   "id": "sample-card-5",
   "amount": 110
   },
  "name": "io.axoniq.demo.giftcard.api.IssueCardCommand"
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more details about the <code>Wrapped</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/dispatchCommand" class="xref page">Send Command Message API docs</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_queries"><a class="anchor" href="#_sending_queries"></a>Sending queries</h3>
<div class="paragraph">
<p>Any application that can not connect directly to Axon Server can still send queries to it through Axon Server&#8217;s HTTP APIs. This document explains the two ways to do so.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Axon Server&#8217;s HTTP query endpoint only supports request-response queries. It&#8217;s unable to take care of subscription queries at this
moment.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_the_raw_endpoint_2"><a class="anchor" href="#_the_raw_endpoint_2"></a>The <code>Raw</code> endpoint</h4>
<div class="paragraph">
<p>The <code>Raw</code> endpoint URL path follows the <code>/v1/queries/[queryName]?context=[contextName]</code> pattern. The content of the HTTP request is the serialized query. The sender may provide additional information through HTTP headers.</p>
</div>
<div class="paragraph">
<p>There is one required header:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code>: the serialization type for the context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following headers are optional:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AxonIQ-PayloadType</code>: defines the type of the payload <em>(if missing, the command name is the payload type)</em></p>
</li>
<li>
<p><code>AxonIQ-ResponseType</code>: the expected response type (required when the handler uses Axon Framework)</p>
</li>
<li>
<p><code>AxonIQ-ResponseCount</code>: use MULTIPLE to indicate that the query handler can return multiple instances of the response
type</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The code below represents a sample request to the <code>Raw</code> endpoint sending an <code>io.axoniq.demo.giftcard.api.FetchCardSummariesQuery</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/queries/io.axoniq.demo.giftcard.api.FetchCardSummariesQuery?contexts=default
Content-Type: application/xml
AxonIQ-ResponseType: io.axoniq.demo.giftcard.api.CardSummary
AxonIQ-ResponseCount: MULTIPLE

&lt;io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;
    &lt;offset&gt;0&lt;/offset&gt;
    &lt;limit&gt;100&lt;/limit&gt;
&lt;/io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Axon Server then delegates the query to a query handler registered in the <code>default</code> context. When the handler responds with a zero or more <code>io.axoniq.demo.giftcard.api.CardSummary</code> objects, Axon Server serializes the payload and sends it back in the response payload of the HTTP request.</p>
</div>
<div class="paragraph">
<p>For more details about the <code>Raw</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/dispatchQueryRaw" class="xref page">Send Query API docs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_wrapped_endpoint"><a class="anchor" href="#_the_wrapped_endpoint"></a>The <code>Wrapped</code> endpoint</h4>
<div class="paragraph">
<p>The <code>Wrapped</code> endpoint URL path follows the <code>/v2/queries?context=[contextName]</code> pattern. The content of the HTTP request is a JSON message containing all the information for a single query. Below is the above request in <code>Wrapped</code> form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/queries?contexts=default
Content-Type: application/json

{
  "payload": "&lt;io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;&lt;offset&gt;0&lt;/offset&gt;&lt;limit&gt;100&lt;/limit&gt;&lt;/io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;"
  "name": "io.axoniq.demo.giftcard.api.FetchCardSummariesQuery",
  "responseType": "io.axoniq.demo.giftcard.api.CardSummary"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The message may contain additional optional fields like <code>payloadType</code> and <code>metaData</code>. You can use the <code>payloadType</code> field to specify the payload type in cases where the query name doesn&#8217;t equal the payload type for the query message.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The serialization format of the query object must match the serialization the query handler expects. Even though the HTTP payload is JSON, if the query handler expects XML, the payload must be to XML. If the handler expects a JSON serialized payload, the request would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/queries?contexts=default
Content-Type: application/json

{
  "payload": {
   "offset": 0,
   "limit": 100
   },
  "name": "io.axoniq.demo.giftcard.api.FetchCardSummariesQuery",
  "responseType": "io.axoniq.demo.giftcard.api.CardSummary"
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more details about the <code>Wrapped</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/dispatchQuery" class="xref page">Send Query Message API docs</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_events"><a class="anchor" href="#_sending_events"></a>Sending events</h3>
<div class="paragraph">
<p>Any application that can not connect directly to Axon Server can still send events to it through Axon Server&#8217;s HTTP APIs. This document explains the two ways to do so.</p>
</div>
<div class="sect3">
<h4 id="_the_raw_endpoint_3"><a class="anchor" href="#_the_raw_endpoint_3"></a>The <code>Raw</code> endpoint</h4>
<div class="paragraph">
<p>The <code>Raw</code> endpoint URL path follows the <code>/v1/events/[eventName]?context=[contextName]</code> pattern. The content of the HTTP request is the serialized event. The sender may provide additional information through HTTP headers.</p>
</div>
<div class="paragraph">
<p>There is one required header:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code>: the serialization type for the context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following headers are optional:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AxonIQ-AggregateId</code>:</p>
</li>
<li>
<p><code>AxonIQ-AggregateType</code>:</p>
</li>
<li>
<p><code>AxonIQ-SequenceNumber</code>:</p>
</li>
<li>
<p><code>AxonIQ-DateTime</code>:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The code below represents a sample request to the <code>Raw</code> endpoint sending a <code>local.application.client.Event</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/events/local.application.client.Event?context=default
Content-Type: application/json
AxonIQ-AggregateId: 901aa5ce-b281-4788-97f2-2be7f236dde6
AxonIQ-AggregateType: Aggregate
AxonIQ-SequenceNumber: 0
AxonIQ-DateTime: 2022-09-22T21:37:00.000+00:00

{
   "id": "901aa5ce-b281-4788-97f2-2be7f236dde6",
   "text": "New customer created"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Axon Server stores the event in the <code>default</code> context of the event store as specified in the request&#8217;s URL.</p>
</div>
<div class="paragraph">
<p>For more details about the <code>Raw</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/publishEventRaw" class="xref page">Publish Event API docs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_wrapped_endpoint_2"><a class="anchor" href="#_the_wrapped_endpoint_2"></a>The <code>Wrapped</code> endpoint</h4>
<div class="paragraph">
<p>The <code>Wrapped</code> endpoint can be used to send multiple events in a single transaction.</p>
</div>
<div class="paragraph">
<p>The <code>Wrapped</code> endpoint URL path follows the <code>/v1/events?context=[contextName]</code> pattern. The content of the HTTP request is a JSON array of messages, each containing all the information for a single event. Below is the above request in <code>Wrapped</code> form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/events?context=default
Content-Type: application/json

[{
  "payload": {
    "id": "901aa5ce-b281-4788-97f2-2be7f236dde6",
    "text": "New customer created"
  },
  "name": "local.application.client.Event",
  "aggregateId": "901aa5ce-b281-4788-97f2-2be7f236dde6",
  "aggregateType": "Aggregate",
  "sequenceNumber": 0,
  "dateTime": "2022-09-22T21:37:00.000+00:00"
}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JSON payload may contain additional optional fields such as <code>metaData</code>.</p>
</div>
<div class="paragraph">
<p>For more details about the <code>Wrapped</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/publishEvents" class="xref page">Publish Event Message API docs</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_snapshots"><a class="anchor" href="#_sending_snapshots"></a>Sending snapshots</h3>
<div class="paragraph">
<p>Any application that can not connect directly to Axon Server can still send snapshots to it through Axon Server&#8217;s HTTP APIs. This document explains the two ways to do so.</p>
</div>
<div class="sect3">
<h4 id="_the_raw_endpoint_4"><a class="anchor" href="#_the_raw_endpoint_4"></a>The <code>Raw</code> endpoint</h4>
<div class="paragraph">
<p>The <code>Raw</code> endpoint URL path follows the <code>/v1/snapshots/[aggregeteId]?context=[contextName]</code> pattern. The content of the HTTP request is the serialized snapshot. The sender may provide additional information through HTTP headers.</p>
</div>
<div class="paragraph">
<p>There are three required headers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code>: the serialization type for the context</p>
</li>
<li>
<p><code>AxonIQ-AggregateType</code>:</p>
</li>
<li>
<p><code>AxonIQ-SequenceNumber</code>:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following headers are optional:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AxonIQ-DateTime</code>:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The sequence number of a snapshot must be less than or equal to the last event stored for the aggregate.</p>
</div>
<div class="paragraph">
<p>The code below represents a sample request to the <code>Raw</code> endpoint sending a <code>local.application.client.Snapshot</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/snapshots/my-aggregate-id?context=default
Content-Type: application/json
AxonIQ-AggregateType: Aggregate
AxonIQ-SequenceNumber: 0
AxonIQ-DateTime: 2022-09-22T21:37:00.000+00:00

{
   "id": "my-aggregate-id",
   "name": "Customer name"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Axon Server stores the snapshot in the <code>default</code> context of the event store as specified in the request&#8217;s URL.</p>
</div>
<div class="paragraph">
<p>For more details about the <code>Raw</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/publishSnapshotRaw" class="xref page">Publish Snapshot API docs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_wrapped_endpoint_3"><a class="anchor" href="#_the_wrapped_endpoint_3"></a>The <code>Wrapped</code> endpoint</h4>
<div class="paragraph">
<p>The <code>Wrapped</code> endpoint URL path follows the <code>/v1/snapshots?context=[contextName]</code> pattern. The content of the HTTP request is a JSON message containing all the information for a snapshot. Below is the above request in <code>Wrapped</code> form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://axonserver:8024/v2/snapshots?context=default
Content-Type: application/json

[{
  "payload": {
   "id": "my-aggregate-id",
   "name": "Customer name"
  },
  "name": "local.application.client.Snapshot",
  "aggregateId": "my-aggregate-id",
  "aggregateType": "Aggregate",
  "sequenceNumber": 0,
  "dateTime": "2022-09-22T21:37:00.000+00:00"
}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JSON payload may contain additional optional fields such as <code>metaData</code>.</p>
</div>
<div class="paragraph">
<p>For more details about the <code>Wrapped</code> endpoint, please refer to the <a href="../../../openapi/integration-api/#tag/Integration/operation/publishSnapshot" class="xref page">Publish Snapshot Message API docs</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reading_events_and_snapshots"><a class="anchor" href="#_reading_events_and_snapshots"></a>Reading events and snapshots</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next to the API to publish events and snapshots to Axon Server, there is also an HTTP API to read aggregate events
and snapshots from the Axon Server event store. The next sections describe the provided operations.</p>
</div>
<div class="sect2">
<h3 id="_read_aggregate_events"><a class="anchor" href="#_read_aggregate_events"></a>Read aggregate events</h3>
<div class="paragraph">
<p>The endpoint <code>/v2/aggregates/[aggregate-id]/events?context=[context]</code> returns all the events for the given aggregate. It is
possible to reduce the number of events returned by specifying the <code>minSequence</code> parameter. This will only return the events with a sequence number equal to or larger than the given value.</p>
</div>
<div class="paragraph">
<p>The result of the operation is a list of event messages starting with the event with the lowest sequence number.</p>
</div>
</div>
<div class="sect2">
<h3 id="_read_aggregate_events_paged"><a class="anchor" href="#_read_aggregate_events_paged"></a>Read aggregate events (paged)</h3>
<div class="paragraph">
<p>The endpoint <code>/v2/aggregates/[aggregate-id]/eventsPaged?context=[context]&amp;pageOffset=[offset]&amp;pageSize=[pageSize]</code> returns one page of events for the given aggregate.</p>
</div>
<div class="paragraph">
<p>The result of the operation is a list of event messages starting with the event with the lowest sequence number.</p>
</div>
</div>
<div class="sect2">
<h3 id="_read_aggregate_snapshots"><a class="anchor" href="#_read_aggregate_snapshots"></a>Read aggregate snapshots</h3>
<div class="paragraph">
<p>The endpoint <code>/v2/aggregates/[aggregate-id]/snapshots?context=[context]</code> returns snapshots for the given aggregate.
It is possible to reduce the number of snapshots returned by specifying the <code>minSequence</code> and/or <code>maxResults</code> parameter.
The <code>maxResults</code> parameter, default value is one, determines how many snapshots will be returned.
The <code>minSequence</code> parameter ensures that the operation will only return the snapshots with a sequence number equal to or larger than the given value.</p>
</div>
<div class="paragraph">
<p>The result of the operation is a list of snapshot messages, starting with the snapshot with the highest sequence number.</p>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../error-codes/">Error Codes</a></span>
  <span class="next"><a href="../../../openapi/integration-api/">Axon Server Integration HTTP API</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://axoniq.bsky.social/">Bluesky</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>&nbsp;</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.instagram.com/axoniq/">Instagram</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>

  </div>
</footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
    </div>
  </body>
</html>
