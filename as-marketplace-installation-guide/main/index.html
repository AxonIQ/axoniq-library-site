<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Axon Server Google Marketplace Installation Guide</title>
    <meta name="generator" content="Antora 3.1.1">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../_/img/apple-touch-icon.png"><!-- 180Ã—180 -->
    <link rel="manifest" href="../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../_'</script>


  </head>
  <body class="article">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../_/img/logo-dark2x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../home/basics.html">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Guides</a>
          <div class="navbar-dropdown card">
              <a class="navbar-item" href="../../home/guides/axon-framework.html">Axon Framework</a>
              <a class="navbar-item" href="../../home/guides/axon-server.html">Axon Server</a>
              <a class="navbar-item" href="../../home/guides/migration.html">Migration</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../axon_framework_ref/4.10/introduction.html">Axon Framework</a>
                <a class="navbar-item" href="../../axon_server_ref/v2024.1/index.html">Axon Server</a>
                <a class="navbar-item" href="../../synapse_ref/latest/index.html">Axon Synapse</a>
                <a class="navbar-item" href="../../axoniq_console_ref/main/index.html">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Axon Server Google Marketplace Installation Guide</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;https%3A%2F%2Fdocs.axoniq.io%2Fas-marketplace-installation-guide%2Fmain%2Findex.html%20%23library" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Axon%20Server%20Google%20Marketplace%20Installation%20Guide%22%20library%20page%20...&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BAxon%20Server%20Google%20Marketplace%20Installation%20Guide%5D(https%3A%2F%2Fdocs.axoniq.io%2Fas-marketplace-installation-guide%2Fmain%2Findex.html)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


</div>
<div class="body">
<div class="nav-container" data-component="as-marketplace-installation-guide" data-version="main">
  <aside class="nav card">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Axon Server Google Marketplace Installation Guide</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="index.html">Axon Server Google Marketplace Installation Guide</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Axon Server Google Marketplace Installation Guide</h1>
            <div class="sect1">
<h2 id="_installing_axon_server_using_google_marketplace"><a class="anchor" href="#_installing_axon_server_using_google_marketplace"></a>Installing Axon Server using Google Marketplace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Axon Server Enterprise is now listed in <a href="https://console.cloud.google.com/marketplace/product/axoniq-public/axon-server-enterprise" class="external" target="_blank" rel="noopener">Google GCP Marketplace</a>.
This allows your team to deploy a single instance or a 3-node cluster Axon Server in your Google Project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_purpose_and_intended_audience"><a class="anchor" href="#_purpose_and_intended_audience"></a>Purpose and intended audience</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide is intended for engineers, developers, and system administrators who want to install Axon Server on the Google Marketplace.</p>
</div>
<div class="paragraph">
<p>The guide covers</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Requirements for your Google Project</p>
</li>
<li>
<p>An overview of required and recommended fields</p>
</li>
<li>
<p>How to secure your Axon Server installation</p>
</li>
<li>
<p>Basic maintenance guide for your cluster</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pre_requisites"><a class="anchor" href="#_pre_requisites"></a>Pre-requisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The network is the backbone for communication between Axon Server Enterprise nodes and applications.</p>
</div>
<div class="paragraph">
<p>During the installation process, a DNS entry is created for each Axon Server node: this is used to configure and set up communication between the nodes.</p>
</div>
<div class="paragraph">
<p><strong>VPC Network and Subnetwork</strong><br>
Your Google project must have an existing <a href="https://console.cloud.google.com/networking/networks/list" class="external" target="_blank" rel="noopener">VPC Network and Subnetwork</a> configured for the zones in where you want to install your cluster: you can define one using <a href="https://console.cloud.google.com/networking/networks/list" class="external" target="_blank" rel="noopener">the Google Console UI</a></p>
</div>
<div class="paragraph">
<p><strong>Cloud DNS Zone</strong><br>
Your Google project must have a <a href="https://console.cloud.google.com/net-services/dns/zones" class="external" target="_blank" rel="noopener">Cloud DNS Zone configured</a>: you can define one using <a href="https://console.cloud.google.com/net-services/dns/zones" class="external" target="_blank" rel="noopener">the Google Console UI</a>.</p>
</div>
<div class="paragraph">
<p>Write down the name of your Cloud DNS Zone : it will be requested in a form field during the installation process.</p>
</div>
<div class="paragraph">
<p><strong>Cloud Resource Manager API</strong><br>
The deployment uses Cloud Resource Manager API, therefore <a href="https://console.cloud.google.com/marketplace/product/google/cloudresourcemanager.googleapis.com">this API must be enabled</a> before proceeding with the installation.</p>
</div>
<div class="paragraph">
<p><strong>Secret manager API</strong><br>
If you plan to store your sensitive data in Google Secret Manager, you must <a href="https://console.cloud.google.com/marketplace/product/google/secretmanager.googleapis.com">enable the API first</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_required_and_recommended_fields_overview"><a class="anchor" href="#_required_and_recommended_fields_overview"></a>Required and recommended fields overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following is a list of fields  that you will be prompted to fill in during your installation.</p>
</div>
<div class="paragraph">
<p><strong>Deployment name</strong></p>
</div>
<div class="paragraph">
<p>This is used in the installation to give the deployment a name and to distinguish it from other deployments in the same Google project.</p>
</div>
<div class="paragraph">
<p>It is also used as a PREFIX to name resources used by the deployment.</p>
</div>
<div class="paragraph">
<p><strong>Deployment Service Account / Service account ID / Service Account description</strong></p>
</div>
<div class="paragraph">
<p>Used by Google as the user to run Terraform: it requires several admin roles because they are used to create resources in the project itself.</p>
</div>
<div class="paragraph">
<p><strong>Cloud DNS Zone of your network domain (mandatory / prerequisite)</strong></p>
</div>
<div class="paragraph">
<p>This is a prerequisite that must be created in the project beforehand. It is used to create DNS entries for instances, for example <code><em>axonserver-1.mydomain.net</em></code>,  <code><em>axonserver-2.mydomain.net</em></code> <code><em>axonserver-3.mydomain.net</em></code>.</p>
</div>
<div class="paragraph">
<p>These addresses are used by the configuration for internal calls and can be used by the user to connect to the VM from a running Axon Framework application.</p>
</div>
<div class="paragraph">
<p><strong>Internal Network Domain</strong></p>
</div>
<div class="paragraph">
<p>This is the domain to append to the hostname of the VM&#8217;s. It should match the value the user entered in the <code>DNS zone details</code> (for example, <code>mydomain.net</code>).</p>
</div>
<div class="paragraph">
<p><strong>Enable Google Ops Agent</strong>
<em>This is a non-mandatory option</em>, but recommended. <em>You may incur in additional charges from Google for using this service.</em></p>
</div>
<div class="paragraph">
<p>Google Ops Agent is the Google way to collect logs and metrics, and is displayed in the <a href="https://console.cloud.google.com/logs/" class="external" target="_blank" rel="noopener">dashboard / log explorer</a>.</p>
</div>
<div class="paragraph">
<p><strong>Use Google Secret Manager</strong></p>
</div>
<div class="paragraph">
<p><em>This is a non-mandatory option</em>, but recommended. <em>You may incur in additional charges from Google for using this service.</em></p>
</div>
<div class="paragraph">
<p>If selected, sensitive data such as the admin password (randomly generated during the installation) will be stored in the <a href="https://console.cloud.google.com/security/secret-manager" class="external" target="_blank" rel="noopener">Google Secrets Manager</a>, where only accounts with specific permissions can access and read/change the value.</p>
</div>
<div class="paragraph">
<p>If not selected these values will be stored in the VM Metadata : these values can be read by anyone who has access to the Google Dashboard, even users with lower permissions (such as <code>editor</code> role).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_maintenance_of_your_cluster"><a class="anchor" href="#_basic_maintenance_of_your_cluster"></a>Basic maintenance of your cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the installing Axon Server Enterprise three new VMs will be available in your project.</p>
</div>
<div class="paragraph">
<p>You can gather the list of available VMs using the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">gcloud compute instances list --project=YOUR_PROJECT_ID</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to adjust some properties for your cluster, you can <code>ssh</code> into your machine with the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">gcloud compute ssh YOUR_INSTANCE_NAME-0 --project=YOUR_PROJECT_ID --zone=YOUR_ZONE</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can connect to the AxonServer UI by opening a tunnel on port 8024 to one of the instances in your cluster, and then opening <a href="http://localhost:8024" class="bare">http://localhost:8024</a> in your browser.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">gcloud compute start-iap-tunnel YOUR_INSTANCE_NAME-0 --project=YOUR_PROJECT_ID --zone=YOUR_ZONE 8024 --local-host-port=localhost:8024</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_check_logs_and_vms_resources"><a class="anchor" href="#_check_logs_and_vms_resources"></a>Check logs and VMs resources</h3>
<div class="paragraph">
<p>If you enabled Google Ops Agent during the installation, you can check the logs by going to <a href="https://console.cloud.google.com/logs/query" class="external" target="<em>blank">Google Logs Explorer</a> and selecting <code>axonserver</code> in the _Select log names</em> dropdown.</p>
</div>
<div class="paragraph">
<p>The <em>Observability</em> panel of your VMs will display important information such as <em>CPU Utilization, Memory Utilization, Disk Space Utilization, Disk IOPS</em> and details of <em>running processes</em></p>
</div>
<div class="paragraph">
<p>If you haven&#8217;t enabled the Google Ops Agent option, you can check the logs and VM resources using Axonserver UI or by opening an <code>ssh</code> connection to the VM.</p>
</div>
</div>
<div class="sect2">
<h3 id="_update_your_axon_server"><a class="anchor" href="#_update_your_axon_server"></a>Update your Axon Server</h3>
<div class="paragraph">
<p>Axon Server is installed as a Linux package in your VM instance. You can then update it as a regular package, using <code>sudo apt update axonserver -y</code><br>
After the update process, you will need to stop and restart the process.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">sudo systemctl stop axonserver
sudo systemctl start axonserver</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a regular Axon Server cluster, we recommend that you update and restart a single instance at a time to ensure that your cluster is running with zero downtime. After each restart, you need to check the health of your cluster. You can do this by looking at one of your AxonServer UIs that is not restarting.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_secure_your_axonserver_installation"><a class="anchor" href="#_secure_your_axonserver_installation"></a>Secure your AxonServer installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, your cluster is installed without TLS/SSL enabled.</p>
</div>
<div class="paragraph">
<p>To secure your AxonServer installation and prepare it for production, please follow the documentation at <a href="https://docs.axoniq.io/reference-guide/axon-server/security" class="bare">https://docs.axoniq.io/reference-guide/axon-server/security</a></p>
</div>
</div>
</div>
            </article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-cloud">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-synapse">Axon Synapse</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/page-actions.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
