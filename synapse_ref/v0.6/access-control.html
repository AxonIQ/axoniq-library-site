<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Access Control</title>
    <link rel="canonical" href="https://docs.axoniq.io/synapse_ref/latest/access-control.html">
    <link rel="prev" href="configuration.html">
    <link rel="next" href="sending-messages.html">
    <meta name="generator" content="Antora 3.1.1">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../_/img/apple-touch-icon.png"><!-- 180Ã—180 -->
    <link rel="manifest" href="../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../_'</script>


  </head>
  <body class="article">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../_/img/logo-dark2x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../home/basics.html">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Guides</a>
          <div class="navbar-dropdown card">
              <a class="navbar-item" href="../../home/guides/axon-framework.html">Axon Framework</a>
              <a class="navbar-item" href="../../home/guides/axon-server.html">Axon Server</a>
              <a class="navbar-item" href="../../home/guides/migration.html">Migration</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../axon-framework-reference/4.10/introduction.html">Axon Framework</a>
                <a class="navbar-item" href="../../axon_server_ref/v2024.1/index.html">Axon Server</a>
                <a class="navbar-item" href="../latest/index.html">Axon Synapse</a>
                <a class="navbar-item" href="../../axoniq_console_ref/main/index.html">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Axon Synapse Reference</a></li>
    <li><a href="access-control.html">Access Control</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;https%3A%2F%2Fdocs.axoniq.io%2Fsynapse_ref%2Fv0.6%2Faccess-control.html%20%23library" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Access%20Control%22%20library%20page%20...&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BAccess%20Control%5D(https%3A%2F%2Fdocs.axoniq.io%2Fsynapse_ref%2Fv0.6%2Faccess-control.html)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v0.6</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../latest/access-control.html">latest</a>
    <a class="version item" href="../v0.11/access-control.html">v0.11</a>
    <a class="version item" href="../v0.10/access-control.html">v0.10</a>
    <a class="version item" href="../v0.9/access-control.html">v0.9</a>
    <a class="version item" href="../v0.8/access-control.html">v0.8</a>
    <a class="version item" href="../v0.7/access-control.html">v0.7</a>
    <a class="version item is-current" href="access-control.html">v0.6</a>
  </div>
</div>
</div>
<div class="body">
<div class="nav-container" data-component="synapse_ref" data-version="v0.6">
  <aside class="nav card">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Axon Synapse</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview.html">High-Level Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="access-control.html">Access Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="sending-messages.html">Sending Messages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sending-commands.html">Sending Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sending-queries.html">Sending Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sending-events.html">Sending Events</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="receiving-messages.html">Receiving Messages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="receiving-commands.html">Receiving Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="receiving-queries.html">Receiving Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="receiving-events.html">Receiving Events</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="aggregates.html">Aggregates</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="multi-context.html">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="openapi/index.html">Open API Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openapi/synapse.html">Axon Synapse API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openapi/client-message.html">Client Message API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openapi/client-raw.html">Client Raw API</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Access Control</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>When using Synapse there are 3 different areas of access control:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access to the Synapse API or user interface</p>
</li>
<li>
<p>Access to Axon Server for sending messages</p>
</li>
<li>
<p>Access to the handlers for receiving messages</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_access_to_the_axon_synapse_api"><a class="anchor" href="#_access_to_the_axon_synapse_api"></a>Access to the Axon Synapse API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To control access to the Synapse API for registering handlers, the administrator must enable access control through the <code>synapse.auth.enabled</code> property.</p>
</div>
<div class="paragraph">
<p>If access control is on, all the APIs that work on Synapse configuration expect clients to provide either a valid username and password combination or a valid token. A valid username/password combination is such that exists in Axon Server so it can verify the user has the correct roles for the request. Same for the token, it must exists in Axon Server with the required role.</p>
</div>
<div class="paragraph">
<p>The required roles for the specific request types are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ADMIN@_admin</code>, <code>VIEW_CONFIGURATION@_admin</code> (to get information from any context), <code>ADMIN@context</code>, <code>USE_CONTEXT@context</code> (to get information from a specific context)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">other</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ADMIN@_admin</code>, <code>ADMIN@context</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If you are using Axon Synapse in combination with Axon Server Standard edition the token must be the token specified in the Axon Server <code>axoniq.axonserver.accesscontrol.token</code> property for the GET operations, and the  <code>axoniq.axonserver.accesscontrol.admin-token</code> property for the other requests.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_messages"><a class="anchor" href="#_sending_messages"></a>Sending messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a client sends a request to Synapse, it needs to provide a token to authenticate itself. The client must provide this token through the <code>X-API-KEY</code> header. The token must be a valid token in Axon Server, for an application to execute the request type in the specified context.</p>
</div>
<div class="paragraph">
<p>If you are using Axon Synapse in combination with Axon Server Standard edition the token must be the token specified in the Axon Server <code>axoniq.axonserver.accesscontrol.token</code> property.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_receiving_messages"><a class="anchor" href="#_receiving_messages"></a>Receiving messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you register a request handler in Synapse, you can specify two types of tokens:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>client token</p>
</li>
<li>
<p>server token</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The client token is the token that Synapse passes to the request handler. This way you can protect the request handler from illegal access. Axon Synapse passes the client token to the request handler as a <code>Bearer</code> token in the <code>Authentication</code> header.</p>
</div>
<div class="paragraph">
<p>Axon Server verifies the server token on requests to register the handler. It needs to be a valid application token, with a role that allows registering that type of handler. For instance, to register a command handler, you need the token of an application to contain one of the following roles in Axon Server: <code>SUBSCRIBE_COMMAND_HANDLER</code>, <code>WRITE</code>, or <code>USE_CONTEXT</code>.</p>
</div>
<div class="paragraph">
<p>If you are using Axon Synapse in combination with Axon Server Standard edition the token must be the token specified in the Axon Server <code>axoniq.axonserver.accesscontrol.token</code> property.</p>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="configuration.html">Configuration</a></span>
  <span class="next"><a href="sending-messages.html">Sending Messages</a></span>
</nav>
    </article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-cloud">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-synapse">Axon Synapse</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/page-actions.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
