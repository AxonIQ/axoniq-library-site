<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Axon Server</title>
    <link rel="prev" href="../README.html">
    <link rel="next" href="../docker-k8s/README.html">
    <meta name="generator" content="Antora 3.1.1">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../../_'</script>


  </head>
  <body class="article">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://library.axoniq.io">📚 AxonIQ Library</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Explanations</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../../../concepts/index.html">Software Development Concepts</a>
                <a class="navbar-item" href="../../../../understanding-axon/index.html">Understanding Axon</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">References</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../../../axon_framework_ref/index.html">Axon Framework</a>
                <a class="navbar-item" href="../../../index.html">Axon Server</a>
                <a class="navbar-item" href="../../../../synapse_ref/latest/index.html">Axon Synapse</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Tutorials</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../../../axon_framework_fundamentals/index.html">Axon Framework Fundamentals</a>
                <a class="navbar-item" href="../../../../axon-server-fundamentals/index.html">Axon Server Fundamentals</a>
                <a class="navbar-item" href="../../../../synapse-quick-start/latest/index.html">Axon Synapse Quick Start</a>
                <a class="navbar-item" href="../../../../axoniq-console-getting-started/main/index.html">AxonIQ Console Getting Started</a>
                <a class="navbar-item" href="../../../../giftcard/index.html">Building a Giftcard Application</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">How-to guides</a>
          <div class="navbar-dropdown">
          </div>
        </div>
        <a class="navbar-item" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item" href="https://discuss.axoniq.io" target="_blank">Discuss</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="axon_server_ref" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">Axon Server</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../README.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="README.html">Local installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../docker-k8s/README.html">Docker / K8s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/README.html">Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/admin-configuration/README.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/configuration.html">System properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/command-line-interface.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/rest-api.html">REST API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/admin-configuration/grpc-api.html">gRPC API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/monitoring/README.html">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/actuator-endpoints.html">Actuator Endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/axon-server-metrics.html">Axon Server Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/grpc-metrics.html">gRPC Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/heartbeat-monitoring.html">Heartbeat Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/monitoring/diagnostics.html">Diagnostics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/clustering.html">Clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/replication-groups.html">Replication Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/multi-context.html">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/tiered-storage.html">Tiered Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/event-transformation.html">Event Transformation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/tagging.html">Tagging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/backup-and-messaging-only-nodes.html">Backup and Messaging-Only Nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/backups.html">Backups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/recovery.html">Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/plugins.html">Axon Server Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../administration/logging/README.html">Logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../administration/logging/logging-format.html">Logging Format</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/error-codes.html">Error Codes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../security/README.html">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/ssl.html">SSL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ee.html">Access Control for Axon Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-clients.html">Security for Axon Framework Client Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-cli.html">Access Control and the CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-api.html">Access Control on the REST and gRPC APIs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-ldap.html">Axon Server EE - LDAP Extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/access-control-oauth2.html">Axon Server EE - OAuth Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../performance/README.html">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/tuning-event-processing.html">Event Segments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../performance/flow-control.html">Flow Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../migration/README.html">Migration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/non-axon-server-to-axon-server.html">Non-Axon Server to Axon Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/standard-to-enterprise-edition.html">Standard to Enterprise Edition</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../rest-api.html">REST API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../grpc-api.html">gRPC API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">Axon Server</a></li>
    <li><a href="../README.html">Installation</a></li>
    <li><a href="README.html">Local installation</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">master</button>
  <div class="version-menu">
    <a class="version is-current" href="README.html">master</a>
    <a class="version is-missing" href="../../../0/index.html">older releases</a>
  </div>
</div>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu">

    <a class="action" href="https://discuss.axoniq.io/search?q&#x3D;https%3A%2F%2Flibrary.axoniq.io%2Faxon_server_ref%2Faxon-server%2Finstallation%2Flocal-installation%2FREADME.html%20%23library" target="discuss_search">View Discussions</a>
    <a class="action" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Axon%20Server%22%20library%20page%20...&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BAxon%20Server%5D(https%3A%2F%2Flibrary.axoniq.io%2Faxon_server_ref%2Faxon-server%2Finstallation%2Flocal-installation%2FREADME.html)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


</div>
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Axon Server</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><!-- vale Google.Passive = NO -->
<!-- vale Google.Will = NO -->
<!-- vale Google.We = NO -->
<!-- vale Google.FirstPerson = NO -->
<!-- vale AxonIQ.Headings = NO --></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Unified Axon Server Artifact</p>
</div>
<div class="paragraph">
<p>In an effort to simplify the deployment process, since 2023.1 version we&#8217;ve updated Axon Server to release a single artifact, replacing the previously separate artifacts for the Standard and Enterprise edition.
Depending on the presence of a license, Axon Server will now automatically adjust.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_binaries"><a class="anchor" href="#_binaries"></a>Binaries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Axon Server ZIP download contains executable JAR files for the server itself and the CLI.
In addition to the archive file, you would also need a license to run it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_axon_server"><a class="anchor" href="#_setting_up_axon_server"></a>Setting up Axon Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may run Axon Server in a variety of ways.
The following sections will guide you through the process of setting up Axon Server in a variety of ways.
Before we get into the setup, a short introduction to the concept of clusters and contexts within Axon Server.</p>
</div>
<div class="sect2">
<h3 id="_non_clustered"><a class="anchor" href="#_non_clustered"></a>Non-clustered</h3>
<div class="paragraph">
<p>A single Axon Server node will provide a single connection point for (Axon Framework-based) client applications.
This node will manage message delivery and event storage.
To run Axon Server in a non-clustered mode with initialized context, you can simply add these properties to the <code>axonserver.properties</code> or add them as environment properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">axoniq.axonserver.standalone=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another way to initialize a context is to use the Axon Server UI, CLI, or Cluster template.</p>
</div>
</div>
<div class="sect2">
<h3 id="_clustered"><a class="anchor" href="#_clustered"></a>Clustered</h3>
<div class="paragraph">
<p>A cluster of Axon Server nodes will provide multiple connection points for (Axon Framework-based) client applications, and thus share the load of managing message delivery and event storage.
Client applications will dynamically connect to a node in the cluster and automatically reconnect to another, should the node that they are currently connected to become unreachable.‌ This ensures a highly available deployment.</p>
</div>
<div class="paragraph">
<p>Within a single cluster you can define <em>*contexts*</em>.
Contexts are comparable to logical databases in a RDBMS.
They allow for strong separation without requiring deploying and managing full instances.
They may be used for "bounded contexts" in the DDD sense, multi-tenancy (with a context per tenant), and have different retention policies.</p>
</div>
<div class="paragraph">
<p>The <a href="../../administration/clustering.html" class="xref page">Clustering</a> and <a href="../../administration/multi-context.html" class="xref page">Contexts</a> sections provide more insights into these aspects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cluster_setup"><a class="anchor" href="#_cluster_setup"></a>Cluster setup</h3>
<div class="paragraph">
<p>Setting up a cluster generally involves three steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provision "uninitialized" Axon Server nodes</p>
</li>
<li>
<p>Admin Node initialization</p>
</li>
<li>
<p>Add additional nodes to the cluster.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_provision_axon_server_nodes"><a class="anchor" href="#_provision_axon_server_nodes"></a>Provision Axon Server nodes</h4>
<div class="paragraph">
<p>To get started with setting up a cluster, you need to provision a set of <em>*uninitialized*</em> nodes.
Extract the Zip on all the nodes that you want to be part of the cluster.
The nodes will need to run on separate ports if run on the same machine.</p>
</div>
<div class="paragraph">
<p>From the location where the files have been extracted, please run the following command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ ./axonserver.jar
     _                     ____
    / \   __  _____  _ __ / ___|  ___ _ ____   _____ _ __
   / _ \  \ \/ / _ \| '_ \\___ \ / _ \ '__\ \ / / _ \ '__|
  / ___ \  &gt;  &lt; (_) | | | |___) |  __/ |   \ V /  __/ |
 /_/   \_\/_/\_\___/|_| |_|____/ \___|_|    \_/ \___|_|
                                               Powered by AxonIQ</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will start Axon Server using the default ports - 8024 for HTTP / 8124 and 8224 for gRPC</p>
</div>
<div class="paragraph">
<p>The HTTP port is used to serve the Management UI and the REST API provided by Axon Server.
The gRPC 8124 port is used by Axon Framework client applications to connect to Axon Server, while the gRPC 8224 port is used for internal communication between the nodes of an Axon Server cluster.</p>
</div>
<div class="paragraph">
<p>The management UI can be opened at "http://localhost:8024" while the REST API is accessible at "http://localhost:8024/v1".
The REST API provides an operation at "/v1/public/me" to get the configuration details for a running instance of Axon Server.</p>
</div>
<div class="paragraph">
<p>A representation of the response is given below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{
  "authentication": false,
  "clustered": true,
  "ssl": false,
  "adminNode": false,
  "developmentMode": false,
  "storageContextNames": [],
  "contextNames": [],
  "internalHostName": ${hostname},
  "grpcInternalPort": 8224,
  "grpcPort": 8124,
  "httpPort": 8024,
  "name": ${hostname},
  "hostName": ${hostname}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat this for every node that needs to be a part of the cluster.</p>
</div>
<div class="paragraph">
<p>To summarize,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extract the Axon Server zip (along with the license file) on each node which needs to be part of the cluster and start each instance.</p>
</li>
<li>
<p>Ensure that the gRPC / internal gRPC ports are open and accessible between the various nodes.</p>
</li>
<li>
<p>The REST API call to each node at "/v1/public/me" gives you the configuration details of the running Axon Server instance.
This configuration can be customized using the system properties file <code>axonserver.properties</code> located within the Axon Server distributable.
The <a href="../../administration/admin-configuration/configuration.html" class="xref page">System Properties</a> section details these values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This completes the process of setting up the uninitialized nodes.
Next, we need to initialize one of the nodes as the "Admin Node"</p>
</div>
</div>
<div class="sect3">
<h4 id="_admin_node_initialization"><a class="anchor" href="#_admin_node_initialization"></a>Admin node initialization</h4>
<div class="paragraph">
<p>To convert a group of uninitialized Axon Server nodes into a cluster, you need to select any one of them as a starting point and run the “init-cluster” command on it.
This is done using the "command-line" utility (axonserver-cli.jar) available as part of the Axon Server distributable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ ./axonserver-cli.jar init-cluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once successfully executed, this will do the following,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Designate this node as the <em>admin node</em> of the Axon Server cluster</p>
</li>
<li>
<p>Creates the "admin" context which stores the configuration details of the Axon Server cluster</p>
</li>
<li>
<p>Creates a "default" context which is available for event storage/message routing for client applications</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The REST API operation at "/v1/public/me" should now show the following response <em>(assuming axonserver-0 as the hostname of the admin node)</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{
  "authentication": false,
  "clustered": true,
  "ssl": false,
  "adminNode": true,
  "developmentMode": false,
  "storageContextNames": [ "default" ],
  "contextNames": [ "_admin", "default" ],
  "name": "axonserver-1",
  "hostName": "axonserver-1",
  "internalHostName": "axonserver-1",
  "grpcInternalPort": 8224,
  "grpcPort": 8124,
  "httpPort": 8024
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>All admin nodes are member of the “<em>_admin</em>” context, and it is used to distribute cluster structure data in the same way as it distributes Events, Commands, and Queries.</p>
</div>
<div class="paragraph">
<p>The UI console displays the newly initialized admin node as shown below (assuming axonserver-1 as the name of the node)</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../_images/admin_node_initialization.png" alt="Admin Node initialized"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_additional_nodes"><a class="anchor" href="#_additional_nodes"></a>Additional nodes</h4>
<div class="paragraph">
<p>The other nodes can be added to the cluster using the “register-node” command, pointing it at an admin node already in the cluster.
On every other node, the following command needs to be executed by pointing to the admin node created above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ ./axonserver-cli.jar register-node -h axonserver-1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming that the additional node being added has its hostname as "axonserver-2", if the REST API operation at "/v1/public/me" is run against the second node, the following response is shown.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{
  "authentication": false,
  "clustered": true,
  "ssl": false,
  "adminNode": true,
  "developmentMode": false,
  "storageContextNames": [ "default" ],
  "contextNames": [ "_admin", "default" ],
  "name": "axonserver-2",
  "hostName": "axonserver-2",
  "internalHostName": "axonserver-2",
  "grpcInternalPort": 8224,
  "grpcPort": 8124,
  "httpPort": 8024
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get the complete details of the cluster configuration, the REST API operation at "/v1/public/context" if run against the admin node.</p>
</div>
<div class="paragraph">
<p>A sample response is shown below (assuming that the hostnames of the admin node and the additional node are "axonserver-1" and "axonserver-2")</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">[
  {
    "metaData": {},
    "nodes": ["axonserver-1", "axonserver-2"],
    "leader": "axonserver-1",
    "pendingSince": 0,
    "changePending": false,
    "roles": [
      { "role": "PRIMARY", "node": "axonserver-1" },
      { "role": "PRIMARY", "node": "axonserver-2" }
    ],
    "context": "_admin"
  },
  {
    "metaData": {},
    "nodes": ["axonserver-1", "axonserver-2"],
    "leader": "axonserver-1",
    "pendingSince": 0,
    "changePending": false,
    "roles": [
      { "role": "PRIMARY", "node": "axonserver-1" },
      { "role": "PRIMARY", "node": "axonserver-2" }
    ],
    "context": "default"
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The cluster configuration information depicts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The leader of the cluster</p>
</li>
<li>
<p>The contexts available within the cluster (in this case "_admin" and "default")</p>
</li>
<li>
<p>The nodes within the a cluster</p>
</li>
<li>
<p>The roles that the nodes play within a specific context (in this case PRIMARY)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The UI console displays the newly initialized admin node as shown below (assuming axonserver-1 as the name of the node)</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../_images/admin_node_additional_node1.png" alt="Additional node registered."></span></p>
</div>
<div class="paragraph">
<p>A production grade setup would require more advanced configuration.
For example an Axon Server node can be assigned to play different roles within a cluster - it may serve as an admin node, providing services to configure the cluster and keep it running, next to the “regular” event store and messaging functions.
It can also be configured to only service specific <em>*contexts*</em> in various roles.
Contexts are comparable to logical databases in a RDBMS.
They allow for strong separation without requiring deploying and managing full instances.</p>
</div>
<div class="paragraph">
<p>This is detailed in the <a href="../../administration/clustering.html" class="xref page">Clustering</a> and the <a href="../../administration/multi-context.html" class="xref page">Contexts</a> sections.</p>
</div>
<div class="paragraph">
<p>This completes a quick basic setup of an Axon Server cluster using the default configurations.</p>
</div>
<div class="paragraph">
<p>To summarize,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>_*The Axon Server is not available for event storage or message routing unless a cluster is setup.</p>
</li>
<li>
<p>By default, access control and SSL is not enabled.</p>
</li>
<li>
<p>The basic setup involves the creation of an Axon Server cluster - This involves configuring an Admin Node and registering additional nodes to the cluster.</p>
</li>
<li>
<p>The default ports are 8024/8124 and 8224. These values can be changed via <a href="../../administration/admin-configuration/README.html" class="xref page">configuration</a>.</p>
</li>
<li>
<p>The name and hostname default to the hostname of the system Axon Server is running on.
These values can be changed via <a href="../../administration/admin-configuration/README.html" class="xref page">configuration</a> ( “axoniq.axonserver.name” / “axoniq.axonserver.hostname”).</p>
</li>
<li>
<p>The "internalHostName" and "grpcInternalPort" are used for internal communication between the nodes of an Axon Server cluster.
These values can be changed via <a href="../../administration/admin-configuration/README.html" class="xref page">configuration</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="auto-clustering"><a class="anchor" href="#auto-clustering"></a>Auto-clustering</h4>
<div class="paragraph">
<p>A new feature available since 4.3 is that you can use configuration setting “axoniq.axonserver.autocluster.first” (in the axonserver.properties file) to provide it with the hostname of a known Admin node.
If that name happens to be the hostname of the node starting up, it will automatically perform the “init-cluster” command on itself if needed.
If the name is not the current hostname, it will schedule a task to perform the “register-node” command, which will keep trying until successful, which is when the first node is itself available and initialized.
In addition if needed, you can use the “axoniq.axonserver.autocluster.contexts” setting to provide a comma-separated list of contexts to create or join.
(The “_admin” context needs to be explicitly added if you want all nodes to become admin nodes.)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_storage"><a class="anchor" href="#_storage"></a>Storage</h3>
<div class="paragraph">
<p>Axon Server creates a folder for each context under a directory named “data”.
This is where the events and snapshots for the contexts will be stored.
The location can be customized using the “axoniq.axonserver.event.storage” and “axoniq.axonserver.snapshot.storage” settings.
Do note that the location customization is applicable for all contexts, you cannot customize it for a specific context.</p>
</div>
<div class="paragraph">
<p>Axon Server will also create a folder for each context under a directory named "log".
This is where the replication log for each context is stored.
The replication log stores context data as it comes in and is distributed.
The storage location for the replication log can be adjusted using the “axoniq.axonserver.replication.log-storage-folder” property.
Again, this is applicable for all contexts.</p>
</div>
<div class="paragraph">
<p>There is also a small database in the “data” directory, which is referred to as the “ControlDB”, and is used for administrative data.
This location you can customize by using the “axoniq.axonserver.controldb-path” setting.</p>
</div>
<div class="paragraph">
<p>The <a href="../../administration/admin-configuration/README.html" class="xref page">configuration</a> section details the steps required to setup the storage required for Axon Server including some advanced options.</p>
</div>
</div>
<div class="sect2">
<h3 id="_access_control"><a class="anchor" href="#_access_control"></a>Access Control</h3>
<div class="paragraph">
<p>As Axon Server is an event store and may contain sensitive data it is always a good practice to enable access control in production and production-like environments.</p>
</div>
<div class="paragraph">
<p>The <a href="../../security/access-control.html" class="xref page">Access Control</a> section details the steps required to set up access control in Axon Server.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ssl"><a class="anchor" href="#_ssl"></a>SSL</h3>
<div class="paragraph">
<p>Axon Server supports TLS/SSL (Transport Layer Security/Secure Sockets Layer) to encrypt all of Axon Server SE&#8217;s network traffic - From Axon Framework client applications to Axon Server as well as between the various nodes of an Axon Server EE cluster.</p>
</div>
<div class="paragraph">
<p>The <a href="../../security/ssl.html" class="xref page">SSL</a> section details the steps required to setup SSL in Axon Server.</p>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../README.html">Installation</a></span>
  <span class="next"><a href="../docker-k8s/README.html">Docker / K8s</a></span>
</nav>
    </article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-framework/overview">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-server/overview">Axon Server Standard</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-server-enterprise/overview">Axon Server Enterprise</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axoniq-cloud/overview">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-data-protection/overview">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/"> Client Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/">AxonIQ Developer Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://start.axoniq.io/">AxonIQ Initializr</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
