<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="655px" preserveAspectRatio="none" style="width:816px;height:655px;background:#FFFFFF;" version="1.1" viewBox="0 0 816 655" width="816px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="81.7999" y2="573.8001"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="131.5" x2="131.5" y1="81.7999" y2="573.8001"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="260.5" x2="260.5" y1="81.7999" y2="573.8001"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="350.5" x2="350.5" y1="81.7999" y2="573.8001"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="422.5" x2="422.5" y1="81.7999" y2="573.8001"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="540.5" x2="540.5" y1="81.7999" y2="573.8001"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="658.5" x2="658.5" y1="81.7999" y2="573.8001"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="776" x2="776" y1="81.7999" y2="573.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="78.9999">User</text><ellipse cx="22.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,21.5 L22.5,48.5 M9.5,29.5 L35.5,29.5 M22.5,48.5 L9.5,63.5 M22.5,48.5 L35.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="586.8001">User</text><ellipse cx="22.5" cy="598.1001" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,606.1001 L22.5,633.1001 M9.5,614.1001 L35.5,614.1001 M22.5,633.1001 L9.5,648.1001 M22.5,633.1001 L35.5,648.1001 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><path d="M114.5,55 L148.5,55 C153.5,55 153.5,68.4 153.5,68.4 C153.5,68.4 153.5,81.7999 148.5,81.7999 L114.5,81.7999 C109.5,81.7999 109.5,68.4 109.5,68.4 C109.5,68.4 109.5,55 114.5,55 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M148.5,55 C143.5,55 143.5,68.4 143.5,68.4 C143.5,81.7999 148.5,81.7999 148.5,81.7999 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="114.5" y="73.9999">Bus</text><path d="M114.5,572.8001 L148.5,572.8001 C153.5,572.8001 153.5,586.2001 153.5,586.2001 C153.5,586.2001 153.5,599.6001 148.5,599.6001 L114.5,599.6001 C109.5,599.6001 109.5,586.2001 109.5,586.2001 C109.5,586.2001 109.5,572.8001 114.5,572.8001 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M148.5,572.8001 C143.5,572.8001 143.5,586.2001 143.5,586.2001 C143.5,599.6001 148.5,599.6001 148.5,599.6001 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="114.5" y="591.8001">Bus</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="220.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="227.5" y="70.9999">Interceptor</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="220.5" y="572.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="227.5" y="593.8001">Interceptor</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="310.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="317.5" y="70.9999">Interceptor</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="310.5" y="572.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="317.5" y="593.8001">Interceptor</text><path d="M405.5,55 L439.5,55 C444.5,55 444.5,68.4 444.5,68.4 C444.5,68.4 444.5,81.7999 439.5,81.7999 L405.5,81.7999 C400.5,81.7999 400.5,68.4 400.5,68.4 C400.5,68.4 400.5,55 405.5,55 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M439.5,55 C434.5,55 434.5,68.4 434.5,68.4 C434.5,81.7999 439.5,81.7999 439.5,81.7999 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="405.5" y="73.9999">Bus</text><path d="M405.5,572.8001 L439.5,572.8001 C444.5,572.8001 444.5,586.2001 444.5,586.2001 C444.5,586.2001 444.5,599.6001 439.5,599.6001 L405.5,599.6001 C400.5,599.6001 400.5,586.2001 400.5,586.2001 C400.5,586.2001 400.5,572.8001 405.5,572.8001 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M439.5,572.8001 C434.5,572.8001 434.5,586.2001 434.5,586.2001 C434.5,599.6001 439.5,599.6001 439.5,599.6001 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="405.5" y="591.8001">Bus</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="500.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="507.5" y="70.9999">Interceptor</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="500.5" y="572.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="507.5" y="593.8001">Interceptor</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="618.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="625.5" y="70.9999">Interceptor</text><rect fill="#E2E2F0" height="30.7999" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="618.5" y="572.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="625.5" y="593.8001">Interceptor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="749" y="78.9999">Handler</text><ellipse cx="776.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="764.5" x2="788.5" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="749" y="586.8001">Handler</text><ellipse cx="776.5" cy="605.6001" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="764.5" x2="788.5" y1="619.6001" y2="619.6001"/><polygon fill="#181818" points="119.5,109.3999,129.5,113.3999,119.5,117.3999,123.5,113.3999" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22.5" x2="125.5" y1="113.3999" y2="113.3999"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="29.5" y="108.7999">Send message</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="809" x="0" y="142.1999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="809" y1="142.1999" y2="142.1999"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="809" y1="145.1999" y2="145.1999"/><rect fill="#EEEEEE" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="114" x="347.5" y="131.3999"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="96" x="353.5" y="148.4">Dispatch phase</text><polygon fill="#181818" points="248.5,182.6,258.5,186.6,248.5,190.6,252.5,186.6" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="131.5" x2="254.5" y1="186.6" y2="186.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="138.5" y="182">Intercept message</text><polygon fill="#181818" points="142.5,212.2,132.5,216.2,142.5,220.2,138.5,216.2" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="136.5" x2="349.5" y1="216.2" y2="216.2"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="148.5" y="211.6">Modified message</text><polygon fill="#181818" points="338.5,241.8,348.5,245.8,338.5,249.8,342.5,245.8" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="131.5" x2="344.5" y1="245.8" y2="245.8"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="138.5" y="241.2">Intercept message</text><polygon fill="#181818" points="142.5,271.4,132.5,275.4,142.5,279.4,138.5,275.4" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="136.5" x2="259.5" y1="275.4" y2="275.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="148.5" y="270.8">Modified message</text><polygon fill="#181818" points="410.5,301,420.5,305,410.5,309,414.5,305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="131.5" x2="416.5" y1="305" y2="305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="138.5" y="300.4">Dispatch modified message</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="809" x="0" y="333.8"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="809" y1="333.8" y2="333.8"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="809" y1="336.8" y2="336.8"/><rect fill="#EEEEEE" height="23.6" style="stroke:#000000;stroke-width:2.0;" width="117" x="346" y="323"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="352" y="340">Handling phase</text><polygon fill="#181818" points="528.5,374.2001,538.5,378.2001,528.5,382.2001,532.5,378.2001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="422.5" x2="534.5" y1="378.2001" y2="378.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="429.5" y="373.6">Handle message</text><polygon fill="#181818" points="646.5,403.8001,656.5,407.8001,646.5,411.8001,650.5,407.8001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="540.5" x2="652.5" y1="407.8001" y2="407.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="547.5" y="403.2001">Handle message</text><polygon fill="#181818" points="764.5,433.4001,774.5,437.4001,764.5,441.4001,768.5,437.4001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="658.5" x2="770.5" y1="437.4001" y2="437.4001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="665.5" y="432.8001">Handle message</text><polygon fill="#181818" points="669.5,463.0001,659.5,467.0001,669.5,471.0001,665.5,467.0001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="663.5" x2="775.5" y1="467.0001" y2="467.0001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="675.5" y="462.4001">Message result</text><polygon fill="#181818" points="551.5,492.6001,541.5,496.6001,551.5,500.6001,547.5,496.6001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="545.5" x2="657.5" y1="496.6001" y2="496.6001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="557.5" y="492.0001">Message result</text><polygon fill="#181818" points="142.5,522.2001,132.5,526.2001,142.5,530.2001,138.5,526.2001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="136.5" x2="539.5" y1="526.2001" y2="526.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="148.5" y="521.6001">Message result</text><polygon fill="#181818" points="33.5,551.8001,23.5,555.8001,33.5,559.8001,29.5,555.8001" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.5" x2="130.5" y1="555.8001" y2="555.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="39.5" y="551.2001">Message result</text><!--MD5=[36703ff8862bd9542be4ebca746995fa]
@startuml
actor "User" as u
queue Bus as b
participant "Interceptor" as d1
participant "Interceptor" as d2

queue Bus as b2
participant "Interceptor" as h1
participant "Interceptor" as h2

entity Handler as hnd


u -> b: Send message
== Dispatch phase ==
b -> d1: Intercept message
b <- d2: Modified message
b -> d2: Intercept message
b <- d1: Modified message
b -> b2: Dispatch modified message

== Handling phase ==
b2 -> h1: Handle message
h1 -> h2: Handle message
h2 -> hnd: Handle message
h2 <- hnd: Message result
h1 <- h2: Message result
b <- h1: Message result
u <- b: Message result
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>