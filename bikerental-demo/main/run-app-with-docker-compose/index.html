<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Running the Application Locally With Docker Compose</title>
    <link rel="canonical" href="https://docs.axoniq.io/bikerental-demo/main/run-app-with-docker-compose/">
    <link rel="prev" href="../implement-create-bike/">
    <link rel="next" href="../invoking-create-bike-endpoint/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../../_/img/apple-touch-icon.png"><!-- 180Ã—180 -->
    <link rel="manifest" href="../../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../_'</script>


  </head>
  <body class="article">
    <div class="banner">
    <a href="https://console.axoniq.io">Gain deep insights into Axon Framework applications with AxonIQ console. <span class="banner_button">Start now</span></a>
</div>    
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../../_/img/logo-dark4x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../axon-framework-reference/development/">Axon Framework</a>
                <a class="navbar-item" href="../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../axon-server-reference/v2024.2/">Axon Server</a>
                <a class="navbar-item" href="../../../synapse-reference/v0.11/">Axon Synapse</a>
                <a class="navbar-item" href="../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
        <a class="navbar-item navbar-button" href="https://console.axoniq.io" target="_blank">AxonIQ Console</a>
      </div>
    </div>
  </nav>
</header>
    <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../">Building An Axon Framework Application From Scratch </a></li>
    <li><a href="./">Running Your Application Locally With Docker Compose</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonIQ/bike-rental-quick-start/edit/main/docs/tutorial/modules/ROOT/pages/run-app-with-docker-compose.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Running%20the%20Application%20Locally%20With%20Docker%20Compose" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Running%20the%20Application%20Locally%20With%20Docker%20Compose%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BRunning%20the%20Application%20Locally%20With%20Docker%20Compose%5D(https%3A%2F%2Fdocs.axoniq.io%2Fbikerental-demo%2Fmain%2Frun-app-with-docker-compose%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


</div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="bikerental-demo" data-version="main">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../">Building An Axon Framework Application From Scratch</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../create-axon-framework-project/">Create New Project</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../bootstraping-axonframework/">Bootstrap AxonFramework</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../implement-create-bike/">Create New Bike Feature</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="./">Running Your Application Locally With Docker Compose</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../invoking-create-bike-endpoint/">Invoking the Register Bike Endpoint</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../unit-testing-commands/">Add Unit Tests For Command Handlers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../create-bike-status-projection/">Creating the Query Model</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Running the Application Locally With Docker Compose</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this step, we will see how to run your application in your local environment with everything you need.</p>
</div>
<div class="paragraph">
<p>If this were only a basic Spring Boot application we would simply run it from our IDE, but our application relies on external messaging infrastructure to route, store and deliver messages (commands, events and queries). In our case, we will use Axon Server which acts both as a message broker to route the messages and as an event store optimized for storing and retrieving events in an Event Sourcing-based system.</p>
</div>
<div class="paragraph">
<p>To avoid having to install and start the Axon Server manually, we will use Axon Server Docker images and Spring Boot&#8217;s support for running Docker containers. In this section you will learn how to configure Spring Boot to run everything you need with a single click.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requisites"><a class="anchor" href="#_requisites"></a>Requisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will use Docker Compose and Docker images to start the Axon Server with just one click (or shortcut key combination) from your IDE, so make sure you have <a href="https://docs.docker.com/engine/" class="external" target="_blank" rel="noopener">Docker Engine</a> <a href="https://docs.docker.com/engine/install/" class="external" target="_blank" rel="noopener">installed</a> on your system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_docker_compose"><a class="anchor" href="#_configuring_docker_compose"></a>Configuring Docker Compose</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_docker_compose_descriptor"><a class="anchor" href="#_docker_compose_descriptor"></a>Docker Compose descriptor</h3>
<div class="paragraph">
<p><a href="https://docs.docker.com/compose/" class="external" target="_blank" rel="noopener">Docker Compose</a> is a tool that allows you to define all the Docker containers, networks, volumes and any other characteristics that we need as the infrastructure to run our application.</p>
</div>
<div class="paragraph">
<p>Even though we are only going to run one Docker image (Axon Server), Docker Compose is convenient because allows us to start everything with one command.</p>
</div>
<div class="paragraph">
<p>We will start by creating the Docker Compose configuration file. Create a <code>compose.yaml</code> file in the <code>root</code> project with the following contents:</p>
</div>
<div class="listingblock">
<div class="title">compose.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">services:
  axonserver: <i class="conum" data-value="1"></i><b>(1)</b>
    image: 'axoniq/axonserver:latest'  <i class="conum" data-value="2"></i><b>(2)</b>
    environment: <i class="conum" data-value="3"></i><b>(3)</b>
      - 'AXONIQ_AXONSERVER_STANDALONE=TRUE'
    ports: <i class="conum" data-value="4"></i><b>(4)</b>
      - '8024:8024'  <i class="conum" data-value="5"></i><b>(5)</b>
      - '8124:8124'  <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We define the name of the service for axonserver. This will be the name used for the service when started by Docker Desktop.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>axoniq/axonserver:latest</code> image refers to the latest Axon Server Docker image that has been published in <a href="https://hub.docker.com/" class="external" target="_blank" rel="noopener">Docker Hub</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We set the <code>AXONIQ_AXONSERVER_STANDALONE</code> environment property to <code>TRUE</code> so that Axon Server starts without the need to do the initial configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We configure the ports that will be exported from the running docker container:</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>8024</code> is the default port to access the Axon Server console from your browser.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>8124</code> is Axon Server&#8217;s gRPC port used by the applications.</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
YAML files are sensitive to tabs and spaces. Make sure you use the correct indentation using tabs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once we have this file we should be able to run the axon server image from the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">bike-rental-quick-start % docker-compose  up
[+] Running 1/0
 âœ” Container bike-rental-quick-start-axonserver-1  Created                                                                                                                             0.0s
Attaching to axonserver-1
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since we don&#8217;t want to start the server manually, we will configure Spring Boot&#8217;s support for Docker Compose so that the Docker containers are started automatically when running the application from our IDE.</p>
</div>
<div class="paragraph">
<p>Stop the container by typing <code>^C</code> on the console and move to the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_spring_boot_support_to_run_docker_compose"><a class="anchor" href="#_configuring_spring_boot_support_to_run_docker_compose"></a>Configuring Spring Boot support to run Docker Compose</h3>
<div class="paragraph">
<p>Since v3.1, Spring Boot supports starting Docker Compose services before running an application.</p>
</div>
<div class="paragraph">
<p>To enable that feature, we will need to add the following dependency to the maven descriptor <code>pom.xml</code> file in our <code>root</code> project:</p>
</div>
<div class="listingblock">
<div class="title">/pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;
		&lt;scope&gt;runtime&lt;/scope&gt;
		&lt;optional&gt;true&lt;/optional&gt;
	&lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once we have added this dependency, we can run our application right from our IDE. Spring Boot will detect the <code>compose.yaml</code> file and will start the Docker containers described in that file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_the_application"><a class="anchor" href="#_running_the_application"></a>Running the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run your application from your IDE. You should see in the logs that Spring Boot downloads the Axon Server Docker image and starts running Axon Server automatically for you before starting your application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.1)

 INFO --- [Rental Monolith] i.a.d.b.rental.RentalApplication         : Starting RentalApplication using Java 21 with PID 69132 (/Users/dgomezg/projects/axon/code-samples/bike-rental-quick-start/rental/target/classes started by dgomezg in /Users/dgomezg/projects/axon/code-samples/bike-rental-quick-start)
 INFO --- [Rental Monolith] i.a.d.b.rental.RentalApplication         : No active profile set, falling back to 1 default profile: "default"
 INFO --- [Rental Monolith] .s.b.d.c.l.DockerComposeLifecycleManager : Using Docker Compose file '/Users/dgomezg/projects/axon/code-samples/bike-rental-quick-start/compose.yaml'
 INFO --- [Rental Monolith] o.s.boot.docker.compose.core.DockerCli   :  Container bike-rental-quick-start-axonserver-1  Created
 INFO --- [Rental Monolith] o.s.boot.docker.compose.core.DockerCli   :  Container bike-rental-quick-start-axonserver-1  Starting
 INFO --- [Rental Monolith] o.s.boot.docker.compose.core.DockerCli   :  Container bike-rental-quick-start-axonserver-1  Started
 INFO --- [Rental Monolith] o.s.boot.docker.compose.core.DockerCli   :  Container bike-rental-quick-start-axonserver-1  Waiting
 INFO --- [Rental Monolith] o.s.boot.docker.compose.core.DockerCli   :  Container bike-rental-quick-start-axonserver-1  Healthy
 INFO --- [Rental Monolith] verDockerComposeConnectionDetailsFactory : Detected Axon Server container. To access the dashboard, visit http://127.0.0.1:8024</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the application starts, you can open your browser and go to <code><a href="http://localhost:8024" class="bare external" target="_blank" rel="noopener">http://localhost:8024</a></code> to access the Axon Server dashboard.</p>
</div>
<div class="paragraph">
<p>If you click on the "Overview" button from the right panel, you will see the Axon Server instance and your <code>Rental Monolith</code> Application connected to it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/AxonServer-Dashboard.png" alt="Screenshot of the Axon Server dashboard" width="showing the Rental Application connected to the Axon Server instance">
</div>
</div>
<div class="paragraph">
<p>In the next step we will implement a feature that retrieves a list of all the bikes in our system. In doing so, we will look at how to implement the <code>Query Model</code> with some projections.</p>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../implement-create-bike/">Create New Bike Feature</a></span>
  <span class="next"><a href="../invoking-create-bike-endpoint/">Invoking the Register Bike Endpoint</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-cloud">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-synapse">Axon Synapse</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://axoniq.bsky.social/">Bluesky</a></li>
          <li><a class="ext" target="_blank" href="https://www.instagram.com/axoniq/">Instagram</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
    </div>
  </body>
</html>
