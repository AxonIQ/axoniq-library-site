<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Running the Register Bike Endpoint</title>
    <link rel="canonical" href="https://library.axoniq.io/bikerental-demo/main/invoking-create-bike-endpoint.html">
    <link rel="prev" href="run-app-with-docker-compose.html">
    <link rel="next" href="unit-testing-commands.html">
    <meta name="generator" content="Antora 3.1.1">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/tabs.css">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../_'</script>


  </head>
  <body class="article">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://library.axoniq.io">Docs</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../home/basics.html">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Guides</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="../../home/guides/axon-framework.html">Axon Framework</a>
              <a class="navbar-item" href="../../home/guides/axon-server.html">Axon Server</a>
              <a class="navbar-item" href="../../home/guides/migration.html">Migration</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Reference</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../axon_framework_ref/index.html">Axon Framework</a>
                <a class="navbar-item" href="../../axon_server_ref/index.html">Axon Server</a>
                <a class="navbar-item" href="../../synapse_ref/latest/index.html">Axon Synapse</a>
                <a class="navbar-item" href="../../axoniq_console_ref/main/index.html">AxonIQ Console</a>
          </div>
        </div>
        <a class="navbar-item" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="bikerental-demo" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Building An Axon Framework Application From Scratch</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="create-axon-framework-project.html">Create New Project</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bootstraping-axonframework.html">Bootstrap AxonFramework</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="implement-create-bike.html">Create New Bike Feature</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="run-app-with-docker-compose.html">Running Your Application Locally With Docker Compose</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="invoking-create-bike-endpoint.html">Invoking the Register Bike Endpoint</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="unit-testing-commands.html">Add Unit Tests For Command Handlers</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Building An Axon Framework Application From Scratch </a></li>
    <li><a href="invoking-create-bike-endpoint.html">Invoking the Register Bike Endpoint</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu">
      <a class="action" href="https://github.com/AxonIQ/bike-rental-quick-start/edit/main/docs/tutorial/modules/ROOT/pages/invoking-create-bike-endpoint.adoc">Edit this Page</a>
    
    <a class="action" href="https://discuss.axoniq.io/search?q&#x3D;https%3A%2F%2Flibrary.axoniq.io%2Fbikerental-demo%2Fmain%2Finvoking-create-bike-endpoint.html%20%23library" target="discuss_search">View Discussions</a>
    <a class="action" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Running%20the%20Register%20Bike%20Endpoint%22%20library%20page%20...&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BRunning%20the%20Register%20Bike%20Endpoint%5D(https%3A%2F%2Flibrary.axoniq.io%2Fbikerental-demo%2Fmain%2Finvoking-create-bike-endpoint.html)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


</div>
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Running the Register Bike Endpoint</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Now that we have our <a href="implement-create-bike.html" class="xref page">first feature implemented</a>, and <a href="run-app-with-docker-compose.html" class="xref page">our application up and running</a>, we can try to invoke the endpoint to register a bike, and check the exchange of commands and events.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_invoking_the_endpoint"><a class="anchor" href="#_invoking_the_endpoint"></a>Invoking the endpoint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To test our feature, we need to send the following HTTP request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>POST http://localhost:8080/bikes?bikeType={type}&amp;location={city}</pre>
</div>
</div>
<div class="paragraph">
<p>You can do this directly from the command line, any other HTTP REST client you are used to, or if you are using IntelliJ IDEA as your IDE, we will show you how to prepare a file to quickly execute the HTTP Endpoints we are going to use in this project.</p>
</div>
<div class="sect2">
<h3 id="_from_the_command_line"><a class="anchor" href="#_from_the_command_line"></a>From the command line</h3>
<div class="paragraph">
<p>You can easily invoke the endpoint from the command line by typing the following <code>curl</code> command in your terminal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&gt; curl -X POST "http://localhost:8080/bikes?bikeType=city&amp;location=Utrecht"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command will print out the response of the endpoint call, which, in our case, will be the UUID assigned to the new bike.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Although we are sending a <code>POST HTTP</code> request, in this case we don&#8217;t need to specify any content in the body request, as all the information is specified in the URL parameters. This way may not be the most recommended design for <code>POST</code> requests in <code>REST</code> services as the required information usually f from the request body and it is specified using either <code>-d</code>, <code>-F</code> or <code>--json</code> options in your <code>curl</code> command). Anyway, for simplicity&#8217;s sake, we have designed our first <code>POST</code> endpoint to have all the required information in the URL parameters.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_intellij_idea"><a class="anchor" href="#_using_intellij_idea"></a>Using IntelliJ IDEA</h3>
<div class="paragraph">
<p>If you are using IntelliJ IDEA as your IDE, you can benefit from its <a href="https://www.jetbrains.com/help/idea/http-client-in-product-code-editor.html" class="external" target="_blank" rel="noopener">HTTP Client plugin</a> to define and invoke all the endpoints of your application.</p>
</div>
<div class="paragraph">
<p>You only need to create a file with <code>.http</code> or <code>.rest</code> extension. Then, you can add the URL of the different endpoints you want to invoke in your system. The various requests should be separated by a line with three hashtag marks (<code>###</code>).</p>
</div>
<div class="paragraph">
<p>Start by creating a text file called <code>requests.http</code> in your root project, and add the following content to it:</p>
</div>
<div class="listingblock">
<div class="title">/requests.http</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-httprequest hljs" data-lang="httprequest">### Register a new bike
POST http://localhost:8080/bikes?bikeType=city&amp;location=Utrecht

###</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the file, and you will see that IntelliJ IDEA now decorates the line containing the <code>POST</code> URL with a green "play" button. If you click on it while the 'rental' application is running, you will see how the request is being sent and executed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">POST http://localhost:8080/bikes?bikeType=city&amp;location=Utrecht

HTTP/1.1 200 OK
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
Content-Type: text/plain;charset=UTF-8
Content-Length: 36

9c27e890-8498-4329-afd6-58302b796fab

Response code: 200 (OK); Time: 107ms (107 ms); Content length: 36 bytes (36 B)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_following_the_execution_of_the_register_bike_request_in_axon_server"><a class="anchor" href="#_following_the_execution_of_the_register_bike_request_in_axon_server"></a>Following the execution of the register bike request in Axon Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After invoking the endpoint, we can check how our application processed the request and what messages were sent.</p>
</div>
<div class="paragraph">
<p>To do this, we will use the Axon Server dashboard. First, open your browser and go to the following URL</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://localhost:8024/</pre>
</div>
</div>
<div class="paragraph">
<p>You will see the Axon Server dashboard, with the default instance and the <code>Rental Monolith</code> application connected.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/AxonServer-Dashboard.png" alt="Screenshot of the Axon Server dashboard" width="showing the Rental Application connected to the Axon Server instance">
</div>
</div>
<div class="sect2">
<h3 id="_reviewing_the_commands"><a class="anchor" href="#_reviewing_the_commands"></a>Reviewing the commands</h3>
<div class="paragraph">
<p>Click on the <code>Commands</code> button in the left panel. You will see all the command handlers registered by the application, which in this case is just one: our <code>RegisterBikeCommand</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/AxonServer-Commands.png" alt="Screenshot of the Axon Server Commands panel" width="showing a table with all registered command handlers and the number of commands processed by the Rental Monolith application">
</div>
</div>
<div class="paragraph">
<p>The table also shows that one <code>RegisterBikeCommand</code> was received and processed in the system by the <code>Rental Monolith</code> application, which corresponds to the command created by the <code>RentalController</code> and sent through the <code>CommandGateway</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If we had different applications connected to Axon Server, there would be a separate column for each one of them, and the column would show how many commands were received and processed by each application.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_reviewing_the_events"><a class="anchor" href="#_reviewing_the_events"></a>Reviewing the events</h3>
<div class="paragraph">
<p>When we implemented the command handler, we validated the command and sent a <code>BikeRegisteredEvent</code> to notify any other component in the system of the change.</p>
</div>
<div class="paragraph">
<p>To see if this event was sent, click on the <code>Search</code> button on the left menu panel of the Axon Server Dashboard. This action will bring up a page allowing you to search for all events sent and stored in Axon Server.</p>
</div>
<div class="paragraph">
<p>Click on the Search button without specifying anything in the query field (leave it empty). You will see the only event that was sent as a result of running the command handler:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/AxonServer-BikeRegisteredEvent.png" alt="A screenshot of the Events Search page in Axon Server" width="showing the BikeRegisteredEvent">
</div>
</div>
<div class="paragraph">
<p>Double-clicking on the event will bring up a popup panel showing all the event details.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/AxonServer-BikeRegisteredEvent-details.png" alt="A screenshot of the Events Search page in Axon Server" width="showing the details of the BikeRegisteredEvent">
</div>
</div>
<div class="paragraph">
<p>This means that our system received the request to register a new bike and handled it correctly by creating and sending the appropriate command, and as a result of handling the command, created, sent and stored the <code>BikeRegisteredEvent</code>.</p>
</div>
<div class="paragraph">
<p>This last <code>BikeRegisteredEvent</code> will be reused for any component (such as any projection in the query model) that registers to receive this type of event. The command model will also use the' BikeRegisteredEvent' whenever the <code>Bike</code> entity needs to be rebuilt (or refreshed).</p>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h3>
<div class="paragraph">
<p>Thanks to the information provided by Axon Server, it&#8217;s easy to check the commands, events (and queries) that have been sent and their contents. This is useful for checking the messages that our system exchanges to communicate the different modules.</p>
</div>
<div class="paragraph">
<p>However, we may also want to have some automated tests in the form of unit tests so that we don&#8217;t have to do these manual checks every time.</p>
</div>
<div class="paragraph">
<p>In the next section, we will learn how to <a href="unit-testing-commands.html" class="xref page">write a test case with Axon to ensure the command handler</a> processes the command correctly.</p>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="run-app-with-docker-compose.html">Running Your Application Locally With Docker Compose</a></span>
  <span class="next"><a href="unit-testing-commands.html">Add Unit Tests For Command Handlers</a></span>
</nav>
    </article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-framework/overview">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-server/overview">Axon Server Standard</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-server-enterprise/overview">Axon Server Enterprise</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axoniq-cloud/overview">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-data-protection/overview">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/"> Client Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/">AxonIQ Developer Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://start.axoniq.io/">AxonIQ Initializr</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/page-actions.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
