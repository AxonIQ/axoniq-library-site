<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Upgrading to Axon Server 2024.0.0</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-server-upgrade/upgrading_as_2024/">
    <meta name="description" content="The guides to upgrade to Axon Server 2024.0.0">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../_/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" href="../../_/img/favicon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../_/static/manifest.webmanifest">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../_'</script>


<link rel="icon" href="../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
    <div class="header_container">
      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io">
        <img src="../../_/img/docs-logo.png" class="header_logo"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-center">
        <a class="navbar-item" href="../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../axon-framework-reference/4.11/">Axon Framework</a>
                <a class="navbar-item" href="../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../axon-server-reference/v2025.1/">Axon Server</a>
                <a class="navbar-item" href="../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
            </div>
          </div>
        <a class="navbar-item navbar-button" href="https://platform.axoniq.io" target="_blank">Axoniq Platform</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="./">Axon Server Upgrade Guides </a></li>
    <li><a href="./">Upgrading to Axon Server 2024.0.0</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonIQ/axoniq-library-site/edit/main/content/axon-server-upgrade-guides/modules/ROOT/pages/upgrading_as_2024.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Upgrading%20to%20Axon%20Server%202024.0.0" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Upgrading%20to%20Axon%20Server%202024.0.0%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BUpgrading%20to%20Axon%20Server%202024.0.0%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-server-upgrade%2Fupgrading_as_2024%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-server-upgrade" data-version="master">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="./">Axon Server Upgrade Guides</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="./">Upgrading to Axon Server 2024.0.0</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Page content" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Upgrading to Axon Server 2024.0.0</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Axon Server 2024.0.0 uses an updated version of the H2 database to store the Control DB. This is required to solve some issues in the H2 version used in previous Axon Server versions.</p>
</div>
<div class="paragraph">
<p>When you download Axon Server 2024.0, the package contains a new jar file <code>controldb-migration.jar</code>.</p>
</div>
<div class="paragraph">
<p>For Axon Server to upgrade the Control DB, you need to place this jar file in the working directory of Axon Server (usually the same directory as the axonserver.jar file). When you start Axon Server, it invokes the <code>controldb-migration.jar</code> to migrate the Control DB. After the migration, a new DB file is in the same directory as the old Control DB. This new DB is called <code>axonserver-configdb</code>, the filename is <code>axonserver-configdb.mv.db</code>. The docker image <code>docker.axoniq.io/axoniq/axonserver</code> already contains the <code>controldb-migration.jar</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datasource_override"><a class="anchor" href="#_datasource_override"></a>Datasource override</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have configured the property <code>spring.datasource.url</code> in axonserver.properties yourself, you must update the database name before starting Axon Server. Change the name from axonserver-controldb to axonserver-configdb.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p><code>spring.datasource.url=jdbc:h2:./data/axonserver-controldb;DEFRAG_ALWAYS=true</code></p>
</div>
<div class="paragraph">
<p>Should now look like this:</p>
</div>
<div class="paragraph">
<p><code>spring.datasource.url=jdbc:h2:./data/axonserver-configdb;DEFRAG_ALWAYS=true</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_database_location"><a class="anchor" href="#_configuring_the_database_location"></a>Configuring the database location</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The preferred property to define the location of the configuration database is changed to <code>axoniq.axonserver.configdb-path</code>. The property <code>axoniq.axonserver.controldb-path</code> is deprecated, but still works for this version.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_of_extensions"><a class="anchor" href="#_migration_of_extensions"></a>Migration of extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you use the OAuth or LDAP extension for Axon Server, replace the jar files in the exts directory with those included in the new extension.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrade_instructions"><a class="anchor" href="#_upgrade_instructions"></a>Upgrade instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The 2024.0.0 release is still compatible with previous releases, so you may do a rolling upgrade.
The upgrade should be reasonably straightforward:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>stop the node</p>
</li>
<li>
<p>replace axon server jar</p>
</li>
<li>
<p>do the steps from above for the Control DB migration and extensions</p>
</li>
<li>
<p>start the node</p>
</li>
<li>
<p>repeat the procedure for every node in the cluster</p>
</li>
</ul>
</div>
</div>
</div>
            </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="secondary-footer">
    <p>Copyright © 2025 AxonIQ BV. All Rights Reserved</p>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/page-actions.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
    </div>
  </body>
</html>
