<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration</title>
    <link rel="canonical" href="https://docs.axoniq.io/multitenancy-extension-reference/4.11/configuration/">
    <link rel="prev" href="../">
    <link rel="next" href="../multi-tenant-components/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../../_/img/apple-touch-icon.png"><!-- 180Ã—180 -->
    <link rel="manifest" href="../../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../_'</script>


  </head>
  <body class="article">
    <div class="banner">
    <a href="https://console.axoniq.io">Manage and monitor your Axon Framework applications and Axon Server environments. <span class="banner_button" target="_blank">Try AxonIQ Console</span></a>
</div>    
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../../_/img/logo-dark4x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../axon-framework-reference/4.11/">Axon Framework</a>
                <a class="navbar-item" href="../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../axon-server-reference/v2024.2/">Axon Server</a>
                <a class="navbar-item" href="../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
        <a class="navbar-item navbar-button" href="https://axoniq.io/contact" target="_blank">Get in touch</a>
      </div>
    </div>
  </nav>
</header>
    <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../">Multitenancy Extension Reference </a></li>
    <li><a href="./">Configuration</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonFramework/extension-multitenancy/edit/axon-multitenancy-4.10.x/docs/reference/modules/ROOT/pages/configuration.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Configuration" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Configuration%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BConfiguration%5D(https%3A%2F%2Fdocs.axoniq.io%2Fmultitenancy-extension-reference%2F4.10%2Fconfiguration%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">4.10</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../development/configuration/">development</a>
    <a class="version item" href="../../4.11/configuration/">4.11</a>
    <a class="version item is-current" href="./">4.10</a>
  </div>
</div>
</div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="multitenancy-extension-reference" data-version="4.10">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../">Multitenancy Extension Reference</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="./">Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../multi-tenant-components/">Supported Multi-Tenant Components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../disable/">Disable Extension</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../release-notes/">Release notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Configuration</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Minimal configuration is needed to get extension up and running.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_static_tenants_configuration"><a class="anchor" href="#_static_tenants_configuration"></a>Static tenants configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you know list of contexts that you want your application to connect in advanced configure them coma separated in <code>application.properties</code> via following properties: <code>axon.axonserver.contexts=tenant-context-1,tenant-context-2,tenant-context-3</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamic_tenants_configuration"><a class="anchor" href="#_dynamic_tenants_configuration"></a>Dynamic tenants configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you don&#8217;t know tenants in advance and you plan to create them in runtime, you can define a predicate which will tell application to which contexts to connect to in runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public TenantConnectPredicate tenantFilterPredicate() {
    return context -&gt; context.tenantId().startsWith("tenant-");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in this case you need to remove axon.axonserver.contexts property.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_route_message_to_specific_tenant"><a class="anchor" href="#_route_message_to_specific_tenant"></a>Route message to specific tenant</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, to route message to specific tenant you need to tag initial message that enters your system with metadata . This is done with meta-data helper, and you need to add tenant name to metadata with key <code>TenantConfiguration.TENANT_CORRELATION_KEY</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">message.andMetaData(Collections.singletonMap(TENANT_CORRELATION_KEY, "tenant-context-1")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Metadata needs to be added only to initial message that enters your system. Any message that is produced by consequence of initial message will have this metadata copied automatically using to <code>CorrelationProvider</code>.</p>
</div>
<div class="sect2">
<h3 id="_custom_resolver"><a class="anchor" href="#_custom_resolver"></a>Custom resolver</h3>
<div class="paragraph">
<p>If you wish to disable default meta-data based routing define following property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">axon.multi-tenancy.use-metadata-helper=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>And define custom tenant resolver bean. For example following imaginary bean can use message payload to route message to specific tenant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public TargetTenantResolver&lt;Message&lt;?&gt;&gt; customTargetTenantResolver() {
    return (message, tenants) -&gt; <i class="conum" data-value="1"></i><b>(1)</b>
            TenantDescriptor.tenantWithId(
                    message.getPayload().getField("tenantName")
            );
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>First lambda parameter message represents message to be routed, while second parameter tenants represents list of currently registered tenants, if you wish to use is to route only to one of connected tenants.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multi_tenant_projections"><a class="anchor" href="#_multi_tenant_projections"></a>Multi-tenant projections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you wish to use distinct database to store projections and token store for each tenant, configure following bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public Function&lt;TenantDescriptor, DataSourceProperties&gt; tenantDataSourceResolver() {
    return tenant -&gt; {
        DataSourceProperties properties = new DataSourceProperties();
        properties.setUrl("jdbc:postgresql://localhost:5432/"+tenant.tenantId());
        properties.setDriverClassName("org.postgresql.Driver");
        properties.setUsername("postgres");
        properties.setPassword("postgres");
        return properties;
    };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this works by using JPA multi-tenancy support, that means only SQL Databases are supported out of the box. If you wish to implement multi-tenancy for a different type of databases (for example, NoSQL) make sure that your projection database supports multi-tenancy. While in transaction you may find out which tenant owns transaction by calling: <code>TenantWrappedTransactionManager.getCurrentTenant()</code>.</p>
</div>
<div class="paragraph">
<p>For more hints how to enable multi-tenancy for NoSQL databases check on how JPA SQL version is <a href="https://github.com/AxonFramework/extension-multitenancy/blob/main/multitenancy-spring-boot-autoconfigure/src/main/java/org/axonframework/extensions/multitenancy/autoconfig/MultiTenantDataSourceManager.java" class="external" target="_blank" rel="noopener">implemented</a></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In this case Liquibase or Flyway will not be able to initialise schemas for dynamic data sources. Any datasource that you use needs to have pre-initialized schema.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_query_update_emitter"><a class="anchor" href="#_query_update_emitter"></a>Query update emitter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to correctly resolve right query update emitter inject update emitter in following style:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventHandler
public void on(Event event, QueryUpdateEmitter queryUpdateEmitter) {
  //queryUpdateEmitter will route updates to same tenant as event will be
  ...
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_resetting_projections"><a class="anchor" href="#_resetting_projections"></a>Resetting projections</h3>
<div class="paragraph">
<p>Resetting projections works a bit different because you have instanced of each event processor group for each tenant.</p>
</div>
<div class="paragraph">
<p>Reset specific tenant event processor group:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">TrackingEventProcessor trackingEventProcessor =
        configuration.eventProcessingConfiguration()
                     .eventProcessor("com.demo.query-ep@tenant-context-1",
                                     TrackingEventProcessor.class)
                     .get();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Name of each event processor is: <code>{even processor name}@{tenant name}</code></p>
</div>
<div class="paragraph">
<p>Access all tenant event processors by retrieving <code>MultiTenantEventProcessor</code> only. <code>MultiTenantEventProcessor</code> acts as a proxy Event Processor that references all tenant event processors.</p>
</div>
<div class="sect3">
<h4 id="_dead_letter_queue"><a class="anchor" href="#_dead_letter_queue"></a>Dead-letter queue</h4>
<div class="paragraph">
<p>The configuration of a dead-letter queue is similar to a non-multi-tenant environment. The tenant will be resolved through the Message&#8217;s <code>MetaData</code> and routed to the corresponding DLQ. If you wish to have different enqueuing policies per tenant, you can use the <code>MetaData</code> from the dead letter message to determine to which tenant the message belongs to act accordingly.</p>
</div>
<div class="paragraph">
<p>Do note that processing dead letters from the queue is slightly different, as you need the specific tenant context to process dead-letter from.</p>
</div>
<div class="paragraph">
<p>To select the tenant for which you want to process a dead letter, you need to cast the <code>SequencedDeadLetterProcessor</code> to a <code>MultiTenantDeadLetterProcessor</code>. From the <code>MultiTenantDeadLetterProcessor</code>, you need to use the <code>forTenant</code> method to select the tenant-specific <code>SequencedDeadLetterProcessor</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DlqManagement {

    private MultiTenantDeadLetterProcessor multiTenantDeadLetterProcessor;

    // Axon Framework's org.axonframework.config.Configuration
    public DlqManagement(Configuration configuration) {
        SequencedDeadLetterProcessor deadLetterProcessor = configuration.sequencedDeadLetterProcessor();
        this.multiTenantDeadLetterProcessor = (MultiTenantDeadLetterProcessor) deadLetterProcessor;
    }

    public void processDeadLetterSequenceForTenant(String tenantId,
                                                   Predicate&lt;DeadLetter&lt;? extends EventMessage&lt;?&gt;&gt;&gt; sequenceFilter) {
        multiTenantDeadLetterProcessor.forTenant(tenantId)
                                      .process(sequenceFilter);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a full example of a REST endpoint to retry dead letters for a specific tenant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DlqManagementController {

    // Axon Framework's org.axonframework.config.Configuration
    private Configuration configuration;

    @PostMapping(path = "/retry-dlq")
    public void retryDLQ(@RequestParam String tenant, @RequestParam String processingGroup) {
        configuration.eventProcessingConfiguration()
                     .sequencedDeadLetterProcessor(processingGroup)
                     .map(p -&gt; (MultiTenantDeadLetterProcessor) p)
                     .map(mp -&gt; mp.forTenant(TenantDescriptor.tenantWithId(tenant)))
                     .ifPresent(SequencedDeadLetterProcessor::processAny);
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Only JPA Dead letter queue and In-Memory queues are supported.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deadline_manager"><a class="anchor" href="#_deadline_manager"></a>Deadline manager</h3>
<div class="paragraph">
<p>As of now, there is no plan to support deadline manager out of the box. None of deadline manager implementation support multi-tenancy. See Event scheduler section as alternative.</p>
</div>
</div>
<div class="sect2">
<h3 id="_event_scheduler"><a class="anchor" href="#_event_scheduler"></a>Event scheduler</h3>
<div class="paragraph">
<p>You can use the <code>MultiTenantEventScheduler</code> to schedule events for specific tenants. To do so, you can inject the <code>EventScheduler</code> and use it to schedule events:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class EventHandlingComponentSchedulingEvents {

    private EventScheduler eventScheduler;

    @EventHandler
    public void eventHandler(Event event) {
        // Schedules the given event to be published in 10 days.
        ScheduledToken token = eventScheduler.schedule(Instant.now().plusDays(10), event);
        // The token returned by EventScheduler#schedule can be used to, for example, cancel the scheduled task.
        eventScheduler.cancelSchedule(token);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use the <code>EventScheduler</code> from any message handling method, it will automatically pick up tenant from <code>Message#metadata</code>. Hence, there is no need to specify the tenant you want to schedule an event for. If you wish to use the <code>EventScheduler</code> outside of message handlers, you are inclined to wrap the execution into a so-called <code>TenantWrappedTransactionManager</code>. Within this <code>TenantWrappedTransactionManager</code> you can schedule the event:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class EventSchedulingComponent {

    private EventScheduler eventScheduler;

    public void schedule(Event event) {
        ScheduledToken token;
        // Schedules the given event to be published in 10 days.
        new TenantWrappedTransactionManager(
                TenantDescriptor.tenantWithId(tenantName))
                .executeInTransaction(
                        () -&gt; token = eventScheduler.schedule(Instant.now().plusDays(10), event)
                );
        // The token returned by EventScheduler#schedule can be used to, for example, cancel the scheduled task.
        new TenantWrappedTransactionManager(
                TenantDescriptor.tenantWithId(tenantName))
                .executeInTransaction(
                        () -&gt; eventScheduler.cancelSchedule(token)
                );
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_configuration"><a class="anchor" href="#_advanced_configuration"></a>Advanced configuration</h3>
<div class="sect3">
<h4 id="_overriding_default_message_source"><a class="anchor" href="#_overriding_default_message_source"></a>Overriding default message source</h4>
<div class="paragraph">
<p>You can override the default message source for each tenant by defining the following bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public MultiTenantStreamableMessageSourceProvider multiTenantStreamableMessageSourceProvider(AxonServerEventStore customSource) {
    return (defaultTenantSource, processorName, tenantDescriptor, configuration) -&gt; {
        if (tenantDescriptor.tenantId().startsWith("tenant-custom")) {
            return customSource;
        }
        return defaultTenantSource;
    };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This bean should return a <code>StreamableMessageSource</code> that will be used for specific tenants. This lambda will be called for each tenant and each event processor, so be sure to return a default tenant source if you don&#8217;t want to override it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_disable_multi_tenancy_for_specific_event_processor"><a class="anchor" href="#_disable_multi_tenancy_for_specific_event_processor"></a>Disable multi-tenancy for specific event processor</h4>
<div class="paragraph">
<p>In certain cases, you may want to disable multi-tenancy for specific Event Processor which does not have any tenants.
For example, when you have an event processor that is consuming events from an external context.
Per default, each event processor is scaled, and duplicated for each tenant. To disable this behavior for a specific processing, you can define following bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public MultiTenantEventProcessorPredicate multiTenantEventProcessorPredicate() {
    return (processorName) -&gt; !processorName.equals("external-context");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This bean should return <code>true</code> for each processor that you want to be multi-tenant, and <code>false</code> for each processor that you want to be single tenant.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tenant_segment_factories"><a class="anchor" href="#_tenant_segment_factories"></a>Tenant Segment Factories</h3>
<div class="paragraph">
<p>This extension provides several factory interfaces that are used to create tenant-specific segments for various Axon components, such as Command Bus, Query Bus, Event Store, and Event Scheduler. These factories allow you to configure and customize the behavior of these components for each tenant.</p>
</div>
<div class="paragraph">
<p>The following tenant segment factories are available:</p>
</div>
<div class="sect3">
<h4 id="_tenantcommandsegmentfactory"><a class="anchor" href="#_tenantcommandsegmentfactory"></a>TenantCommandSegmentFactory</h4>
<div class="paragraph">
<p>This factory is responsible for creating a <code>CommandBus</code> instance for each tenant. By default, it creates an <code>AxonServerCommandBus</code> that uses a <code>SimpleCommandBus</code> as the local segment and connects to Axon Server. You can override this factory to provide a custom implementation of the <code>CommandBus</code> for specific tenants.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tenantquerysegmentfactory"><a class="anchor" href="#_tenantquerysegmentfactory"></a>TenantQuerySegmentFactory</h4>
<div class="paragraph">
<p>This factory creates a <code>QueryBus</code> instance for each tenant. By default, it creates an <code>AxonServerQueryBus</code> that uses a <code>SimpleQueryBus</code> as lhe local segment and connects to Axon Server. You can override this factory to provide a custom implementation of the <code>QueryBus</code> for specific tenants.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tenanteventsegmentfactory"><a class="anchor" href="#_tenanteventsegmentfactory"></a>TenantEventSegmentFactory</h4>
<div class="paragraph">
<p>This factory is responsible for creating an <code>EventStore</code> instance for each tenant. By default, it creates an <code>AxonServerEventStore</code> that connects to Axon Server. You can override this factory to provide a custom implementation of the <code>EventStore</code> for specific tenants.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tenanteventschedulersegmentfactory"><a class="anchor" href="#_tenanteventschedulersegmentfactory"></a>TenantEventSchedulerSegmentFactory</h4>
<div class="paragraph">
<p>This factory creates an <code>EventScheduler</code> instance for each tenant. By default, it creates an <code>AxonServerEventScheduler</code> that connects to Axon Server. You can override this factory to provide a custom implementation of the <code>EventScheduler</code> for specific tenants.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tenanteventprocessorcontrolsegmentfactory"><a class="anchor" href="#_tenanteventprocessorcontrolsegmentfactory"></a>TenantEventProcessorControlSegmentFactory</h4>
<div class="paragraph">
<p>This factory creates a <code>TenantDescriptor</code> for each event processor, which is used to identify the tenant associated with the event processor. By default, it uses the tenant identifier as the <code>TenantDescriptor</code>. You can override this factory to provide a custom implementation of the <code>TenantDescriptor</code> for specific event processors.</p>
</div>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../">Multitenancy Extension Reference</a></span>
  <span class="next"><a href="../multi-tenant-components/">Supported Multi-Tenant Components</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://axoniq.bsky.social/">Bluesky</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>&nbsp;</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.instagram.com/axoniq/">Instagram</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>

  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
    </div>
  </body>
</html>
