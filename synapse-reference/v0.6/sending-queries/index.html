<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sending Queries</title>
    <link rel="canonical" href="https://docs.axoniq.io/synapse-reference/v0.12/sending-queries/">
    <link rel="prev" href="../sending-commands/">
    <link rel="next" href="../sending-events/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../_/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" href="../../../_/img/favicon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../_/static/manifest.webmanifest">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../_'</script>


<link rel="icon" href="../../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
    <div class="header_container">
      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io">
        <img src="../../../_/img/docs-logo.png" class="header_logo"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-center">
        <a class="navbar-item" href="../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../axon-framework-reference/4.11/">Axon Framework</a>
                <a class="navbar-item" href="../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../axon-server-reference/v2025.1/">Axon Server</a>
                <a class="navbar-item" href="../../v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
            </div>
          </div>
        <a class="navbar-item navbar-button" href="https://platform.axoniq.io" target="_blank">Axoniq Platform</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../">Axon Synapse Reference</a></li>
    <li><a href="../sending-messages/">Sending Messages</a></li>
    <li><a href="./">Sending Queries</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Sending%20Queries" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Sending%20Queries%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BSending%20Queries%5D(https%3A%2F%2Fdocs.axoniq.io%2Fsynapse-reference%2Fv0.6%2Fsending-queries%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v0.6</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../v0.12/sending-queries/">v0.12</a>
    <a class="version item" href="../../v0.11/sending-queries/">v0.11</a>
    <a class="version item" href="../../v0.10/sending-queries/">v0.10</a>
    <a class="version item" href="../../v0.9/sending-queries/">v0.9</a>
    <a class="version item" href="../../v0.8/sending-queries/">v0.8</a>
    <a class="version item" href="../../v0.7/sending-queries/">v0.7</a>
    <a class="version item is-current" href="./">v0.6</a>
  </div>
</div>
</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="synapse-reference" data-version="v0.6">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../">Axon Synapse</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../overview/">High-Level Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../installation/">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../configuration/">Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../access-control/">Access Control</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../sending-messages/">Sending Messages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sending-commands/">Sending Commands</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Sending Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sending-events/">Sending Events</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../receiving-messages/">Receiving Messages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../receiving-commands/">Receiving Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../receiving-queries/">Receiving Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../receiving-events/">Receiving Events</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../aggregates/">Aggregates</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../multi-context/">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../openapi/">Open API Documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../openapi/synapse/">Axon Synapse API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../openapi/client-message/">Client Message API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../openapi/client-raw/">Client Raw API</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Page content" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Sending Queries</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Any application that can not connect directly to Axon Server can still send queries to it through Axon Synapse&#8217;s HTTP APIs. This document explains the two ways to do so.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Axon Synapse only supports request-response queries. It&#8217;s unable to take care of scatter-gather and subscription queries at this
moment.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can only pass <code>metaData</code> using the <code>http-message</code> endpoint. The <code>http-raw</code> endpoint doesn&#8217;t provide a way to do so.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_http_raw_endpoint"><a class="anchor" href="#_the_http_raw_endpoint"></a>The <code>http-raw</code> endpoint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>http-raw</code> endpoint URL path follows the`/v1/context/[contextName]/queries/[queryName]` pattern. The content of the HTTP request is the serialized query. The sender may provide additional information through HTTP headers.</p>
</div>
<div class="paragraph">
<p>There is one required header:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Content-Type</code>: the serialization type for the context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following headers are optional:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AxonIQ-PayloadType</code>: defines the type of the payload <em>(if missing, the command name is the payload type)</em></p>
</li>
<li>
<p><code>AxonIQ-ResponseType</code>: the expected response type (required when the handler uses Axon Framework)</p>
</li>
<li>
<p><code>AxonIQ-ResponseCount</code>: use MULTIPLE to indicate that the query handler can return multiple instances of the response
type</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The code below represents a sample request to the <code>http-raw</code> endpoint sending an <code>io.axoniq.demo.giftcard.api.FetchCardSummariesQuery</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://synapse:8080/v1/contexts/default/queries/io.axoniq.demo.giftcard.api.FetchCardSummariesQuery
Content-Type: application/xml
AxonIQ-ResponseType: io.axoniq.demo.giftcard.api.CardSummary
AxonIQ-ResponseCount: MULTIPLE

&lt;io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;
    &lt;offset&gt;0&lt;/offset&gt;
    &lt;limit&gt;100&lt;/limit&gt;
&lt;/io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When Axon Synapse processes this HTTP request, it sends the query to Axon Server on behalf of the client application. Axon Server then delegates the query to a query handler registered in the <code>default</code> context. When the handler responds with a zero or more <code>io.axoniq.demo.giftcard.api.CardSummary</code> objects, Axon Synapse serializes the payload and sends it back in the response payload of the HTTP request.</p>
</div>
<div class="paragraph">
<p>For more details about the <code>http-raw</code> endpoint, please refer to the <a href="../openapi/synapse/#tag/queries/operation/query" class="xref page">Send Query API docs</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_http_message_endpoint"><a class="anchor" href="#_the_http_message_endpoint"></a>The <code>http-message</code> endpoint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>http-message</code> endpoint URL path follows the`/v1/context/[contextName]/queries` pattern. The content of the HTTP request is a JSON message containing all the information for a single query. Below is the above request in <code>http-message</code> form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://synapse:8080/v1/contexts/default/queries
Content-Type: application/json

{
  "payload": "&lt;io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;&lt;offset&gt;0&lt;/offset&gt;&lt;limit&gt;100&lt;/limit&gt;&lt;/io.axoniq.demo.giftcard.api.FetchCardSummariesQuery&gt;"
  "name": "io.axoniq.demo.giftcard.api.FetchCardSummariesQuery",
  "responseType": "io.axoniq.demo.giftcard.api.CardSummary"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The message may contain additional optional fields like <code>payloadType</code> and <code>metaData</code>. You can use the <code>payloadType</code> field to specify the payload type in cases where the query name doesn&#8217;t equal the payload type for the query message.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The serialization format of the query object must match the serialization the query handler expects. Even though the HTTP payload is JSON, if the query handler expects XML, the payload must be to XML. If the handler expects a JSON serialized payload, the request would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST http://synapse:8080/v1/contexts/default/commands
Content-Type: application/json

{
  "payload": {
   "offset": 0,
   "limit": 100
   },
  "name": "io.axoniq.demo.giftcard.api.FetchCardSummariesQuery",
  "responseType": "io.axoniq.demo.giftcard.api.CardSummary"
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more details about the <code>http-raw</code> endpoint, please refer to the <a href="../openapi/synapse/#tag/queries/operation/queryMessage" class="xref page">Send Query Message API docs</a>.</p>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../sending-commands/">Sending Commands</a></span>
  <span class="next"><a href="../sending-events/">Sending Events</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="secondary-footer">
    <p>Copyright © 2025 AxonIQ BV. All Rights Reserved</p>
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
    </div>
  </body>
</html>
