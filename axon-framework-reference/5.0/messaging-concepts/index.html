<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Messaging Concepts</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-framework-reference/5.0/messaging-concepts/">
    <link rel="prev" href="../migration/understanding-architecture-principles/">
    <link rel="next" href="anatomy-message/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../_/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" href="../../../_/img/favicon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../_/static/manifest.webmanifest">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../_'</script>


<link rel="icon" href="../../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
    <div class="header_container">
      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io">
        <img src="../../../_/img/docs-logo.png" class="header_logo"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-center">
        <a class="navbar-item" href="../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../">Axon Framework</a>
                <a class="navbar-item" href="../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../axon-server-reference/development/">Axon Server</a>
                <a class="navbar-item" href="../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../axoniq-platform-reference/">Axoniq Platform</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
            </div>
          </div>
        <a class="navbar-item navbar-button" href="https://platform.axoniq.io" target="_blank">Axoniq Platform</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../">Axon Framework Reference</a></li>
    <li><a href="./">Messaging Concepts</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonFramework/AxonFramework/edit/axon-5.0.x/docs/reference-guide/modules/messaging-concepts/pages/index.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Messaging%20Concepts" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Messaging%20Concepts%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BMessaging%20Concepts%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-framework-reference%2F5.0%2Fmessaging-concepts%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">5.0</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../development/messaging-concepts/">development</a>
    <a class="version item is-current" href="./">5.0</a>
    <a class="version item" href="../../4.12/messaging-concepts/">4.12</a>
    <a class="version item" href="../../4.11/messaging-concepts/">4.11</a>
    <a class="version item" href="../../4.10/messaging-concepts/">4.10</a>
    <a class="version item is-missing" href="../../0/">older releases</a>
  </div>
</div>
</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-framework-reference" data-version="5.0">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../">Axon Framework</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../migration/">Migration Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/why-upgrade/">Why Upgrade?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/prerequisites/">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/solved-architecture-choices/">Resolved Problems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/understanding-architecture-principles/">Understanding Choices</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="./">Messaging Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="anatomy-message/">Anatomy of a Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-intercepting/">Message Intercepting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="supported-parameters-annotated-handlers/">Supported Parameters for Annotated Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-correlation/">Message Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exception-handling/">Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="processing-context/">Processing Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../commands/">Commands</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/command-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/command-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/configuration/">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-publishing/">Publishing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/event-processors/">Event Processors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/subscribing/">Subscribing Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/streaming/">Streaming Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/dead-letter-queue/">Dead-Letter Queue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/infrastructure/">Infrastructure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-store-internals/">Event Store Internals</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-versioning/">Versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../queries/">Queries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/query-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/query-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/configuration/">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../testing/">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/basic-testing/">Basic Testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/matchers-and-field-filters/">Matchers and Field Filters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/advanced-testing/">Advanced Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../conversion/">Conversion</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tuning/">Tuning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/event-snapshots/">Event Snapshots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/event-processing/">Event Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/command-processing/">Command Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/rdbms-tuning/">Relational Databases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/tracing/">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/metrics/">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/health/">Health Indicators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/processors/">Event Processor Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/message-tracking/">Message Tracking</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../spring-boot-integration/">Spring Boot Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../modules/">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/minor-releases/">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../known-issues-and-workarounds/">Known Issues and Workarounds</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Page content" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Messaging Concepts</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>One of the core concepts in Axon is messaging.
All communication between components is done using message objects.
This gives these components the location transparency needed to be able to scale and distribute these components when necessary.</p>
</div>
<div class="paragraph">
<p>Although all these messages implement the <code>Message</code> interface, there is a clear distinction between the different types of messages and how they are treated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_understanding_messages"><a class="anchor" href="#_understanding_messages"></a>Understanding messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All messages contain a message type, payload, metadata, and unique identifier.</p>
</div>
<div class="paragraph">
<p>The <strong>message type</strong> (<code>MessageType</code>) describes what the message means - for example, "OrderPlaced" or "UserRegistered".
This is decoupled from the Java class used to represent the message.
See <a href="anatomy-message/#message_type" class="xref page">Message type</a> for details.</p>
</div>
<div class="paragraph">
<p>The <strong>payload</strong> contains the information about what happened - the specific data related to that message.
For example, an "OrderPlaced" message type would have a payload containing the order ID, amount, and other order details.</p>
</div>
<div class="paragraph">
<p>The <strong>metadata</strong> allows you to describe the context in which a message is being sent.
You can, for example, store tracing information to allow the origin or cause of messages to be tracked.
You can also store information to describe the security context under which a command is being executed.</p>
</div>
<div class="paragraph">
<p>The <strong>identifier</strong> uniquely identifies that specific message instance.
See <a href="anatomy-message/#message-identifier" class="xref page">Message identifier</a> for details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">All messages are immutable</div>
<div class="paragraph">
<p>All messages are immutable.
Storing additional data in a message means creating a new message based on the previous one, with extra information added to it.
This guarantees that messages are safe to use in a multi-threaded and distributed environment.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="commands"><a class="anchor" href="#commands"></a>Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Commands describe an intent to change the application&#8217;s state.
They are implemented as POJOs that are wrapped in a <code>CommandMessage</code>.Axon Framework refers to your command as the "command payload." Thus, to retrieve it from a <code>CommandMessage</code> you use the <code>CommandMessage#payload</code> method.</p>
</div>
<div class="paragraph">
<p>Commands always have exactly one destination.
While the sender does not care which component handles the command or where that component resides, it may want to know the outcome.
Command messages sent over the command bus allow for a result to be returned.</p>
</div>
<div class="paragraph">
<p>Next to the command payload, you can store information in the metadata of a command message.
The intent of the metadata is to store additional information about a command that is not primarily intended as business information.
Auditing information is a typical example - it allows you to see under which circumstances an command was raised, such as the user account that triggered the processing, or the name of the machine that processed the event.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Do not base business decisions on metadata</div>
<div class="paragraph">
<p>In general, you should not base business decisions on information in the metadata of command messages.
If that is the case, you might have information attached that should really be part of the command itself instead.
Metadata is typically used for reporting, auditing, and tracing.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more on command messages, command handlers, and command-specific configuration options, be sure to read the <a href="../commands/" class="xref page">commands</a> chapter.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events"><a class="anchor" href="#events"></a>Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Events are objects that describe something that has occurred in the application.
A typical source of events is an entity—when something important has occurred within the entity, it raises an event.
In Axon Framework, events can be any object, though you are highly encouraged to make sure all events are serializable.</p>
</div>
<div class="paragraph">
<p>When events are dispatched, Axon wraps them in an <code>EventMessage</code>.
Aside from common <code>Message</code> attributes like the unique identifier, an <code>EventMessage</code> also contains a timestamp.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Include entity identifiers in your events</div>
<div class="paragraph">
<p>When events are raised by entities, always include the entity identifier in the event payload itself.
This makes the identifier readily available to all event handlers and ensures your events contain all the business information needed to process them.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The original event object is stored as the payload of an <code>EventMessage</code>.
Next to the payload, you can store information in the metadata of an event message, similarly as with <a href="#commands">commands</a>.</p>
</div>
<div class="paragraph">
<p>Although not enforced, it is good practice to make domain events immutable, preferably by making all fields final and by initializing the event within the constructor. Utilizing Java&#8217;s <code>record</code> or the Kotlin <code>data class</code> will similarly be helpful to construct immutable messages.
Consider using a builder pattern if event construction is too cumbersome.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Capture intent in your events</div>
<div class="paragraph">
<p>Although domain events technically indicate a state change, you should try to capture the intention of the state in the event, too.
A good practice is to use an abstract implementation of a domain event to capture the fact that certain state has changed, and use a concrete sub-implementation of that abstract class that indicates the intention of the change.
For example, you could have an abstract <code>AddressChangedEvent</code>, and two implementations <code>ContactMovedEvent</code> and <code>AddressCorrectedEvent</code> that capture the intent of the state change.
Some listeners don&#8217;t care about the intent (for example, database updating event listeners) - these will listen to the abstract type.
Other listeners do care about the intent and these will listen to the concrete subtypes (for example, to send an address change confirmation email to the customer).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/state-change-intent.png" alt="Adding intent to events">
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When publishing an event on the event bus, you need to wrap it in an event message.
The <code>GenericEventMessage</code> is an implementation that allows you to wrap your event in a message using its constructor.
Axon will automatically wrap events in <code>EventMessage</code> instances when they are published through the <code>EventGateway</code> and <code>EventAppender</code>.</p>
</div>
<div class="paragraph">
<p>For more on event messages, event handlers, event processing, and event-specific configuration options, be sure to read the <a href="../events/" class="xref page">events</a> chapter.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="queries"><a class="anchor" href="#queries"></a>Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Queries describe a request for information or state. Just as <a href="#commands">commands</a>, queries have one destination. Where they differ is their focus on providing the requesting data back to those that dispatched a query.
In fact, you could say it is "all about the response."</p>
</div>
<div class="paragraph">
<p>Queries can be dispatched on the query bus using several mechanism, like:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Direct query with a single response.</p>
</li>
<li>
<p>Direct query with many responses.</p>
</li>
<li>
<p>Streaming query for a <strong>lot</strong> of responses.</p>
</li>
<li>
<p>Subscription queries, to maintain an open subscription with responses.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Just as commands and <a href="#events">events</a>, queries have a type, payload, metadata, and identifier.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_async_native_messaging"><a class="anchor" href="#_async_native_messaging"></a>Async-native messaging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Axon Framework is built with asynchronous processing at its core.
This means the framework handles asynchronous operations throughout, without requiring you to deal with asynchronous programming details at every turn.</p>
</div>
<div class="paragraph">
<p>The framework uses <code>CompletableFuture</code> for asynchronous results and provides abstractions that work seamlessly in both synchronous and asynchronous contexts.
Thus, when you send a command or dispatch a query, the framework handles the complexity of async processing for you.</p>
</div>
<div class="paragraph">
<p>There are two key components in Axon Framework that enable it to be async-native. These are the <a href="#message_stream">Message Stream</a> and <a href="#processing_context">Processing Context</a>.</p>
</div>
<div class="sect2">
<h3 id="message_stream"><a class="anchor" href="#message_stream"></a>Message stream</h3>
<div class="paragraph">
<p>The <code>MessageStream</code> is a key abstraction that allows you to work with messages in both imperative and reactive styles.
It is <strong>the</strong> return type for message handlers and event store operations.</p>
</div>
<div class="paragraph">
<p>A <code>MessageStream</code> can represent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Zero messages (for event handlers that produce no result)</p>
</li>
<li>
<p>One message (for command handlers that produce a single result)</p>
</li>
<li>
<p>Multiple messages (for query handlers that stream results, or event store reads)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can create a <code>MessageStream</code> using factory methods like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>MessageStream.empty()</code> - No messages</p>
</li>
<li>
<p><code>MessageStream.just(message)</code> - A single message</p>
</li>
<li>
<p><code>MessageStream.fromIterable(messages)</code> - From a collection</p>
</li>
<li>
<p><code>MessageStream.fromStream(stream)</code> - From a Java Stream</p>
</li>
<li>
<p><code>MessageStream.fromFuture(future)</code> - From a CompletableFuture</p>
</li>
<li>
<p><code>FluxUtils.asMessageStream(flux)</code> - From a Reactor Flux</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>MessageStream</code> abstraction allows the framework to support both traditional imperative code and reactive programming styles without forcing you to choose one approach exclusively.</p>
</div>
</div>
<div class="sect2">
<h3 id="processing_context"><a class="anchor" href="#processing_context"></a>Processing context</h3>
<div class="paragraph">
<p>When Axon processes a message, it creates a <code>ProcessingContext</code> that travels with the message throughout its handling.
This context:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Contains correlation data for tracing and monitoring</p>
</li>
<li>
<p>Manages the lifecycle of message processing</p>
</li>
<li>
<p>Provides access to resources needed during processing</p>
</li>
<li>
<p>Enables coordination between components</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Message handlers can inject the <code>ProcessingContext</code> as a parameter to access this information or to dispatch new messages while maintaining correlation.
See <a href="processing-context/" class="xref page"><code>ProcessingContext</code></a> for more details.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_message_flow"><a class="anchor" href="#_message_flow"></a>Message flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When building Axon Framework applications, you will typically see a flow of messages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Commands are sent to the command bus, which dispatches them to the appropriate command handler.</p>
</li>
<li>
<p>The command handler processes the command and may publish events.</p>
</li>
<li>
<p>Events are handled by event handlers, which can update read models or trigger further processing.</p>
</li>
<li>
<p>Read models can be queried using query messages.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Using <a href="../../../axoniq-platform-reference/" class="xref page">Axoniq Platform</a>, you can monitor the flow of messages in your application as you can see in the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/axoniq-console-flow.gif" alt="Animated graphic of message flow in Axoniq Platform">
</div>
</div>
<div class="paragraph">
<p>Besides seeing the flow, every message handler is individually monitored, providing deep insight into the performance and behavior of your application. For more information, see the <a href="../../../axoniq-platform-reference/" class="xref page">Axoniq Platform Reference Guide</a> or <a href="https://platform.axoniq.io">sign up directly</a>.</p>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../migration/understanding-architecture-principles/">Understanding Choices</a></span>
  <span class="next"><a href="anatomy-message/">Anatomy of a Message</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="secondary-footer">
    <p>Copyright © 2025 AxonIQ BV. All Rights Reserved</p>
    <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=e0b2b5cb-139e-4753-acab-bae43f90c5d3" />
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
    </div>
  </body>
</html>
