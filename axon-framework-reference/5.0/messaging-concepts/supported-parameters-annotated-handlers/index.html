<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Supported Parameters for Annotated Handlers</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-framework-reference/5.0/messaging-concepts/supported-parameters-annotated-handlers/">
    <link rel="prev" href="../message-intercepting/">
    <link rel="next" href="../message-correlation/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../../_/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" href="../../../../_/img/favicon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../../_/static/manifest.webmanifest">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../../_'</script>


<link rel="icon" href="../../../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
    <div class="header_container">
      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io">
        <img src="../../../../_/img/docs-logo.png" class="header_logo"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-center">
        <a class="navbar-item" href="../../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../">Axon Framework</a>
                <a class="navbar-item" href="../../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../../axon-server-reference/development/">Axon Server</a>
                <a class="navbar-item" href="../../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../../axoniq-platform-reference/">Axoniq Platform</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
            </div>
          </div>
        <a class="navbar-item navbar-button" href="https://platform.axoniq.io" target="_blank">Axoniq Platform</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">Axon Framework Reference</a></li>
    <li><a href="../">Messaging Concepts</a></li>
    <li><a href="./">Supported Parameters for Annotated Handlers</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonFramework/AxonFramework/edit/axon-5.0.x/docs/reference-guide/modules/messaging-concepts/pages/supported-parameters-annotated-handlers.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Supported%20Parameters%20for%20Annotated%20Handlers" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Supported%20Parameters%20for%20Annotated%20Handlers%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BSupported%20Parameters%20for%20Annotated%20Handlers%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-framework-reference%2F5.0%2Fmessaging-concepts%2Fsupported-parameters-annotated-handlers%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">5.0</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../../development/messaging-concepts/supported-parameters-annotated-handlers/">development</a>
    <a class="version item is-current" href="./">5.0</a>
    <a class="version item" href="../../../4.12/messaging-concepts/supported-parameters-annotated-handlers/">4.12</a>
    <a class="version item" href="../../../4.11/messaging-concepts/supported-parameters-annotated-handlers/">4.11</a>
    <a class="version item" href="../../../4.10/messaging-concepts/supported-parameters-annotated-handlers/">4.10</a>
    <a class="version item is-missing" href="../../../0/">older releases</a>
  </div>
</div>
</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-framework-reference" data-version="5.0">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../">Axon Framework</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../migration/">Migration Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/why-upgrade/">Why Upgrade?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/prerequisites/">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/solved-architecture-choices/">Resolved Problems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/understanding-architecture-principles/">Understanding Choices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Messaging Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../anatomy-message/">Anatomy of a Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../message-intercepting/">Message Intercepting</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Supported Parameters for Annotated Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../message-correlation/">Message Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../exception-handling/">Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../processing-context/">Processing Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../commands/">Commands</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/command-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/command-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/configuration/">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../events/">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../events/event-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../events/event-publishing/">Publishing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../events/event-processors/">Event Processors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../events/event-processors/subscribing/">Subscribing Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../events/event-processors/streaming/">Streaming Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../events/event-processors/dead-letter-queue/">Dead-Letter Queue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../events/infrastructure/">Infrastructure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../events/event-store-internals/">Event Store Internals</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../events/event-versioning/">Versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../queries/">Queries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/query-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/query-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/configuration/">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../testing/">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/basic-testing/">Basic Testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/matchers-and-field-filters/">Matchers and Field Filters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/advanced-testing/">Advanced Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../conversion/">Conversion</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../tuning/">Tuning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/event-snapshots/">Event Snapshots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/event-processing/">Event Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/command-processing/">Command Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/rdbms-tuning/">Relational Databases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/tracing/">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/metrics/">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/health/">Health Indicators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/processors/">Event Processor Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/message-tracking/">Message Tracking</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../spring-boot-integration/">Spring Boot Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../modules/">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release-notes/major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release-notes/minor-releases/">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../known-issues-and-workarounds/">Known Issues and Workarounds</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Page content" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Supported Parameters for Annotated Handlers</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides an exhaustive list of all the possible parameters for annotated message handling functions.
The framework resolves the parameters for any message handling function through an internal mechanism, called
the <code>ParameterResolver</code>.
The <code>ParameterResolver</code>, built by a <code>ParameterResolverFactory</code>, is in charge of inserting the parameters for annotated
command, event, and query handlers.</p>
</div>
<div class="paragraph">
<p>The set of <code>ParameterResolvers</code> can be extended if custom (or not yet) supported parameters should be injected in to
your annotated handlers.
You can configure additional <code>ParameterResolvers</code> by implementing the <code>ParameterResolverFactory</code> interface and
configuring the new implementation.
For more specifics on configuring custom `ParameterResolver`s we suggest
reading <a href="../../../../message-handler-customization-guide/main/" class="xref page">this</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-parameters-for-command-handlers"><a class="anchor" href="#supported-parameters-for-command-handlers"></a>Supported parameters for command handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, <code>@CommandHandler</code> annotated methods allow the following parameter types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter designation</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first parameter is always the payload of the command message. It may also be of type <code>Message</code> or <code>CommandMessage</code>, which contain the payload. Using the <code>Message</code>/<code>CommandMessage</code> requires the <code>@CommandHandler</code> annotation to define the command&#8217;s name the handler processes (by setting the <code>commandName</code> property on the annotation).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>Metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will contain the entire metadata of a <code>CommandMessage</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotated with <code>@MetadataValue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve the metadata value with the key as indicated on the annotation. If <code>required</code> is <code>false</code> (default), <code>null</code> is passed when the metadata value is not present. If <code>required</code> is <code>true</code>, the resolver will not match and prevent the method from being invoked when the metadata value is not present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>Message</code> or <code>CommandMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will get the complete message, with both the payload and the metadata. Resolving the entire <code>Message</code>/<code>CommandMessage</code> is helpful if a method needs several metadata fields or other properties of the message. It is best to declare a parameter of the payload type as the first parameter, followed by a parameter of type <code>CommandMessage</code> if you need both.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>ProcessingContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will get the current <a href="../processing-context/" class="xref page"><code>ProcessingContext</code></a> injected. The <code>ProcessingContext</code> allows command handlers to register actions to be performed at specific stages of processing or gain access to the resources registered with it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>String</code> annotated with <code>@MessageIdentifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve the identifier of the handled <code>CommandMessage</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>EventAppender</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will inject the <code>EventAppender</code> for publishing events from within a command handler. This is useful when you need to publish events within an entity&#8217;s context. Ensures <a href="../message-correlation/" class="xref page">correlation data</a> is taken care of as the <code>EventAppender</code> is processing context aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>CommandDispatcher</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will inject the <code>CommandDispatcher</code> for dispatching commands from within a command handler. This is useful for command orchestration or dispatching follow-up commands. Ensures <a href="../message-correlation/" class="xref page">correlation data</a> is taken care of as the <code>CommandDispatcher</code> is processing context aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Bean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the application runs in a Spring environment, any Spring Bean can be resolved. The parameter can be annotated with <code>@Qualifier</code> if a specific version of the bean should be wired.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="supported-parameters-for-event-handlers"><a class="anchor" href="#supported-parameters-for-event-handlers"></a>Supported parameters for event handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, <code>@EventHandler</code> annotated methods allow the following parameter types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter designation</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first parameter is always the payload of the event message. It may also be of type <code>Message</code> or <code>EventMessage</code>, which contain the payload. Using the <code>Message</code>/<code>EventMessage</code> requires the <code>@EventHandler</code> annotation to define the event&#8217;s name the handler processes (by setting the <code>eventName</code> property on the annotation).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>Metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will contain the entire metadata of an <code>EventMessage</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotated with <code>@MetadataValue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve the metadata value with the key as indicated on the annotation. If <code>required</code> is <code>false</code> (default), <code>null</code> is passed when the metadata value is not present. If <code>required</code> is <code>true</code>, the resolver will not match and prevent the method from being invoked when the metadata value is not present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>Message</code> or <code>EventMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will get the complete message, with both the payload and the metadata. Resolving the entire <code>Message</code>/<code>EventMessage</code> is helpful if a method needs several metadata fields or other properties of the message. It is best to declare a parameter of the payload type as the first parameter, followed by a parameter of type <code>EventMessage</code> if you need both.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>ProcessingContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will get the current <a href="../processing-context/" class="xref page"><code>ProcessingContext</code></a> injected. The <code>ProcessingContext</code> allows event handlers to register actions to be performed at specific stages of processing or gain access to the resources registered with it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>String</code> annotated with <code>@MessageIdentifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve the identifier of the handled <code>EventMessage</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>java.time.Instant</code> annotated with <code>@Timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve to the timestamp of the <code>EventMessage</code>. The resolved timestamp is the time at which the event was generated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>TrackingToken</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will have the current <a href="../../events/event-processors/streaming/#tracking_tokens" class="xref page">token</a> related to the processed event injected. Note that this will only work for streaming event processors, as otherwise there is no token attached to the events.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>ReplayStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve to the <code>ReplayStatus</code> indicating whether the event is delivered as a regular event or a replay event during event replay operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotated with <code>@ReplayContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve to replay context values that were registered when the replay was started. This is only available during event replay and can be used to access replay-specific configuration or state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>CommandDispatcher</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will inject the <code>CommandDispatcher</code> for dispatching commands from within an event handler. This is useful when events should trigger command execution. Ensures <a href="../message-correlation/" class="xref page">correlation data</a> is taken care of as the <code>CommandDispatcher</code> is processing context aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>EventAppender</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will inject the <code>EventAppender</code> for publishing events from within an event handler. This is useful when an event handler needs to publish new events in response to the event being handled. Ensures <a href="../message-correlation/" class="xref page">correlation data</a> is taken care of as the <code>EventAppender</code> is processing context aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>QueryUpdateEmitter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will inject the <code>QueryUpdateEmitter</code> for emitting updates to subscription queries. This is useful when query handlers need to push incremental updates or notify subscribers of changes. Ensures <a href="../message-correlation/" class="xref page">correlation data</a> is taken care of as the <code>QueryUpdateEmitter</code> is processing context aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Bean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the application runs in a Spring environment, any Spring Bean can be resolved. The parameter can be annotated with <code>@Qualifier</code> if a specific version of the bean should be wired.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Aggregate-specific parameters</div>
<div class="paragraph">
<p>If an aggregate-based event storage solution is used, there are a couple of additional parameter resolvers you can use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>String</code> annotated with <code>@AggregateType</code> - Will resolve the aggregate type name when the event originated from an aggregate. This provides the type of aggregate that published the event.</p>
</li>
<li>
<p>A <code>Long</code> or <code>long</code> annotated with <code>@SequenceNumber</code> - Will resolve to the sequence number of events originating from an aggregate. This parameter provides the order in which the event was generated within the aggregate that published it. Only available for events published by aggregates.</p>
</li>
<li>
<p>A <code>String</code> annotated with <code>@SourceId</code> - Will resolve to the aggregate identifier when the event originated from an aggregate. This parameter provides the identifier of the aggregate that published the event. Only available for events published by aggregates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>None of the above are applicable when the event store is based of the dynamic consistency boundary principle, since events <strong>are not</strong> aggregate-specific in that scenario.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-parameters-for-query-handlers"><a class="anchor" href="#supported-parameters-for-query-handlers"></a>Supported parameters for query handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, <code>@QueryHandler</code> annotated methods allow the following parameter types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter designation</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first parameter is always the payload of the query message. It may also be of type <code>Message</code> or <code>QueryMessage</code>, which contain the payload. Using the <code>Message</code>/<code>QueryMessage</code> requires the <code>@QueryHandler</code> annotation to define the query&#8217;s name the handler processes (by setting the <code>queryName</code> property on the annotation).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>Metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will contain the entire metadata of a <code>QueryMessage</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotated with <code>@MetadataValue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve the metadata value with the key as indicated on the annotation. If <code>required</code> is <code>false</code> (default), <code>null</code> is passed when the metadata value is not present. If <code>required</code> is <code>true</code>, the resolver will not match and prevent the method from being invoked when the metadata value is not present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>Message</code> or <code>QueryMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will get the complete message, with both the payload and the metadata. Resolving the entire <code>Message</code>/<code>QueryMessage</code> is helpful if a method needs several metadata fields or other properties of the message. It is best to declare a parameter of the payload type as the first parameter, followed by a parameter of type <code>QueryMessage</code> if you need both.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>ProcessingContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will get the current <a href="../processing-context/" class="xref page"><code>ProcessingContext</code></a> injected. The <code>ProcessingContext</code> allows query handlers to register actions to be performed at specific stages of processing or gain access to the resources registered with it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>String</code> annotated with <code>@MessageIdentifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will resolve the identifier of the handled <code>QueryMessage</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>CommandDispatcher</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will inject the <code>CommandDispatcher</code> for dispatching commands from within a query handler. While generally discouraged (queries should not have side effects), this may be useful in specific scenarios. Ensures <a href="../message-correlation/" class="xref page">correlation data</a> is taken care of as the <code>CommandDispatcher</code> is processing context aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type: <code>EventAppender</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will inject the <code>EventAppender</code> for publishing events from within a query handler. While generally discouraged (queries should not have side effects), this may be useful in specific scenarios. Ensures <a href="../message-correlation/" class="xref page">correlation data</a> is taken care of as the <code>EventAppender</code> is processing context aware.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Bean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the application runs in a Spring environment, any Spring Bean can be resolved. The parameter can be annotated with <code>@Qualifier</code> if a specific version of the bean should be wired.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are some examples demonstrating the use of different parameter types:</p>
</div>
<div class="sect2">
<h3 id="_basic_command_handler_with_processingcontext"><a class="anchor" href="#_basic_command_handler_with_processingcontext"></a>Basic command handler with <code>ProcessingContext</code></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@CommandHandler
public void handle(PlaceOrderCommand command,
                   EventAppender appender) {
    // Make business decision and append event...
    PaymentRequestedEvent event = new PaymentRequestedEvent(
            command.orderId(),
            command.amount()
    );
    appender.append(event);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_handler_with_processingcontext"><a class="anchor" href="#_event_handler_with_processingcontext"></a>Event handler with <code>ProcessingContext</code></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventHandler
public void on(OrderPlacedEvent event,
               ProcessingContext context) {
    // Register cleanup action
    context.whenComplete(pc -&gt; cleanupResources());
    processEvent(event);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_handler_with_metadata_and_timestamp"><a class="anchor" href="#_event_handler_with_metadata_and_timestamp"></a>Event handler with metadata and timestamp</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventHandler
public void on(OrderPlacedEvent event,
               @MetadataValue("userId") String userId,
               @Timestamp Instant timestamp) {
    // userId is extracted from metadata
    // timestamp contains when the event was created
    updateProjection(event, userId, timestamp);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_query_handler_with_subscription_query_support"><a class="anchor" href="#_query_handler_with_subscription_query_support"></a>Query handler with subscription query support</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@QueryHandler
public OrderSummary handle(OrderQuery query,
                           QueryUpdateEmitter updateEmitter) {
    OrderSummary summary = loadSummary(query.orderId());

    OrderUpdate update = createUpdate(summary);

    // Register for updates to send incremental changes
    updateEmitter.emit(OrderQuery.class,
                       q -&gt; q.orderId().equals(query.orderId()),
                       update);

    return summary;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_handler_dispatching_follow_up_commands"><a class="anchor" href="#_event_handler_dispatching_follow_up_commands"></a>Event handler dispatching follow-up commands</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventHandler
public CompletableFuture&lt;Void&gt; handle(OrderPlacedEvent event,
                                      CommandDispatcher dispatcher) {
    // Update the state based on the event
    updateState(event);

    // Dispatch follow-up command
    CommandResult result = dispatcher.send(new ShipOrderCommand(event.orderId()));

    // Return the CompletableFuture so the handler only completes when the command finishes
    return result.getResultMessage()
                 .thenAccept(r -&gt; logger.info("Shipping initiated"))
                 .exceptionally(ex -&gt; {
                     logger.error("Failed to initiate shipping: {}", ex.getMessage());
                     // Handle error appropriately
                     return null;
                 });
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_handler_accessing_replay_context"><a class="anchor" href="#_event_handler_accessing_replay_context"></a>Event handler accessing replay context</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventHandler
public void on(OrderPlacedEvent event,
               ReplayStatus replayStatus,
               @ReplayContext String replayReason) {
    if (replayStatus == ReplayStatus.REPLAY) {
        // Special handling during replay
        logger.info("Replaying event due to: {}", replayReason);
        // Skip side effects during replay
    } else {
        // Normal processing
        sendEmailNotification(event);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../message-intercepting/">Message Intercepting</a></span>
  <span class="next"><a href="../message-correlation/">Message Correlation</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="secondary-footer">
    <p>Copyright © 2025 AxonIQ BV. All Rights Reserved</p>
    <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=e0b2b5cb-139e-4753-acab-bae43f90c5d3" />
  </div>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    </div>
  </body>
</html>
