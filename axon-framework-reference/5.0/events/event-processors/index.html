<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Event Processors</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-framework-reference/5.0/events/event-processors/">
    <link rel="prev" href="../event-publishing/">
    <link rel="next" href="subscribing/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../../_/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" href="../../../../_/img/favicon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../../_/static/manifest.webmanifest">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../../_'</script>


<link rel="icon" href="../../../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
    <div class="header_container">
      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io">
        <img src="../../../../_/img/docs-logo.png" class="header_logo"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-center">
        <a class="navbar-item" href="../../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../">Axon Framework</a>
                <a class="navbar-item" href="../../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../../axon-server-reference/development/">Axon Server</a>
                <a class="navbar-item" href="../../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../../axoniq-platform-reference/">Axoniq Platform</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
            </div>
          </div>
        <a class="navbar-item navbar-button" href="https://platform.axoniq.io" target="_blank">Axoniq Platform</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">Axon Framework Reference</a></li>
    <li><a href="../">Events</a></li>
    <li><a href="./">Event Processors</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonFramework/AxonFramework/edit/axon-5.0.x/docs/reference-guide/modules/events/pages/event-processors/index.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Event%20Processors" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Event%20Processors%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BEvent%20Processors%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-framework-reference%2F5.0%2Fevents%2Fevent-processors%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">5.0</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item" href="../../../development/events/event-processors/">development</a>
    <a class="version item is-current" href="./">5.0</a>
    <a class="version item" href="../../../4.12/events/event-processors/">4.12</a>
    <a class="version item" href="../../../4.11/events/event-processors/">4.11</a>
    <a class="version item" href="../../../4.10/events/event-processors/">4.10</a>
    <a class="version item is-missing" href="../../../0/">older releases</a>
  </div>
</div>
</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-framework-reference" data-version="5.0">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../">Axon Framework</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../migration/">Migration Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/why-upgrade/">Why Upgrade?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/prerequisites/">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/solved-architecture-choices/">Resolved Problems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../migration/understanding-architecture-principles/">Understanding Choices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../messaging-concepts/">Messaging Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/anatomy-message/">Anatomy of a Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/message-intercepting/">Message Intercepting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/supported-parameters-annotated-handlers/">Supported Parameters for Annotated Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/message-correlation/">Message Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/exception-handling/">Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/processing-context/">Processing Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../commands/">Commands</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/command-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/command-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../commands/configuration/">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-publishing/">Publishing</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="./">Event Processors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="subscribing/">Subscribing Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="streaming/">Streaming Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="dead-letter-queue/">Dead-Letter Queue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../infrastructure/">Infrastructure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../event-store-internals/">Event Store Internals</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-versioning/">Versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../queries/">Queries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/query-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/query-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/configuration/">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../testing/">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/basic-testing/">Basic Testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/matchers-and-field-filters/">Matchers and Field Filters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/advanced-testing/">Advanced Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../conversion/">Conversion</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../tuning/">Tuning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/event-snapshots/">Event Snapshots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/event-processing/">Event Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/command-processing/">Command Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/rdbms-tuning/">Relational Databases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/tracing/">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/metrics/">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/health/">Health Indicators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/processors/">Event Processor Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/message-tracking/">Message Tracking</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../spring-boot-integration/">Spring Boot Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../modules/">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release-notes/major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release-notes/minor-releases/">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../known-issues-and-workarounds/">Known Issues and Workarounds</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Page content" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Event Processors</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="../event-handlers/" class="xref page">Event handlers</a> define the business logic to be performed when an event is received.
<em>Event Processors</em> are the components that take care of the technical aspects of that processing.
They start a <a href="../../messaging-concepts/processing-context/" class="xref page">unit of work</a> and possibly a transaction.
However, they also ensure that <a href="../../messaging-concepts/message-correlation/" class="xref page">correlation data</a> can be correctly attached to all messages created during event processing, among other non-functional requirements.</p>
</div>
<div class="paragraph">
<p>Event processors have event handling components.
Event handling components, in turn, have event handlers.
Each event handling component belongs to a single event processor.
The event processor manages all aspects of event processing including threading, <a href="#error-handling">error handling</a>, <a href="streaming/#sequential_processing" class="xref page">sequencing</a>, and transaction management.</p>
</div>
<div class="paragraph">
<p>Event processors come in roughly two forms:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="subscribing/" class="xref page">Subscribing</a>, and</p>
</li>
<li>
<p><a href="streaming/" class="xref page">Streaming</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Subscribing event processors subscribe to a source of events and are invoked by the thread managed by the publishing mechanism.
Streaming event processors, on the other hand, pull their messages from a source using a thread that it manages itself.</p>
</div>
<div class="paragraph">
<p>For more specifics on either type, consult their respective sections <a href="subscribing/" class="xref page">here</a> and <a href="streaming/" class="xref page">here</a>.
The rest of this page describes the Event Processor&#8217;s common concepts and configuration options.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assigning_handlers_to_processors"><a class="anchor" href="#_assigning_handlers_to_processors"></a>Assigning handlers to processors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All processors have a name, which identifies a processor instance across JVM instances.
Two processors with the same name are considered as two instances of the same processor.</p>
</div>
<div class="paragraph">
<p>Each event handler will belong to an event handling component.
An event handling component can include any number of event handlers.
These event handling components are attached to a processor, whose name by default is the package name of the event handler&#8217;s class.
Furthermore, the default processor implementation used by Axon is the <a href="streaming/" class="xref page">PooledStreamingEventProcessor</a>.
The event processor type can be customized, as is shown in the <a href="subscribing/#configuring" class="xref page">subscribing</a> and <a href="streaming/#configuring" class="xref page">streaming</a> sections.</p>
</div>
<div class="paragraph">
<p>There are two main approaches to configuring event processors and assigning handlers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Declarative configuration</strong> - Using Axon&#8217;s configuration API to explicitly define which event handling components belong to which processor.</p>
</li>
<li>
<p><strong>Autodetected configuration</strong> - Using Spring Boot to automatically detect and assign event handling components to processors based on their package name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="../event-handlers/#registering_event_handlers" class="xref page">This</a> section describes the process to register an event handler.</p>
</div>
<div class="sect2">
<h3 id="declarative_config"><a class="anchor" href="#declarative_config"></a>Declarative configuration</h3>
<div class="paragraph">
<p>Assuming the declarative approach is used and we have the following event handling components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.axonframework.example.eventhandling.MyHandler</code></p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.MyOtherHandler</code></p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.module.ModuleHandler</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To register these, we need to explicitly invoke the <code>MessagingConfigurer#eventProcessing(Consumer&lt;EventProcessingConfigurer&gt;)</code>.
In the example below, a <a href="subscribing/" class="xref page">subscribing processor</a> is constructed, which can be replaced for a <a href="streaming/" class="xref page">streaming processor</a> if desired:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.axonframework.messaging.core.configuration.MessagingConfigurer;
import org.axonframework.messaging.eventhandling.configuration.EventHandlingComponentsConfigurer;
import org.axonframework.messaging.eventhandling.processing.subscribing.SubscribingEventProcessorsConfigurer;

public class AxonConfig {

    public void configureEventProcessing(MessagingConfigurer configurer) {
        configurer.eventProcessing(eventConfigurer -&gt; eventConfigurer.subscribing(
                this::configureSubscribingProcessor
        ));
    }

    private SubscribingEventProcessorsConfigurer configureSubscribingProcessor(
            SubscribingEventProcessorsConfigurer subscribingConfigurer
    ) {
        return subscribingConfigurer.processor(
                "my-processor",
                config -&gt; config.eventHandlingComponents(this::configureHandlingComponent)
                                .notCustomized()
        );
    }

    private EventHandlingComponentsConfigurer.AdditionalComponentPhase configureHandlingComponent(
            EventHandlingComponentsConfigurer.RequiredComponentPhase componentConfigurer
    ) {
        return componentConfigurer.autodetected(c -&gt; new MyHandler())
                                  .autodetected(c -&gt; new ModuleHandler())
                                  .autodetected(c -&gt; new MyOtherHandler());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="autodetected_config"><a class="anchor" href="#autodetected_config"></a>Autodetected configuration</h3>
<div class="paragraph">
<p>Assuming the autodetected approach is used, let us consider that the following event handling components have been registered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.axonframework.example.eventhandling.MyHandler</code></p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.MyOtherHandler</code></p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.module.ModuleHandler</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Without any intervention, this will trigger the creation of two Streaming Processors, namely:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>org.axonframework.example.eventhandling</code> with two event handling components called <code>MyHandler</code> and <code>MyOtherHandler</code>.</p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.module</code> with the event handling component <code>ModuleHandler</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_ordering_event_handling_components_within_a_processor"><a class="anchor" href="#_ordering_event_handling_components_within_a_processor"></a>Ordering event handling components within a processor</h3>
<div class="paragraph">
<p>To order event handling components within an Event Processor, the order in which components are registered (as described in the <a href="../event-handlers/#registering_event_handlers" class="xref page">Registering Event Handlers</a> section) is guiding.
Thus, the ordering in which an Event Processor will call handling components for event handling is the same as their insertion ordering in the Configuration API.</p>
</div>
<div class="paragraph">
<p>If we use an autodetected configuration like Spring as the mechanism for wiring everything, we can explicitly specify the event handler component ordering by adding the <code>@Order</code> annotation.
This annotation is placed on the event handling component class, containing an <code>integer</code> value to specify the ordering.</p>
</div>
<div class="paragraph">
<p>Note that it is <strong>not possible</strong> to order event handlers belonging to different Event Processors.
Each Event Processor acts as an isolated component without any intervention from other Event Processors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Ordering Event Handlers within a Processor</div>
<div class="paragraph">
<p>Although we can place an order among event handling components within an Event Processor, separation of components is recommended.</p>
</div>
<div class="paragraph">
<p>Placing an overall ordering on event handling components means those components are inclined to interact with one another, introducing a form of coupling.
Due to this, the event handling process will become complex to manage (for example, for new team members).
Furthermore, embracing an ordering approach might lead to place <em>all</em> event handling components in a global ordering, decreasing processing speeds in general.</p>
</div>
<div class="paragraph">
<p>In all, you are free to use an ordering, but we recommend using it sparingly.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="error-handling"><a class="anchor" href="#error-handling"></a>Error handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Errors are inevitable in any application.
Depending on where they happen, you may want to respond differently.</p>
</div>
<div class="paragraph">
<p>By default, exceptions raised by event handlers are handled by the <code>ErrorHandler</code>.
The default <code>ErrorHandler</code> used is the <code>PropagatingErrorHandler</code>, which rethrows any exceptions it catches.</p>
</div>
<div class="paragraph">
<p>In the case of a <a href="streaming/#error-mode" class="xref page">Streaming Event Processor</a>, this means the processor will go into error mode, releasing any tokens and retrying at an incremental interval (starting at 1 second, up to max 60 seconds).
A <a href="subscribing/#error-mode" class="xref page">Subscribing Event Processor</a> will report a publication error to the component that provided the event.</p>
</div>
<div class="paragraph">
<p>How the Event Processor deals with a rethrown exception differs per implementation.
The behaviour for the Subscribing- and the Streaming Event Processor can respectively be found <a href="subscribing/#error-mode" class="xref page">here</a> and <a href="streaming/#error-mode" class="xref page">here</a>.</p>
</div>
<div class="paragraph">
<p>We can configure a default <code>ErrorHandler</code> for all Event Processors or an <code>ErrorHandler</code> for specific processors:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_configuration_api_default" class="tab">
<p>Configuration API - Default</p>
</li>
<li id="_tabs_1_configuration_api_specific" class="tab">
<p>Configuration API - Specific</p>
</li>
</ul>
</div>
<div id="_tabs_1_configuration_api_default--panel" class="tabpanel" aria-labelledby="_tabs_1_configuration_api_default">
<div class="paragraph">
<p>To register a default <code>ErrorHandler</code> for any Event Processor, you can do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.annotation.Nonnull;
import org.axonframework.messaging.core.configuration.MessagingConfigurer;
import org.axonframework.messaging.eventhandling.processing.errorhandling.ErrorContext;
import org.axonframework.messaging.eventhandling.processing.errorhandling.ErrorHandler;

public class AxonConfig {

    public void configureEventProcessing(MessagingConfigurer configurer) {
        configurer.eventProcessing(eventConfigurer -&gt; eventConfigurer.defaults(
                defaults -&gt; defaults.errorHandler(new CustomErrorHandler())
        ));
    }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_configuration_api_specific--panel" class="tabpanel" aria-labelledby="_tabs_1_configuration_api_specific">
<div class="paragraph">
<p>To register a custom <code>ErrorHandler</code> for a specific (in this case Subscribing) Processor, have a look at the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.axonframework.messaging.core.configuration.MessagingConfigurer;
import org.axonframework.messaging.eventhandling.configuration.EventHandlingComponentsConfigurer;
import org.axonframework.messaging.eventhandling.processing.subscribing.SubscribingEventProcessorsConfigurer;

public class AxonConfig {

    public void configureEventProcessing(MessagingConfigurer configurer) {
        configurer.eventProcessing(eventConfigurer -&gt; eventConfigurer.subscribing(
                this::configureSubscribingProcessor
        ));
    }

    private SubscribingEventProcessorsConfigurer configureSubscribingProcessor(
            SubscribingEventProcessorsConfigurer subscribingConfigurer
    ) {
        return subscribingConfigurer.processor(
                "my-processor",
                config -&gt; config.eventHandlingComponents(this::configureHandlingComponent)
                                .customized((c, subscribingConfig) -&gt; subscribingConfig.errorHandler(
                                        new CustomErrorHandler()
                                ))
        );
    }

    private EventHandlingComponentsConfigurer.AdditionalComponentPhase configureHandlingComponent(
            EventHandlingComponentsConfigurer.RequiredComponentPhase componentConfigurer
    ) {
        return componentConfigurer.autodetected(c -&gt; new MyHandler());
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For providing a custom solution, the `ErrorHandler&#8217;s single method needs to be implemented:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface ErrorHandler {

    void handleError(@Nonnull ErrorContext errorContext) throws Exception;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the provided <code>ErrorContext</code> object, you can decide to ignore the error, schedule retries, or rethrow the exception.</p>
</div>
<div class="sect2">
<h3 id="dead-letter-queue"><a class="anchor" href="#dead-letter-queue"></a>Dead-letter queue</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Dead-Letter Queue not available in Axon Framework 5.0</div>
<div class="paragraph">
<p>The Dead-Letter Queue feature is not yet available in Axon Framework 5.0.
It will be reintroduced in Axon Framework 5.1.
The documentation below describes the Dead-Letter Queue concepts for reference and future use.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Although configuring an <a href="#error-handling">Error Handler</a> helps you to deal with exceptions when processing events, event handling will typically still stop entirely.
When you only log the error and allow processing to proceed, you will most likely end up with missing data until you fix the predicament and <a href="streaming/#replaying-events" class="xref page">replay</a>
past events.
If you instead propagate the exception so the event processor keeps retrying, the event processor will stall entirely when the cause is consistent.</p>
</div>
<div class="paragraph">
<p>Although this behavior is sufficient on many occasions, sometimes it is beneficial if we can unblock event handling by parking the problematic event.
This is where the dead-letter queue comes in.
It is a mechanism to park events until they can be processed successfully.
You can find more information in the <a href="dead-letter-queue/" class="xref page">Dead-Letter Queue</a> section.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general_processor_configuration"><a class="anchor" href="#general_processor_configuration"></a>General processor configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alongside <a href="#_assigning_handlers_to_processors">handler assignment</a> and <a href="#error-handling">error handling</a>, Event Processors allow configuration for other components too.
For <a href="subscribing/#configuring" class="xref page">Subscribing</a> and <a href="streaming/#configuring" class="xref page">Streaming</a> Event Processor specific options, their respective sections should be checked.
The remainder of this page will cover the generic configuration options for each Event Processor.</p>
</div>
<div class="sect2">
<h3 id="_event_handler_interceptors"><a class="anchor" href="#_event_handler_interceptors"></a>Event handler interceptors</h3>
<div class="paragraph">
<p>Since the Event Processor is the invoker of event handling methods, it is a spot to configure <a href="../../messaging-concepts/message-intercepting/" class="xref page">Message Handler Interceptors</a> too.
Since Event Processors are dedicated to event handling, the <code>MessageHandlerInterceptor</code> is required to deal with an <code>EventMessage</code>.
Differently put, an <a href="../../messaging-concepts/message-intercepting/#event-handler-interceptors" class="xref page">EventHandlerInterceptor</a> can be registered to Event Processors.</p>
</div>
<div class="paragraph">
<p>There are two approaches to registering interceptors with your event handling processes.
Firstly, you can define default handling interceptors that will be attached to all Event Processors in your application.
This can be achieved through the <code>MessagingConfigurer</code> and is explained in more detail <a href="../../messaging-concepts/message-intercepting/#event-handler-interceptors" class="xref page">here</a>.</p>
</div>
<div class="paragraph">
<p>Secondly, handler interceptor can be registered per specific Event Processor instance.
For this you should use the <code>withInterceptr(MessageHandlerInterceptor&lt;? super EventMessage&gt;)</code> operation as part of customizing a processor based on its name as shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.axonframework.messaging.core.configuration.MessagingConfigurer;

public class AxonConfig {

    public void registerProcessorSpecificInterceptor(MessagingConfigurer configurer) {
        // For SubscribingEventProcessor:
        configurer.eventProcessing()
                  .subscribing()
                  .customize("my-processor", config -&gt; config.withInterceptor(new CustomEventHandlerInterceptor()));
        // For PooledStreamEventProcessor:
        configurer.eventProcessing()
                  .pooledStreaming()
                  .customize("my-processor", config -&gt; config.withInterceptor(new CustomEventHandlerInterceptor()));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_message_monitors"><a class="anchor" href="#_message_monitors"></a>Message monitors</h3>
<div class="paragraph">
<p>Any Event Processor instance provides the means to contain a Message Monitor.
Message Monitors (discussed in more detail <a href="../../monitoring/metrics/" class="xref page">here</a>) allow for monitoring the flow of messages throughout an Axon application.
For Event Processors, the message monitor deals explicitly with the events flowing through the Event Processor towards the event handling functions.</p>
</div>
<div class="paragraph">
<p>To register a default <code>MessagMonitor</code> for events, you use the <code>MessageConfigurer#registerEventMonitor</code> operation as shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.axonframework.messaging.core.configuration.MessagingConfigurer;

public class AxonConfig {

    public void registerEventMonitor(MessagingConfigurer configurer) {
        configurer.registerEventMonitor(config -&gt; new CustomMessageMonitor());
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../event-publishing/">Publishing</a></span>
  <span class="next"><a href="subscribing/">Subscribing Event Processor</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="secondary-footer">
    <p>Copyright © 2025 AxonIQ BV. All Rights Reserved</p>
    <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=e0b2b5cb-139e-4753-acab-bae43f90c5d3" />
  </div>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    </div>
  </body>
</html>
