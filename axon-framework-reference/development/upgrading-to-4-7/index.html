<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Upgrading to Axon Framework 4.7</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-framework-reference/4.11/upgrading-to-4-7/">
    <link rel="prev" href="../">
    <link rel="next" href="../messaging-concepts/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../../_/img/apple-touch-icon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../_'</script>


  </head>
  <body class="article">
    <div class="header_container">
      <div class="banner">
    <a href="https://console.axoniq.io">Manage and monitor your Axon Framework applications and Axon Server environments. <span class="banner_button" target="_blank">Try AxonIQ Console</span></a>
</div>      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../../_/img/logo-dark4x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../4.11/">Axon Framework</a>
                <a class="navbar-item" href="../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../axon-server-reference/v2025.0/">Axon Server</a>
                <a class="navbar-item" href="../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../axoniq-console-reference/">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
        <a class="navbar-item navbar-button" href="https://axoniq.io/contact" target="_blank">Get in touch</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../">Axon Framework Reference</a></li>
    <li><a href="./">Upgrading to Axon Framework 4.7</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonFramework/AxonFramework/edit/master/docs/old-reference-guide/modules/ROOT/pages/upgrading-to-4-7.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Upgrading%20to%20Axon%20Framework%204.7" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Upgrading%20to%20Axon%20Framework%204.7%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BUpgrading%20to%20Axon%20Framework%204.7%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-framework-reference%2Fdevelopment%2Fupgrading-to-4-7%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">development</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item is-current" href="./">development</a>
    <a class="version item" href="../../4.11/upgrading-to-4-7/">4.11</a>
    <a class="version item" href="../../4.10/upgrading-to-4-7/">4.10</a>
    <a class="version item is-missing" href="../../0/">older releases</a>
  </div>
</div>
</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-framework-reference" data-version="development">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../">Axon Framework</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../">Introduction</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="./">Upgrading to Axon Framework 4.7</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../messaging-concepts/">Messaging Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/anatomy-message/">Anatomy of a Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/message-correlation/">Message Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/message-intercepting/">Message Intercepting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/supported-parameters-annotated-handlers/">Supported Parameters for Annotated Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/exception-handling/">Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/unit-of-work/">Unit of Work</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/timeouts/">Timeouts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../axon-framework-commands/">Commands</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../axon-framework-commands/command-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../axon-framework-commands/command-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../axon-framework-commands/modeling/aggregate/">Aggregates</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../axon-framework-commands/modeling/multi-entity-aggregates/">Multi-Entity Aggregates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../axon-framework-commands/modeling/state-stored-aggregates/">State Stored Aggregates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../axon-framework-commands/modeling/aggregate-creation-from-another-aggregate/">Aggregate Creation from another Aggregate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../axon-framework-commands/modeling/aggregate-polymorphism/">Aggregate Polymorphism</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../axon-framework-commands/modeling/conflict-resolution/">Conflict Resolution</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../axon-framework-commands/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../axon-framework-commands/configuration/">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/event-processors/">Event Processors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/subscribing/">Subscribing Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/streaming/">Streaming Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/dead-letter-queue/">Dead-Letter Queue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-versioning/">Event Versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../queries/">Queries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/query-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/query-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/implementations/">Implementations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/configuration/">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../sagas/">Sagas</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sagas/implementation/">Implementation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sagas/associations/">Associations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sagas/infrastructure/">Infrastructure</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deadlines/">Deadlines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deadlines/deadline-managers/">Deadline Managers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deadlines/event-schedulers/">Event Schedulers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../testing/">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/commands-events/">Commands / Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/sagas-1/">Sagas</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../serialization/">Serialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tuning/">Tuning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/event-snapshots/">Event Snapshots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/event-processing/">Event Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/command-processing/">Command Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/rdbms-tuning/">Relational Databases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/tracing/">Distributed Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/metrics/">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/health/">Health Indicators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/processors/">Event Processor Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/message-tracking/">Message Tracking</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../spring-boot-integration/">Spring Boot Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../modules/">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/minor-releases/">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../known-issues-and-workarounds/">Known Issues and Workarounds</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Upgrading to Axon Framework 4.7</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Unfortunately, but necessarily, Axon Framework 4.7.0 introduces a few breaking changes.
If you migrate from 4.6.x (or earlier) versions, you may need to make some adjustments to your code.
If you start a greenfield Axon Framework project, there is nothing to worry about.
You may safely skip the following information.</p>
</div>
<div class="paragraph">
<p>The breaking changes are related to the migration from <code>javax</code> to <code>jakarta</code> packages both in Axon Framework and other frameworks often used together with Axon.
Depending on what you were using with 4.6.x version, there are three possible migration paths:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#_steps_to_upgrade_from_javax_to_javax">From <code>javax</code> to <code>javax</code></a>:
This is what you may want if you don’t want Spring 6 and Spring Boot 3 support and expect things to stay the same.</p>
</li>
<li>
<p><a href="#_steps_to_upgrade_from_javax_to_jakarta">From <code>javax</code> to <code>jakarta</code></a>:
This is what you will want if you also upgrade to Spring 6, Spring Boot 3, or another framework that depends on <code>jakarta</code> packages.</p>
</li>
<li>
<p><a href="#_steps_to_upgrade_from_jakarta_to_jakarta">From <code>jakarta</code> to <code>jakarta</code></a>:
This is what you will want if you have already moved to the optional <code>[module-name]-jakarta</code> modules in Axon Framework 4.6.x.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next to the full scenario descriptions, you are also able to use <a href="https://github.com/openrewrite">OpenRewrite</a> migration recipes provided by the Framework.
Please go to the <a href="#_migration_automation">Migration automation</a> section for more details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">From <code>jakarta</code> to <code>javax</code></div>
<div class="paragraph">
<p>While technically possible, the <code>jakarta</code> to <code>javax</code> migration is not something you should do.
If you have already made an effort to switch to the new packages, it makes no sense to go back.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps_to_upgrade_from_javax_to_javax"><a class="anchor" href="#_steps_to_upgrade_from_javax_to_javax"></a>Steps to upgrade from <code>javax</code> to <code>javax</code></h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Zero Axon configuration</div>
<div class="paragraph">
<p>If you don&#8217;t have <em>any</em> manual configuration and use the framework&#8217;s <code>axon-spring-boot-starter</code>, than the upgrade to 4.7 is seamless.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_step_1"><a class="anchor" href="#_step_1"></a>Step 1</h3>
<div class="paragraph">
<p>Adjust packages in <code>import</code> statements and FQCNs according to the new locations mentioned below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Axon 4.6.x</th>
<th class="tableblock halign-left valign-top">Axon 4.7.x</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.common.jpa.EntityManagerProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.common.legacyjpa.EntityManagerProvider</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.common.jpa.PagingJpaQueryIterable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.common.legacyjpa.PagingJpaQueryIterable</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.common.jpa.SimpleEntityManagerProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.common.legacyjpa.SimpleEntityManagerProvider</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.jpa.DeadLetterJpaConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.legacyjpa.DeadLetterJpaConverter</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.jpa.EventMessageDeadLetterJpaConverter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.legacyjpa.EventMessageDeadLetterJpaConverter</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.jpa.JpaDeadLetter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.legacyjpa.JpaDeadLetter</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.jpa.JpaSequencedDeadLetterQueue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.deadletter.legacyjpa.JpaSequencedDeadLetterQueue</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.tokenstore.jpa.JpaTokenStore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventhandling.tokenstore.legacyjpa.JpaTokenStore</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventsourcing.eventstore.jpa.JpaEventStorageEngine</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventsourcing.eventstore.legacyjpa.JpaEventStorageEngine</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventsourcing.eventstore.jpa.SQLErrorCodesResolver</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.eventsourcing.eventstore.legacyjpa.SQLErrorCodesResolver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.messaging.interceptors.BeanValidationInterceptor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.messaging.interceptors.legacyvalidation.BeanValidationInterceptor</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.messaging.interceptors.JSR303ViolationException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.messaging.interceptors.legacyvalidation.JSR303ViolationException</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.modelling.command.GenericJpaRepository</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.modelling.command.legacyjpa.GenericJpaRepository</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.modelling.saga.repository.jpa.JpaSagaStore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.modelling.saga.repository.legacyjpa.JpaSagaStore</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.springboot.autoconfig.JpaAutoConfiguration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.springboot.autoconfig.legacyjpa.JpaJavaxAutoConfiguration</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.springboot.autoconfig.JpaEventStoreAutoConfiguration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.springboot.autoconfig.legacyjpa.JpaJavaxEventStoreAutoConfiguration</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.springboot.util.jpa.ContainerManagedEntityManagerProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.axonframework.springboot.util.legacyjpa.ContainerManagedEntityManagerProvider</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_step_2"><a class="anchor" href="#_step_2"></a>Step 2</h3>
<div class="paragraph">
<p>If you have customized the <code>TokenEntry</code> or <code>AbstractTokenEntry</code>, rebase your changes on the current <code>TokenEntry</code>.
This is required since the <code>AbstractTokenEntry</code> has been deprecated in favor of the <code>TokenEntry</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_3"><a class="anchor" href="#_step_3"></a>Step 3</h3>
<div class="paragraph">
<p>If you have customized the <code>SagaEntry</code> or <code>AbstractSagaEntry</code>, rebase your changes on the current <code>SagaEntry</code>.
This is required since the <code>AbstractSagaEntry</code> has been deprecated in favor of the <code>SagaEntry</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps_to_upgrade_from_javax_to_jakarta"><a class="anchor" href="#_steps_to_upgrade_from_javax_to_jakarta"></a>Steps to upgrade from <code>javax</code> to <code>jakarta</code></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_step_1_2"><a class="anchor" href="#_step_1_2"></a>Step 1</h3>
<div class="paragraph">
<p>Remove most mentions of <code>javax</code> in your codebase and replace them with respective <code>jakarta</code> ones.
Note that not every reference of <code>javax</code> is deprecated as part of the Javax-to-Jakarta switch, such as some <code>javax.annotation</code> and <code>javax.cache</code> mentions.
You can find an <a href="https://github.com/jakartaee/jakartaee-platform/blob/master/namespace/unaffected-packages.adoc">exhaustive list of unaffected packages here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_2"><a class="anchor" href="#_step_2_2"></a>Step 2</h3>
<div class="paragraph">
<p>If you are using any other frameworks together with Axon Framework (such as Spring, Hibernate, etc.) make sure to upgrade those to the respective versions supporting <code>jakarta</code> namespace.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_2"><a class="anchor" href="#_step_3_2"></a>Step 3</h3>
<div class="paragraph">
<p>If you migrate to Hibernate 6 and did <strong>not</strong> customize the sequence generator of the Framework&#8217;s <code>domain_event_entry</code>
and <code>association_value_entry</code>, you need to deal with Hibernates adjusted default sequence generator.
In this case, your environment uses a so-called <code>hibernate_sequence</code> that is used for <strong>all</strong> your tables.
However, Hibernate 6 will construct dedicated sequences per table using a sequence generator.</p>
</div>
<div class="paragraph">
<p>Although we strongly recommend that you use a dedicated sequence generator per table, the easiest way forward to switch back this new default of Hibernate:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_persistence_xml_configuration" class="tab">
<p>persistence.xml configuration</p>
</li>
<li id="_tabs_1_spring_boot_properties_file" class="tab">
<p>Spring Boot - properties file</p>
</li>
</ul>
</div>
<div id="_tabs_1_persistence_xml_configuration--panel" class="tabpanel" aria-labelledby="_tabs_1_persistence_xml_configuration">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;persistence&gt;
    &lt;persistence-unit name="my-persistence-unit"&gt;
        &lt;!-- omitting other configuration for simplicity... --&gt;
        &lt;properties&gt;
            &lt;!-- ensure backward compatibility --&gt;
            &lt;property name="hibernate.id.db_structure_naming_strategy" value="legacy"/&gt;
            &lt;!-- omitting other properties for simplicity... --&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_spring_boot_properties_file--panel" class="tabpanel" aria-labelledby="_tabs_1_spring_boot_properties_file">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">spring.jpa.properties.hibernate.id.db_structure_naming_strategy=legacy
#omitting other properties for simplicity...</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps_to_upgrade_from_jakarta_to_jakarta"><a class="anchor" href="#_steps_to_upgrade_from_jakarta_to_jakarta"></a>Steps to upgrade from <code>jakarta</code> to <code>jakarta</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In your dependency configuration (Maven, Gradle, etc.) replace the <code>jakarta</code>-specific Axon Framework modules with the default ones:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Axon 4.6.x</th>
<th class="tableblock halign-left valign-top">Axon 4.7.x</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-configuration-jakarta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-configuration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-eventsourcing-jakarta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-eventsourcing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-messaging-jakarta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-messaging</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-modelling-jakarta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">axon-modelling</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_migration_automation"><a class="anchor" href="#_migration_automation"></a>Migration automation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The steps above explain in detail what you need to do to upgrade to Axon Framework 4.7 or higher.
If you want to automate some of these steps, there are two <a href="https://github.com/openrewrite">OpenRewrite</a> migration recipes you can use:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/AxonFramework/AxonFramework/blob/master/migration/src/main/resources/META-INF/rewrite/axon-jakarta-4.yml"><strong>Upgrade to Axon Framework 4.7+ Jakarta</strong></a> - A recipe to upgrade from an Axon Framework Javax-specific project to Jakarta.</p>
</li>
<li>
<p><a href="https://github.com/AxonFramework/AxonFramework/blob/master/migration/src/main/resources/META-INF/rewrite/axon-javax-4.yml"><strong>Upgrade to Axon Framework 4.7+ Javax</strong></a> - A recipe to upgrade an Axon Framework Javax-specific project and remain on Javax.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, if you want to upgrade to 4.7 and stick with Javax, you can run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn -U org.openrewrite.maven:rewrite-maven-plugin:4.40.0:run \
  -Drewrite.recipeArtifactCoordinates=org.axonframework:axon-migration:LATEST \
  -DactiveRecipes=org.axonframework.migration.UpgradeAxonFramework_4_7_Javax</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer <a href="https://gradle.org/">Gradle</a> over <a href="https://maven.apache.org/">Maven</a>, refer to the OpenRewrite <a href="https://docs.openrewrite.org/running-recipes/running-rewrite-on-a-gradle-project-without-modifying-the-build">documentation</a> to resolve this.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Combining recipes</div>
<div class="paragraph">
<p>The mentioned recipes above only allow you to upgrade Axon Framework-specific code.
However, you can combine recipes into a single command to, for example, upgrade to Spring Boot 3 and Axon Framework 4.7 in one go:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn -U org.openrewrite.maven:rewrite-maven-plugin:4.40.0:run \
 -Drewrite.recipeArtifactCoordinates=org.openrewrite.recipe:rewrite-spring:4.33.0,org.axonframework:axon-migration:LATEST \
 -DactiveRecipes=org.openrewrite.java.spring.boot3.UpgradeSpringBoot_3_0,org.axonframework.migration.UpgradeAxonFramework_4_7_Jakarta</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../">Introduction</a></span>
  <span class="next"><a href="../messaging-concepts/">Messaging Concepts</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://axoniq.bsky.social/">Bluesky</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>&nbsp;</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.instagram.com/axoniq/">Instagram</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>

  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
    </div>
  </body>
</html>
