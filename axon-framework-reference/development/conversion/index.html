<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Conversion</title>
    <link rel="canonical" href="https://docs.axoniq.io/axon-framework-reference/5.0/conversion/">
    <link rel="prev" href="../testing/advanced-testing/">
    <link rel="next" href="../tuning/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../_/img/favicon.png" sizes="32x32">
    <link rel="apple-touch-icon" href="../../../_/img/favicon.png"><!-- 180×180 -->
    <link rel="manifest" href="../../../_/static/manifest.webmanifest">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../_'</script>


<link rel="icon" href="../../../_/img/favicon.png" type="image/png">
  </head>
  <body class="article">
    <div class="header_container">
      
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io">
        <img src="../../../_/img/docs-logo.png" class="header_logo"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-center">
        <a class="navbar-item" href="../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../5.0/">Axon Framework</a>
                <a class="navbar-item" href="../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../axon-server-reference/development/">Axon Server</a>
                <a class="navbar-item" href="../../../synapse-reference/v0.12/">Axon Synapse</a>
                <a class="navbar-item" href="../../../axoniq-platform-reference/">Axoniq Platform</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
          <div class="navbar-item search hide-for-print">
            <div id="search-field" class="field">
              <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
            </div>
          </div>
        <a class="navbar-item navbar-button" href="https://platform.axoniq.io" target="_blank">Axoniq Platform</a>
      </div>
    </div>
  </nav>
</header>
      <div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../">Axon Framework Reference</a></li>
    <li><a href="./">Conversion</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">
      <a class="action item" href="https://github.com/AxonFramework/AxonFramework/edit/main/docs/reference-guide/modules/ROOT/pages/conversion.adoc">Edit this Page</a>
    
    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Conversion" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Conversion%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BConversion%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxon-framework-reference%2Fdevelopment%2Fconversion%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">development</button>
  <div class="version-menu toolbar_dropdown_menu card">
    <a class="version item is-current" href="./">development</a>
    <a class="version item" href="../../5.0/conversion/">5.0</a>
    <a class="version item" href="../../4.12/serialization/">4.12</a>
    <a class="version item" href="../../4.11/serialization/">4.11</a>
    <a class="version item" href="../../4.10/serialization/">4.10</a>
    <a class="version item is-missing" href="../../0/">older releases</a>
  </div>
</div>
</div>
    </div>
    <div class="content_container">
      <div class="body">
<div class="nav-container" data-component="axon-framework-reference" data-version="development">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../">Axon Framework</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../migration/">Migration Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/why-upgrade/">Why Upgrade?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/prerequisites/">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/solved-architecture-choices/">Resolved Problems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/understanding-architecture-principles/">Understanding Choices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../messaging-concepts/">Messaging Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/anatomy-message/">Anatomy of a Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/message-intercepting/">Message Intercepting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/supported-parameters-annotated-handlers/">Supported Parameters for Annotated Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/message-correlation/">Message Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/exception-handling/">Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../messaging-concepts/processing-context/">Processing Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../commands/">Commands</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/command-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/command-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commands/configuration/">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-publishing/">Publishing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/event-processors/">Event Processors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/subscribing/">Subscribing Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/streaming/">Streaming Event Processor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-processors/dead-letter-queue/">Dead-Letter Queue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../events/infrastructure/">Infrastructure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../events/event-store-internals/">Event Store Internals</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../events/event-versioning/">Versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../queries/">Queries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/query-handlers/">Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/query-dispatchers/">Dispatching</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/infrastructure/">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../queries/configuration/">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../testing/">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/basic-testing/">Basic Testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/matchers-and-field-filters/">Matchers and Field Filters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/advanced-testing/">Advanced Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="./">Conversion</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tuning/">Tuning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/event-snapshots/">Event Snapshots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/event-processing/">Event Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/command-processing/">Command Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tuning/rdbms-tuning/">Relational Databases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../monitoring/">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/tracing/">Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/metrics/">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/health/">Health Indicators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/processors/">Event Processor Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/message-tracking/">Message Tracking</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../spring-boot-integration/">Spring Boot Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../modules/">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../release-notes/">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/major-releases/">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/minor-releases/">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../known-issues-and-workarounds/">Known Issues and Workarounds</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="page_content">
        <aside class="toc sidebar" data-title="Page content" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
                <h1 class="page">Conversion</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Axon Framework requires conversion of messages when storing events, sending commands and queries over the network, or passing messages between different parts of your application.
This is handled through the <code>Converter</code> API, which provides a flexible and powerful way to transform message payloads between different formats and types.</p>
</div>
<div class="paragraph">
<p>Apart from configuration, you typically will not interact directly with the <code>Converter</code>. Axon Framework ensures the <code>Converter</code> is invoked at just the right moment in time: before entering your message handler and before exiting the application (through the network or storage layer).</p>
</div>
<div class="paragraph">
<p>If you are curious how Axon Framework does this, be sure to read the <a href="#understanding_message_types_and_conversion">following section</a>. Before checking out the <a href="#converter_implementations">converter implementations</a>, we recommend you check the <a href="#converter_types">converter types</a> section to comprehend the <code>Converter</code> layering. For configuring them, please read <a href="#configuring_converters">this</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding_message_types_and_conversion"><a class="anchor" href="#understanding_message_types_and_conversion"></a>Understanding message types and conversion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Axon Framework uses a flexible approach to message identification and conversion that decouples message identity from Java class representation.</p>
</div>
<div class="sect2">
<h3 id="_message_type_vs_java_class"><a class="anchor" href="#_message_type_vs_java_class"></a>Message type vs Java class</h3>
<div class="paragraph">
<p>Messages in Axon Framework are identified by their <code>MessageType</code> (as described in the <a href="../../5.0/messaging-concepts/anatomy-message/" class="xref page">Anatomy of a Message</a> chapter), which consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>QualifiedName</code> - The fully qualified business name of the message, consisting of:</p>
<div class="ulist">
<ul>
<li>
<p>A <code>namespace</code> (defaults to the package name of the message class)</p>
</li>
<li>
<p>A <code>name</code> (the local name, defaults to the simple class name)</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <code>version</code> - The version of the message structure (specified through annotations)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach means that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same message can be represented by different Java classes in different applications</p>
</li>
<li>
<p>Different handlers can receive the same message in different Java types</p>
</li>
<li>
<p>The Java class is one possible representation of a message, not its sole identifier</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, a message with qualified name <code>com.example.events.UserRegistered</code> and version "1.0" is the same message regardless of whether it&#8217;s represented as a <code>UserRegisteredEvent</code> class in one service or a <code>UserCreatedEvent</code> class in another, as long as both specify the same <code>MessageType</code>. When you want to learn more about how Axon resolves the <code>MessageType</code>, be sure to read <a href="../../5.0/messaging-concepts/anatomy-message/#message_type_resolution" class="xref page">this</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_payload_conversion_at_handling_time"><a class="anchor" href="#_payload_conversion_at_handling_time"></a>Payload conversion at handling time</h3>
<div class="paragraph">
<p>When Axon Framework processes messages, it converts payloads to the type expected by each handler at the moment the handler needs to process the message.</p>
</div>
<div class="paragraph">
<p>Messages retain their serialized form (such as JSON or Avro binary) along with metadata about their <code>MessageType</code>.
When a handler is ready to process a message, the framework converts the payload to the handler&#8217;s expected type.
This happens independently for each handler, meaning different handlers can receive the same message in different representations.</p>
</div>
<div class="paragraph">
<p>For example, consider an event stored as JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example.events;

@Event(name = "UserRegistered", version = "1")
// Namespace defaults to "com.example.events" (the package name)
// Full qualified name is "com.example.events.UserRegistered"
public class UserRegisteredEvent {
    private String userId;
    private String email;
    // constructors, getters...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>One event handler might process this as the full <code>UserRegisteredEvent</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventHandler <i class="conum" data-value="1"></i><b>(1)</b>
public void on(UserRegisteredEvent event) {
    // Receives the full object
    userRepository.save(new User(event.getUserId(), event.getEmail()));
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@EventHandler</code> annotation doesn&#8217;t need to specify the event name, since the <code>UserRegisteredEvent</code> is annotated with <code>@Event</code> and contains the message type information.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>While another handler might only need it as JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventHandler(eventName = "com.example.events.UserRegistered") <i class="conum" data-value="1"></i><b>(1)</b>
public void on(JsonNode event) {
    // Receives the same event as a JsonNode
    // Must use the fully qualified name (namespace + name)
    String userId = event.get("userId").asText();
    // Process using JSON directly
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both handlers process the same event, but each receives it in the format most convenient for their needs.
The conversion happens automatically based on the handler&#8217;s parameter type.</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>when using a generic type like <code>JsonNode</code>, you must specify the <code>eventName</code> attribute with the fully qualified name (namespace and local name) to indicate which event the handler processes.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This approach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reduces the need for upcasters in many scenarios.</p>
</li>
<li>
<p>Allows gradual migration when message structures change.</p>
</li>
<li>
<p>Enables different services to use different Java representations.</p>
</li>
<li>
<p>Simplifies integration with external systems that may expect different formats.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="converter_types"><a class="anchor" href="#converter_types"></a>Converter types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Axon Framework uses a hierarchy of converters to handle different conversion needs. The lowest level is the so-called <a href="#general_converter">general converter</a>. From there, it moves to the more specific <a href="#message_converter">message converter</a>, and ends with the <a href="#event_converter">event converter</a>.</p>
</div>
<div class="sect2">
<h3 id="general_converter"><a class="anchor" href="#general_converter"></a>General converter</h3>
<div class="paragraph">
<p>The <code>Converter</code> interface is the foundation for all conversion in Axon Framework.
It provides methods to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check if conversion between two types is possible (<code>canConvert</code>)</p>
</li>
<li>
<p>Convert an object from one type to another (<code>convert</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations as described in more detail in the <a href="#converter_implementations">Converter implementations</a> section handle the actual conversion logic. We call this instance the general converter, is it is generally used for all non-<code>Message</code> components.</p>
</div>
</div>
<div class="sect2">
<h3 id="message_converter"><a class="anchor" href="#message_converter"></a>Message converter</h3>
<div class="paragraph">
<p>The <code>MessageConverter</code> is a specialized converter for converting <code>Message</code> payloads.
It operates on <code>Message</code> objects and provides methods to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert a message&#8217;s payload to a different type (<code>convertPayload</code>).</p>
</li>
<li>
<p>Create a new message with a converted payload (<code>convertMessage</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This converter is used for all command and query messages.</p>
</div>
</div>
<div class="sect2">
<h3 id="event_converter"><a class="anchor" href="#event_converter"></a>Event converter</h3>
<div class="paragraph">
<p>The <code>EventConverter</code> is specifically designed for event messages.
It extends the conversion concept to work with <code>EventMessage</code> objects and provides methods to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert an event&#8217;s payload to a different type (<code>convertPayload</code>)</p>
</li>
<li>
<p>Create a new event message with a converted payload (<code>convertEvent</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This converter is used by the event store and event processors.</p>
</div>
</div>
<div class="sect2">
<h3 id="converter_configuration_levels"><a class="anchor" href="#converter_configuration_levels"></a>Converter configuration levels</h3>
<div class="paragraph">
<p>Axon Framework allows you to configure converters at three levels:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>general</strong> - Used for everything that needs to be converted, unless specified by other levels.</p>
</li>
<li>
<p><strong>messages</strong> - Used to convert all command and query messages (uses <code>MessageConverter</code>).</p>
</li>
<li>
<p><strong>events</strong> - Used to convert all event messages (uses <code>EventConverter</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There is an implicit ordering: if no event converter is configured, the message converter is used.
If no message converter is configured, the general converter is used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="converter_implementations"><a class="anchor" href="#converter_implementations"></a>Converter implementations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Axon Framework provides several converter implementations.
When deciding which converter to use for your application, consider:</p>
</div>
<div class="paragraph">
<p><strong>Use JacksonConverter when:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You need human-readable serialized formats for debugging</p>
</li>
<li>
<p>Interoperability with non-JVM systems is important</p>
</li>
<li>
<p>You want a widely supported, standard JSON format</p>
</li>
<li>
<p>You need flexibility in schema evolution</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Use AvroConverter when:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Storage space is a critical concern</p>
</li>
<li>
<p>You want schema enforcement and strong type safety</p>
</li>
<li>
<p>Your organization uses a schema registry</p>
</li>
<li>
<p>You need the best performance for high-throughput scenarios</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Use JacksonConverter with XmlMapper when:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must maintain XML format for legacy reasons</p>
</li>
<li>
<p>External systems require XML</p>
</li>
<li>
<p>You&#8217;re migrating from XStream and need XML compatibility</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>For most new applications, the default JacksonConverter with JSON format is the recommended choice.</strong>
It provides the best balance of features, performance, and maintainability.</p>
</div>
<div class="sect2">
<h3 id="_jacksonconverter_default"><a class="anchor" href="#_jacksonconverter_default"></a>JacksonConverter (default)</h3>
<div class="paragraph">
<p>The <code>JacksonConverter</code> is the default converter in Axon Framework.
It uses <a href="https://github.com/FasterXML/jackson">Jackson</a> to convert objects to and from JSON format.</p>
</div>
<div class="paragraph">
<p>Jackson produces a compact serialized form and is widely supported across different platforms and languages.
This makes it ideal for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Storing events in an event store.</p>
</li>
<li>
<p>Sending commands and queries over the network.</p>
</li>
<li>
<p>Integration with external systems.</p>
</li>
<li>
<p>Long-term storage of events.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>JacksonConverter</code> uses a default <code>ObjectMapper</code> configuration. You are free to customize it when required:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Converter customJacksonConverter() {
    ObjectMapper customMapper = new ObjectMapper()
            .findAndRegisterModules()
            .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);

    return new JacksonConverter(customMapper);
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_xml_support"><a class="anchor" href="#_xml_support"></a>XML support</h4>
<div class="paragraph">
<p>If you need to serialize to XML format instead of JSON, you can configure the <code>JacksonConverter</code> with an <code>XmlMapper</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Converter xmlBasedJacksonConverter() {
    XmlMapper xmlMapper = new XmlMapper();
    xmlMapper.findAndRegisterModules();

    return new JacksonConverter(xmlMapper);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll need to add the <code>jackson-dataformat-xml</code> dependency to your project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_avroconverter"><a class="anchor" href="#_avroconverter"></a>AvroConverter</h3>
<div class="paragraph">
<p>The <code>AvroConverter</code> uses <a href="https://avro.apache.org/">Apache Avro</a> to serialize objects to and from <a href="https://avro.apache.org/docs/1.12.0/specification/#binary-encoding">binary single-object-encoded format</a>.</p>
</div>
<div class="paragraph">
<p>Avro provides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Compact binary format.</p>
</li>
<li>
<p>Schema-based serialization with strong type safety.</p>
</li>
<li>
<p>Schema evolution support.</p>
</li>
<li>
<p>Excellent performance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>AvroConverter</code> is designed to serve as a message and event converter <strong>only</strong>. Hence, it is not applicable as the <a href="#general_converter">general converter</a>.</p>
</div>
<div class="paragraph">
<p>To use Avro, you need to configure a <code>SchemaStore</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Converter buildAvroConverter(SchemaStore schemaStore) {
    return new AvroConverter(
            schemaStore,
            config -&gt; config  // Customize configuration here
    );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Avro converter requires a <code>SchemaStore</code> to resolve schemas for all messages being processed.
In Spring Boot applications, the auto-configuration can create a schema store that scans the classpath for schemas using the <code>@AvroSchemaScan</code> annotation. When not using Spring, you will be inclined to construct and configure the <code>SchemaStore</code> yourself.</p>
</div>
<div class="paragraph">
<p>For production use with multiple services, consider implementing a custom <code>SchemaStore</code> that connects to a central schema registry.
We doing so, be sure to implement caching to maintain performance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_converters"><a class="anchor" href="#_custom_converters"></a>Custom converters</h3>
<div class="paragraph">
<p>You can implement your own converter by implementing the <code>Converter</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyCustomConverter implements Converter {

    @Override
    public boolean canConvert(Type sourceType, Type targetType) {
        // Determine if conversion is possible
        return /* ... */;
    }

    @Override
    public &lt;T&gt; T convert(Object input, Type targetType) {
        // Perform the conversion
        return /* ... */;
    }

    @Override
    public void describeTo(@Nonnull ComponentDescriptor descriptor) {
        descriptor.describeProperty("someCustomProperty", "SomeValue");
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring_converters"><a class="anchor" href="#configuring_converters"></a>Configuring converters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_plain_java_configuration"><a class="anchor" href="#_plain_java_configuration"></a>Plain Java configuration</h3>
<div class="paragraph">
<p>To configure converters, use the <code>MessagingConfigurer</code> and register components through the component registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.axonframework.conversion.Converter;
import org.axonframework.conversion.json.JacksonConverter;
import org.axonframework.messaging.core.configuration.MessagingConfigurer;
import org.axonframework.messaging.core.conversion.DelegatingMessageConverter;
import org.axonframework.messaging.core.conversion.MessageConverter;
import org.axonframework.messaging.eventhandling.conversion.DelegatingEventConverter;
import org.axonframework.messaging.eventhandling.conversion.EventConverter;

class AxonConfig {

    public void converterConfiguration(MessagingConfigurer configurer) {
        // Register the base converter
        configurer.componentRegistry(cr -&gt; cr.registerComponent(
                          Converter.class,
                          config -&gt; new JacksonConverter()
                  ))
                  // Register the message converter (wraps the base converter)
                  .componentRegistry(cr -&gt; cr.registerComponent(
                          MessageConverter.class,
                          config -&gt; new DelegatingMessageConverter(config.getComponent(Converter.class))
                  ))
                  // Register the event converter (wraps the message converter)
                  .componentRegistry(cr -&gt; cr.registerComponent(
                          EventConverter.class,
                          config -&gt; new DelegatingEventConverter(config.getComponent(MessageConverter.class))
                  ));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If you don&#8217;t explicitly configure converters, Axon Framework automatically registers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>JacksonConverter</code> as the default <code>Converter</code></p>
</li>
<li>
<p>A <code>DelegatingMessageConverter</code> wrapping the <code>Converter</code></p>
</li>
<li>
<p>A <code>DelegatingEventConverter</code> wrapping the <code>MessageConverter</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_spring_boot_configuration"><a class="anchor" href="#_spring_boot_configuration"></a>Spring Boot configuration</h3>
<div class="paragraph">
<p>In Spring environments, there are a number of ways to configure Axon&#8217;s <code>Converters</code>:</p>
</div>
<div class="sect3">
<h4 id="_using_java_configuration"><a class="anchor" href="#_using_java_configuration"></a>Using Java configuration</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class ConverterConfiguration {

   @Bean
   public Converter converter() {
      return new JacksonConverter();
   }

   @Bean
   public MessageConverter messageConverter(Converter converter) {
      return new DelegatingMessageConverter(converter);
   }

   @Bean
   public EventConverter eventConverter(MessageConverter messageConverter) {
      return new DelegatingEventConverter(messageConverter);
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_application_properties"><a class="anchor" href="#_using_application_properties"></a>Using application properties</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Possible values: 'default', 'java', 'jackson'
# 'avro' can be used for 'events' and 'messages' only
axon.converter.general=jackson
axon.converter.messages=jackson
axon.converter.events=jackson</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_yaml_configuration"><a class="anchor" href="#_using_yaml_configuration"></a>Using YAML configuration</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># Possible values: 'default', 'java', 'jackson'
# 'avro' can be used for 'events' and 'messages' only
axon:
  converter:
    general: jackson
    events: jackson
    messages: jackson</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_avro_for_events"><a class="anchor" href="#_using_avro_for_events"></a>Using Avro for events</h3>
<div class="paragraph">
<p>To use Avro for events while keeping Jackson for other messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.apache.avro.message.SchemaStore;
import org.axonframework.conversion.avro.AvroConverter;
import org.axonframework.messaging.core.configuration.MessagingConfigurer;
import org.axonframework.messaging.eventhandling.conversion.DelegatingEventConverter;
import org.axonframework.messaging.eventhandling.conversion.EventConverter;

class AxonConfig {

    public void configureAvroConverterForEvents(MessagingConfigurer configurer,
                                                SchemaStore schemaStore) {
        // Use Avro for event conversion
        configurer.componentRegistry(cr -&gt; cr.registerComponent(
                EventConverter.class,
                config -&gt; {
                    AvroConverter avroConverter = new AvroConverter(
                            schemaStore,
                            cfg -&gt; cfg  // Customize configuration
                    );
                    return new DelegatingEventConverter(avroConverter);
                }
        ));
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_converter_tuning"><a class="anchor" href="#_converter_tuning"></a>Converter tuning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Several considerations can help optimize the conversion process.</p>
</div>
<div class="sect2">
<h3 id="_lenient_deserialization"><a class="anchor" href="#_lenient_deserialization"></a>Lenient deserialization</h3>
<div class="paragraph">
<p>Lenient deserialization allows converters to ignore unknown properties when converting from a serialized format.
This is helpful when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Event structures have evolved and older events contain fields that no longer exist</p>
</li>
<li>
<p>Different versions of an application are running concurrently</p>
</li>
<li>
<p>Using rolling deployments where old and new message formats coexist temporarily</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both <code>JacksonConverter</code> and <code>AvroConverter</code> support lenient deserialization.</p>
</div>
<div class="sect3">
<h4 id="_jacksonconverter"><a class="anchor" href="#_jacksonconverter"></a>JacksonConverter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ConverterConfiguration {

    public Converter buildConverter() {
        return new JacksonConverter(new ObjectMapper()
            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)
            .findAndRegisterModules());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_avroconverter_2"><a class="anchor" href="#_avroconverter_2"></a>AvroConverter</h4>
<div class="paragraph">
<p>Apache Avro addresses compatibility between schema versions through its built-in schema resolution.
By design, Avro is highly permissive to schema additions, so no additional configuration is needed for lenient deserialization.
Just ensure your schema changes follow Avro&#8217;s compatibility rules.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generic_types"><a class="anchor" href="#_generic_types"></a>Generic types</h3>
<div class="paragraph">
<p>When serializing objects that contain lists or collections, you may encounter issues with generic type information.</p>
</div>
<div class="paragraph">
<p>Jackson requires type information to correctly deserialize generic collections.
The recommended approach is to use the <code>@JsonTypeInfo</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyEvent {
    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS)
    private List&lt;Item&gt; items;
    // constructors, getters, setters...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can configure the <code>ObjectMapper</code> to enable default typing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ObjectMapper mapper = new ObjectMapper()
    .activateDefaultTyping(
        BasicPolymorphicTypeValidator.builder()
            .allowIfBaseType(Object.class)
            .build(),
        ObjectMapper.DefaultTyping.NON_FINAL,
        JsonTypeInfo.As.PROPERTY
    );

JacksonConverter converter = new JacksonConverter(mapper);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Be aware of the security implications of enabling default typing, as described in Jackson&#8217;s <a href="https://github.com/FasterXML/jackson-docs/wiki/JacksonPolymorphicDeserialization">Polymorphic Deserialization</a> documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_content_type_converters"><a class="anchor" href="#_content_type_converters"></a>Content type converters</h3>
<div class="paragraph">
<p>A Converter supports certain content types to start conversion to its target type.
To provide flexibility converters, Axon will automatically convert between content types by using a <code>ContentTypeConverter</code>.</p>
</div>
<div class="paragraph">
<p>The framework searches for the shortest conversion path from type X to type Y, performs the conversion, and passes the converted value to the requesting converter.</p>
</div>
<div class="paragraph">
<p>The available <code>ContentTypeConverter</code> instances depend on the converter you&#8217;re using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JacksonConverter</strong> supports conversion to and from <code>JsonNode</code> and <code>ObjectNode</code></p>
</li>
<li>
<p><strong>AvroConverter</strong> supports conversion to and from <code>GenericRecord</code></p>
</li>
<li>
<p>All converters support generic conversions like <code>String</code> to <code>byte[]</code> and <code>byte[]</code> to <code>InputStream</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_custom_content_type_converters"><a class="anchor" href="#_custom_content_type_converters"></a>Custom content type converters</h4>
<div class="paragraph">
<p>If Axon doesn&#8217;t provide the content type conversion you need, implement the <code>ContentTypeConverter</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyContentTypeConverter implements ContentTypeConverter&lt;MySourceType, MyTargetType&gt; {

    @Override
    public Class&lt;MySourceType&gt; expectedSourceType() {
        return MySourceType.class;
    }

    @Override
    public Class&lt;MyTargetType&gt; targetType() {
        return MyTargetType.class;
    }

    @Override
    public MyTargetType convert(MySourceType original) {
        // Perform conversion
        return /* ... */;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Register your custom content type converter with your main converter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Converter converterWithCustomContentTypeConverter() {
    ChainingContentTypeConverter contentTypeConverter = new ChainingContentTypeConverter();
    contentTypeConverter.registerConverter(new MyContentTypeConverter());

    return new JacksonConverter(new ObjectMapper(), contentTypeConverter);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../testing/advanced-testing/">Advanced Testing</a></span>
  <span class="next"><a href="../tuning/">Tuning</a></span>
</nav>
    </article>
  </div>
</main>
</div>
      <footer class="footer">
  <div class="secondary-footer">
    <p>Copyright © 2025 AxonIQ BV. All Rights Reserved</p>
    <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=e0b2b5cb-139e-4753-acab-bae43f90c5d3" />
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
    </div>
  </body>
</html>
