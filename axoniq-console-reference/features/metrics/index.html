<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Framework Metrics</title>
    <link rel="canonical" href="https://docs.axoniq.io/axoniq-console-reference/features/metrics/">
    <link rel="prev" href="../">
    <link rel="next" href="../monitoring/">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <link rel="icon" href="../../../_/img/favicon.ico" sizes="32x32">
    <link rel="icon" href="../../../_/img/icon.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <link rel="icon" href="../../../_/img/icon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="../../../_/img/apple-touch-icon.png"><!-- 180Ã—180 -->
    <link rel="manifest" href="../../../_/static/manifest.webmanifest">
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QD58ZB');</script>
        <!-- End Google Tag Manager -->

    <script>var uiRootPath = '../../../_'</script>


  </head>
  <body class="article">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QD58ZB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.axoniq.io"><img src="../../../_/img/logo-dark4x.png" class="header_logo" /></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../../home/basics/">Basics</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/guides/">Guides</a>
          <div class="navbar-dropdown card">
            <a class="navbar-item" href="../../../home/guides/axon-framework">Axon Framework</a>
            <a class="navbar-item" href="../../../home/guides/axon-server">Axon Server</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="../../../home/reference/">Reference</a>
          <div class="navbar-dropdown card">
                <a class="navbar-item" href="../../../axon-framework-reference/development/">Axon Framework</a>
                <a class="navbar-item" href="../../../axon-framework-extensions/">Axon Framework Extensions</a>
                <a class="navbar-item" href="../../../axon-server-reference/v2024.2/">Axon Server</a>
                <a class="navbar-item" href="../../../synapse-reference/v0.11/">Axon Synapse</a>
                <a class="navbar-item" href="../../">AxonIQ Console</a>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search AxonIQ Docs">
          </div>
        </div>
        <a class="navbar-item navbar-button" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item navbar-button" href="https://discuss.axoniq.io" target="_blank">AxonIQ Discuss</a>
        <a class="navbar-item navbar-button" href="https://console.axoniq.io" target="_blank">AxonIQ Console</a>
      </div>
    </div>
  </nav>
</header>
<div class="toolbar card" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">AxonIQ Console Reference</a></li>
    <li><a href="../">Features</a></li>
    <li><a href="./">Framework Metrics</a></li>
  </ul>
</nav>
<div class="page-actions">
  <button class="actions-menu-toggle" title="Show actions related to this page">Actions</button>
  <div class="actions-menu toolbar_dropdown_menu card">

    <a class="action item" href="https://discuss.axoniq.io/search?q&#x3D;Framework%20Metrics" target="discuss_search">View Discussions</a>
    <a class="action item" href="https://discuss.axoniq.io/new-topic?category&#x3D;library&amp;title&#x3D;%22Framework%20Metrics%22%20Discussion&amp;body&#x3D;%3C!--%20Replace%20this%20comment%20with%20your%20comment%2Fsuggestion%2Fquestion%2F...%20--%3E%0A%0A%0A%3C!--%0AKeep%20the%20section%20below!%0ALinking%20back%20to%20the%20documentation%20URL%20not%20only%20helps%20people%20go%20to%20the%20page%0Abut%20also%20helps%20find%20relevant%20discussions%20from%20the%20documentation%20page%20via%20the%20%22View%20Discussion%22%20menu.%0A--%3E%0A%5Bdetails%3D%22Related%20library%20page%22%5D%0A%5BFramework%20Metrics%5D(https%3A%2F%2Fdocs.axoniq.io%2Faxoniq-console-reference%2Ffeatures%2Fmetrics%2F)%0A%5B%2Fdetails%5D%0A" target="discuss_add">Start new discussion</a>
  </div>
</div>


</div>
<div class="body">
<div class="nav-container" data-component="axoniq-console-reference" data-version="">
    <aside class="nav card">
      <div class="panels">
        <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../">AxonIQ Console</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Features</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Framework Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../monitoring/">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/">Processor Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dlq/">Dead-Letter Queues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../automatic-clustering/">Automatic Clustering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../license-rotation/">License Rotation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../environments/">Workspaces and Environments</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../environments/roles/">AxonIQ Console Roles</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../subscriptions/">Subscriptions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../billing/">Billing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/">Clients and Connectors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../connectors/axon-framework/">Axon Framework</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../connectors/axon-framework-metrics/">Metric Collection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../connectors/axon-framework-operations/">Operations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../connectors/axon-server/">Axon Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      </div>
    </aside>
</div>
<main class="article">
    <div class="content">
        <aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
          <article class="doc">
            <h1 class="page">Framework Metrics</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>AxonIQ Console gathers metrics on your Axon Framework applications.
These metrics provide information about the performance of your applications and potential problems.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_measurements_timers"><a class="anchor" href="#_measurements_timers"></a>Measurements: Timers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All metrics that gather times are measured in milliseconds.
AxonIQ Console measures the minimum, median, ninetieth percentile, and maximum values for these metrics.
When looking at these values, it&#8217;s important to look at the ninetieth percentile, as this value is the value that 90% of the measurements are below.
This gives you a good indication of the performance of your application.
You can see an example below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/metrics-timer.png" alt="Example of a timer graph in AxonIQ Console" width="100%">
</div>
</div>
<div class="paragraph">
<p>Individual measurements of timers count toward their percentiles for 5 minutes, after which they expire and no longer count toward the percentiles.
This means that the percentiles are always based on the last 5 minutes of data.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_measurements_rates"><a class="anchor" href="#_measurements_rates"></a>Measurements: Rates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All metrics that gather rates are measured in counts per minute.
Only the items counted in the last 10 seconds are counted toward the rate.
This means that the rate is always based on the last 10 seconds of data, multiplied by 6 to get a rate per minute.
You can see an example below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/metrics-rate.png" alt="Example of a rate graph in AxonIQ Console" width="100%">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="event_processors_metrics"><a class="anchor" href="#event_processors_metrics"></a>Event processors metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Event processors metrics provide information about the status of your event processors.
You can see an example below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/metrics-processors.png" alt="Example of a event processor graph in AxonIQ Console" width="100%">
</div>
</div>
<div class="paragraph">
<p>The <strong>Segment claim Percentage</strong> shows the percentage of segments claimed by the event processor.
This should, under normal situations, always be 100%.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the segment claim percentage is lower than 100%, it means that some segments are not claimed by the event processor and a part of your event processing is not happening.</p>
</div>
<div class="paragraph">
<p>However, if it&#8217;s higher than 100%, this means you either have an <a href="../../../axon-framework-reference/development/events/event-processors/streaming/#token-store" class="xref page">in-memory token store</a> configured (which can be a valid use-case to process all events on all application instances), or your applications are <a href="../../../axon-framework-reference/development/events/event-processors/streaming/#token-stealing" class="xref page">stealing tokens from each other</a> because the work in a batch takes longer than the configured claim timeout of the token store.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <strong>Ingest latency and Commit latency</strong> metrics indicate the amount of time that passes between the publishing of an event and the processing of that event by the event processor.
The ingest latency is the time between the publication of the event and the moment it is available for processing.
The commit latency is the time between the moment the event is processed and the moment the event processor commits the processing of the event.</p>
</div>
<div class="paragraph">
<p>The <strong>Nodes</strong> graph shows the number of nodes currently online that are reporting to have this event processor in their configuration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="handler_metrics"><a class="anchor" href="#handler_metrics"></a>Handler metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Handler metrics provide information about the performance of your handlers.
You can see an example below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/metrics-handlers.png" alt="Example of a handler graph in AxonIQ Console" width="100%">
</div>
</div>
<div class="paragraph">
<p>The <strong>Overview</strong> graph shows a breakdown of the time spent on processing the messages by the handler.
The time not accounted for is "Overhead," which is time spent outside specific measurements.
This can be due to Garbage Collection, I/O, or other system activities.</p>
</div>
<div class="paragraph">
<p>The <strong>Message Rate</strong> shows the number of messages processed by the aggregate per second.
It also shows the number of failed messages per second.</p>
</div>
<div class="paragraph">
<p>The <strong>Total Time</strong> shows the total time spent processing the message by the handler.
This metric can vary based on the type of handler.
For example, for aggregates it includes the loading of the aggregate from the event store, the processing of the command, and the committing of the events to the event store.</p>
</div>
<div class="paragraph">
<p>The <strong>Handler Time</strong> shows the time spent in your handler code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="aggregate_metrics"><a class="anchor" href="#aggregate_metrics"></a>Aggregate metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Aggregate metrics provide information about the performance of your aggregates.
As aggregates handle messages, they have the same metrics as Handlers.
In addition, they have several special metrics.
You can see an example below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/metrics-aggregate.png" alt="Example of an aggregate graph in AxonIQ Console" width="100%">
</div>
</div>
<div class="paragraph">
<p>The <strong>Lock Time</strong> shows the time spent acquiring the lock on the aggregate.
This is the time spent waiting for the lock to be available.
As aggregates can only handle one command at a time, it is essential to keep this time as low as possible.
High values here can indicate a slow event store, long-running actions in the aggregate, or a high contention on the aggregate.</p>
</div>
<div class="paragraph">
<p>The <strong>Load Time</strong> shows the time spent loading the aggregate from the event store.
This is the time spent reading the events from the event store and applying them to the aggregate.
This time includes the time spent acquiring the lock on the aggregate as well.</p>
</div>
<div class="paragraph">
<p>The <strong>Event Store Commit Time</strong> shows the time spent committing the events to the event store.
This is the time spent writing the events to the event store.
High values here can indicate a slow event store.</p>
</div>
<div class="paragraph">
<p>The <strong>EventStream Size</strong> shows the number of events that need to be read from the event store to load the aggregate.
As the stream can grow over time, it&#8217;s important to consider enabling snapshots to reduce the number of events that need to be read.
Generally, we recommend keeping this number below 250 events.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="applications_metrics"><a class="anchor" href="#applications_metrics"></a>Applications metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Application metrics provide information about the performance of your application.
This includes information about the memory usage, garbage collection, and threads.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/metrics-applications.png" alt="Example of application graphs in AxonIQ Console" width="100%">
</div>
</div>
<div class="paragraph">
<p>The <strong>Process CPU Usage</strong> shows the percentage of CPU used by the JVM process.
Regardless of the number of cores, this number will always be between 0 and 100%.</p>
</div>
<div class="paragraph">
<p>The <strong>System CPU Usage</strong> shows the percentage of CPU used by the system.
This includes all processes running on the system.</p>
</div>
<div class="paragraph">
<p>The <strong>Heap Usage</strong> shows the memory usage of the JVM.
The JVM has a heap where all objects are stored.
This graph shows the usage of this heap.
A rising percentage without a drop can indicate a memory leak.
A high percentage can indicate that the JVM is running out of memory.
JVMs commit memory as needed, allowing three 8 GB Java applications on an 8 GB system.
As such, the reported free memory might not be available once needed.
Make sure to monitor the memory usage of the system as well, or you might run into issues.</p>
</div>
<div class="paragraph">
<p>The <strong>CommandBus Capacity</strong> shows the percentage of the current CommandBus-threads being used over time.
This can be used to determine if the CommandBus is able to keep up with the incoming commands.
If this number is consistently high, you may need to increase the number of threads in the CommandBus.
Note that this only applies to the AxonServerCommandBus.</p>
</div>
<div class="paragraph">
<p>The <strong>QueryBus Capacity</strong> shows the percentage of the current QueryBus-threads being used over time.
This can be used to determine if the QueryBus is able to keep up with the incoming queries.
If this number is consistently high, you may need to increase the number of threads in the QueryBus.
Note that this only applies to the AxonServerQueryBus.</p>
</div>
<div class="paragraph">
<p>The <strong>Live Thread Count</strong> shows the number of live threads in the JVM.
This includes all threads: the main thread, the garbage collector threads, and the threads used by the application.
A high number of threads can indicate a problem in the application.</p>
</div>
<div class="paragraph">
<p>The <strong>System Load</strong> shows the system load of the system.
This is the number of processes that are waiting for CPU time.
This number is divided by the number of cores in the system.
A system load of 1 means that there is one process waiting for CPU time.
A system load of 2 means that there are two processes waiting for CPU time.
A system load of 8 on an 8-core system means that all cores are busy.</p>
</div>
<div class="paragraph">
<p>The <strong>Nodes</strong> graph shows the number of nodes currently online.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_correlation"><a class="anchor" href="#_correlation"></a>Correlation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AxonIQ Console always tries to show you the most relevant information.
When you view the metrics of the handler of an event processor, we will also show the metrics of that event processor itself, and the application.
This way you can easily correlate problems in your application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/metrics-combined.png" alt="Example of combined metrics in AxonIQ Console" width="100%">
</div>
</div>
<div class="paragraph">
<p>The AxonIQ Console will do this as well in the following situations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When viewing the metrics of an event processor, we will show the metrics of the application and the event processor.</p>
</li>
<li>
<p>When viewing the metrics of an aggregate, we will show the metrics of the application and the aggregate.</p>
</li>
<li>
<p>When viewing the metrics of a handler, we will show the metrics of the application and the handler, as well as aggregate metrics if the handler is part of an aggregate, or event processor metrics if the handler is part of an event processor.</p>
</li>
</ul>
</div>
</div>
</div>
        <nav class="pagination">
  <span class="prev"><a href="../">Features</a></span>
  <span class="next"><a href="../monitoring/">Monitoring</a></span>
</nav>
    </article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-framework">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-server">Axon Server</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-cloud">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axoniq-console">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/products/axon-synapse">Axon Synapse</a></li>
          <li><a class="ext" target="_blank" href="https://www.axoniq.io/blog/protect-sensitive-data-in-an-event-sourced-application">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/">Customer Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://console.axoniq.io/">AxonIQ Console</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://axoniq.bsky.social/">Bluesky</a></li>
          <li><a class="ext" target="_blank" href="https://www.instagram.com/axoniq/">Instagram</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/page-actions.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab" data-sync-storage-scope="session"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
