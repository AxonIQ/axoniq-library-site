<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Event Processors :: ðŸ“š AxonIQ Library</title>
    <link rel="prev" href="../event-handlers.html">
    <link rel="next" href="subscribing.html">
    <meta name="generator" content="Antora 3.1.1">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../..">ðŸ“š AxonIQ Library</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Explanations</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../../../../concepts/index.html">Software Development Concepts</a>
                <a class="navbar-item" href="../../../../../understanding-axon/index.html">Understanding Axon</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">References</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../../../../axon_framework_ref/4.6/index.html">Axon Framework</a>
                <a class="navbar-item" href="../../../README.html">Axon Legacy Reference Guide</a>
                <a class="navbar-item" href="../../../../../axon_server_ref/4.6/index.html">Axon Server</a>
                <a class="navbar-item" href="../../../../../axoniq_cloud_ref/latest/index.html">AxonIQ Cloud</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Tutorials</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../../../../giftcard/4.6/index.html">Axon Framework - from design to deployment</a>
                <a class="navbar-item" href="../../../../../as_admin/index.html">Axon Server Administration</a>
                <a class="navbar-item" href="../../../../../af_customization/4.6/index.html">Customizing Axon Framework</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">How-to guides</a>
          <div class="navbar-dropdown">
                <a class="navbar-item" href="../../../../../ac_howtos/latest/index.html">AxonIQ Cloud Console How-to Guides</a>
          </div>
        </div>
        <a class="navbar-item" href="https://academy.axoniq.io" target="_blank">AxonIQ Academy</a>
        <a class="navbar-item" href="https://discuss.axoniq.io" target="_blank">Discuss</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="lagacy_ref_gute" data-version="4.6">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../README.html">Axon Legacy Reference Guide</a></h3>

<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../README.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../architecture-overview/README.html">Architecture Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../architecture-overview/ddd-cqrs-concepts.html">DDD &amp; CQRS Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../architecture-overview/event-sourcing.html">Event Sourcing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../architecture-overview/event-driven-microservices.html">Event-Driven Microservices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../axon-server-introduction.html">Axon Server</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/README.html">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-axon-framework/README.html">Axon Framework</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/rn-axon-framework/rn-af-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/rn-axon-framework/rn-af-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-axon-server/README.html">Axon Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/rn-axon-server/rn-as-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/rn-axon-server/rn-asse-minor-releases.html">Minor Releases Standard Edition</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/rn-axon-server/rn-as-minor-releases.html">Minor Releases Enterprise Edition</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/README.html">Axon Framework Extensions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-amqp/README.html">AMQP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-amqp/rn-amqp-major-releases.html">Major Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-cdi/README.html">CDI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-cdi/rn-cdi-major-releases.html">Major Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-jgroups/README.html">JGroups</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-jgroups/rn-jgroups-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-jgroups/rn-jgroups-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-kafka/README.html">Kafka</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-kafka/rn-kafka-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-kafka/rn-kafka-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-kotlin/README.html">Kotlin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-kotlin/rn-kotlin-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-kotlin/rn-kotlin-experimental-releases.html">Experimental Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-mongo/README.html">Mongo</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-mongo/rn-mongo-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-mongo/rn-mongo-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-multi-tenancy/README.html">Multi-Tenancy</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-multi-tenancy/rn-multi-tenancy-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-multi-tenancy/rn-multi-tenancy-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-reactor/README.html">Reactor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-reactor/rn-reactor-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-reactor/rn-reactor-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-spring-native/README.html">Spring-Native Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-spring-native/rn-spring-native-experimental-releases.html">Experimental Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-springcloud/README.html">Spring Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-springcloud/rn-springcloud-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-springcloud/rn-springcloud-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-tracing/README.html">Tracing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-tracing/rn-tracing-major-releases.html">Major Releases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../release-notes/rn-extensions/rn-tracing/rn-tracing-minor-releases.html">Minor Releases</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../getting-started/quick-start.html">Quick Start</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Axon Framework</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../messaging-concepts/README.html">Messaging Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/anatomy-message.html">Anatomy of a Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/message-correlation.html">Message Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/message-intercepting.html">Message Intercepting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/supported-parameters-annotated-handlers.html">Supported Parameters for Annotated Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/exception-handling.html">Exception Handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging-concepts/unit-of-work.html">Unit of Work</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../axon-framework-commands/README.html">Commands</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../axon-framework-commands/modeling/README.html">Modeling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../axon-framework-commands/modeling/aggregate.html">Aggregate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../axon-framework-commands/modeling/multi-entity-aggregates.html">Multi-Entity Aggregates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../axon-framework-commands/modeling/state-stored-aggregates.html">State Stored Aggregates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../axon-framework-commands/modeling/aggregate-creation-from-another-aggregate.html">Aggregate Creation from another Aggregate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../axon-framework-commands/modeling/aggregate-polymorphism.html">Aggregate Polymorphism</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../axon-framework-commands/modeling/conflict-resolution.html">Conflict Resolution</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../axon-framework-commands/command-dispatchers.html">Command Dispatchers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../axon-framework-commands/command-handlers.html">Command Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../axon-framework-commands/infrastructure.html">Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../axon-framework-commands/configuration.html">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../README.html">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-dispatchers.html">Event Dispatchers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-handlers.html">Event Handlers</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="README.html">Event Processors</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="subscribing.html">Subscribing Event Processors</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="streaming.html">Streaming Event Processors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-bus-and-event-store.html">Event Bus &amp; Event Store</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../event-versioning.html">Event Versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../queries/README.html">Queries</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/query-processing.html">Query Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/query-dispatchers.html">Query Dispatchers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/query-handlers.html">Query Handlers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/implementations.html">Implementations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../queries/configuration.html">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../sagas/README.html">Sagas</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../sagas/implementation.html">Implementation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../sagas/associations.html">Associations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../sagas/infrastructure.html">Infrastructure</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../deadlines/README.html">Deadlines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../deadlines/deadline-managers.html">Deadline Managers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../deadlines/event-schedulers.html">Event Schedulers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../testing/README.html">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/commands-events.html">Commands / Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/sagas-1.html">Sagas</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../serialization.html">Serialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../tuning/README.html">Tuning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/event-snapshots.html">Event Snapshots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/event-processing.html">Event Processing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tuning/command-processing.html">Command Processing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../monitoring/README.html">Monitoring and Metrics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/tracing.html">Distributed Tracing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/metrics.html">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/health.html">Health Indicators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/processors.html">Event Tracker Status</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../monitoring/message-tracking.html">Message Tracking</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../spring-boot-integration.html">Spring Boot Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../modules.html">Modules</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Axon Server</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../axon-server/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/installation/README.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/installation/local-installation/README.html">Local Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/installation/local-installation/axon-server-se.html">Axon Server SE</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/installation/local-installation/axon-server-ee.html">Axon Server EE</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/installation/docker-k8s/README.html">Docker / K8s</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/installation/docker-k8s/axon-server-se.html">Axon Server SE</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/installation/docker-k8s/axon-server-ee.html">Axon Server EE</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/administration/README.html">Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/administration/admin-configuration/README.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/admin-configuration/configuration.html">System Properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/admin-configuration/command-line-interface.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/admin-configuration/rest-api.html">REST API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/admin-configuration/grpc-api.html">GRPC API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/administration/monitoring/README.html">Monitoring</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/monitoring/actuator-endpoints.html">Actuator Endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/monitoring/grpc-metrics.html">gRPC Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/monitoring/heartbeat-monitoring.html">Heartbeat Monitoring</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/clustering.html">Clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/replication-groups.html">Replication Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/multi-context.html">Multi-Context</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/tagging.html">Tagging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/backup-and-messaging-only-nodes.html">Backup and Messaging-only Nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/backups.html">Backups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/recovery.html">Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/administration/logging/README.html">Logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../axon-server/administration/logging/logging-format.html">Logging Format</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/administration/error-codes.html">Error Codes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/security/README.html">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/ssl.html">SSL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control.html">Access Control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control-se.html">Access Control - Standard Edition</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control-ee.html">Access Control - Enterprise Edition</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control-clients.html">Access Control - Client Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control-cli.html">Access Control - CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control-api.html">Access Control - API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control-ldap.html">Access Control - LDAP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/security/access-control-oauth2.html">Access Control - OAuth 2.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/performance/README.html">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/performance/tuning-event-processing.html">Event Segments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/performance/flow-control.html">Flow Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../axon-server/migration/README.html">Migration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/migration/standard-to-enterprise-edition.html">Standard to Enterprise Edition</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../axon-server/migration/non-axon-server-to-axon-server.html">Non-Axon Server to Axon Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../extensions/spring-amqp.html">Spring AMQP</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../extensions/jgroups.html">JGroups</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../extensions/kafka.html">Kafka</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../extensions/kotlin.html">Kotlin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../extensions/mongo.html">Mongo</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../extensions/reactor/reactor.html">Reactor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../extensions/reactor/reactive-gateways/reactive-gateways.html">Reactor Gateways</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../extensions/spring-cloud.html">Spring Cloud</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../extensions/tracing.html">Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Appendices</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="/lagacy_ref_gute/4.6/appendices/rdbms-tuning.html" class="xref page">A.
RDBMS Tuning</a></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><a href="/lagacy_ref_gute/4.6/appendices/message-handler-tuning/README.html" class="xref page">B.
Message Handler Tuning</a></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../appendices/message-handler-tuning/parameter-resolvers.html">Parameter Resolvers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../appendices/message-handler-tuning/handler-enhancers.html">Handler Enhancers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="/lagacy_ref_gute/4.6/appendices/meta-annotations.html" class="xref page">C.
Meta Annotations</a></span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="/lagacy_ref_gute/4.6/appendices/identifier-generation.html" class="xref page">D.
Identifier Generation</a></span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="#./appendices/query-reference.md.adoc" class="xref unresolved">E.
Axon Server Query Language</a></span>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../README.html">Axon Legacy Reference Guide</a></li>
    <li>Axon Framework</li>
    <li><a href="../README.html">Events</a></li>
    <li><a href="README.html">Event Processors</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/azzazzel/axoniq-reference-guide/edit/kramdoc/modules/ROOT/pages/axon-framework/events/event-processors/README.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Event Processors</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="#../event-handlers.adoc" class="xref unresolved">Event handlers</a> define the business logic to be performed when an event is received.
<em>Event Processors</em> are the components that take care of the technical aspects of that processing.
They start a <a href="#../../messaging-concepts/unit-of-work.adoc" class="xref unresolved">unit of work</a> and possibly a transaction.
However, they also ensure that <a href="#../../messaging-concepts/message-correlation.adoc" class="xref unresolved">correlation data</a> can be correctly attached to all messages created during event processing, among other non-functional requirements.</p>
</div>
<div class="paragraph">
<p>The image below depicts a representation of the organization of Event Processors and Event Handlers:</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="../../../.gitbook/assets/event-processors.png" alt="Organization of Event Processors and Event Handlers">
</div>
</div>
<div class="paragraph">
<p>Axon has a layered approach towards organizing event handlers.
First, an event handler is positioned in a <em>Processing Group</em>.
Each event handler, or "Event Handling Component," will only ever belong to a single Processing Group.
The Processing Group provides a level of configurable non-functional requirements, like <a href="#processing-group-listener-invocation-error-handler">error handling</a> and the <a href="streaming.md#sequential-processing">sequencing policy</a>.</p>
</div>
<div class="paragraph">
<p>The Event Processors, in turn, is in charge of the Processing Group.
An Event Processor will control 1 to N Processing Groups, although there will be a one-to-one mapping in most cases.
Similar to the Event Handling Component, a Processing Group will belong to a single Event Processor.
This last layer allows the definition of the type of Event Processor used and concepts like the threading model and a more fine-grained degree of <a href="#event-processor-error-handler">error handling</a>.</p>
</div>
<div class="paragraph">
<p>Event Processors come in roughly two forms: <a href="subscribing.html" class="xref page">Subscribing</a> and <a href="#streaming.adoc" class="xref unresolved">Streaming</a>.</p>
</div>
<div class="paragraph">
<p>Subscribing Event Processors subscribe to a source of events and are invoked by the thread managed by the publishing mechanism.
Streaming Event Processors, on the other hand, pull their messages from a source using a thread that it manages itself.</p>
</div>
<div class="paragraph">
<p>For more specifics on either type, consult their respective sections <a href="subscribing.html" class="xref page">here</a> and <a href="#streaming.adoc" class="xref unresolved">here</a>.
The rest of this page dedicates itself to describing the Event Processor&#8217;s common concepts and configuration options.
Note that throughout, the <code>EventProcessingConfigurer</code> is used.
The <code>EventProcessingConfigurer</code> is part of Axon&#8217;s Configuration API, dedicated to configuring Event Processors.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assigning_handlers_to_processors"><a class="anchor" href="#_assigning_handlers_to_processors"></a>Assigning handlers to processors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All processors have a name, which identifies a processor instance across JVM instances.
Two processors with the same name are considered as two instances of the same processor.</p>
</div>
<div class="paragraph">
<p>All event handlers are attached to a processor whose name by default is the package name of the event handler&#8217;s class.
Furthermore, the default processor implementation used by Axon is the <a href="streaming.html" class="xref page">Tracking Event Processor</a>.
The (default) event processor used can be adjusted, as is shown in the <a href="subscribing.md#configuring">subscribing</a> and <a href="streaming.md#configuring">streaming</a> sections.</p>
</div>
<div class="paragraph">
<p>Event handlers, or Event Handling Components, come in roughly two flavors: "regular" (singleton, stateless) event handlers and <a href="#../../sagas/README.adoc" class="xref unresolved">sagas</a>.
<a href="../event-handlers.md#registering-event-handlers">This</a> section describes the process to register an event handler, whereas <a href="../../sagas/implementation.md#configuring-a-saga">this</a> page describes the saga registration process.</p>
</div>
<div class="paragraph">
<p>Now let us consider that the following event handlers have been registered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.axonframework.example.eventhandling.MyHandler</code></p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.MyOtherHandler</code></p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.module.ModuleHandler</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Without any intervention, this will trigger the creation of two processors, namely:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>org.axonframework.example.eventhandling</code> with two handlers called <code>MyHandler</code> and <code>MyOtherHandler</code></p>
</li>
<li>
<p><code>org.axonframework.example.eventhandling.module</code> with the single handler <code>ModuleHandler</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Using the package name serves as a suitable default, but using dedicated names for an Event Processor and/or the Processing Group is recommended.
The most straightforward approach to reaching a transparent naming scheme of your event handlers is by using the <code>ProcessingGroup</code> annotation.
This annotation resembles the Processing Group level discussed in the <a href="README.md#event-processors">introduction</a>.</p>
</div>
<div class="paragraph">
<p>The <code>ProcessingGroup</code> annotation requires the insertion of a name and can only be set on the class.
Let us adjust the previous sample by using this annotation instead of the package names for grouping handlers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ProcessingGroup("my-handlers")
class MyHandler {
    // left out event handling functions...
}

@ProcessingGroup("my-handlers")
class MyOtherHandler{
    // ...
}

@ProcessingGroup("module-handlers")
class ModuleHandler {
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the <code>ProcessingGroup</code> annotation as depicted, we again construct two processors:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>my-handlers</code> with two handlers called <code>MyHandler</code> and <code>MyOtherHandler</code></p>
</li>
<li>
<p><code>module-handlers</code> with the single handler <code>ModuleHandler</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If more control is required to group Event Handling Components, we recommend consulting the <a href="#event-handler-assignment-rules">assignment rules</a> section.</p>
</div>
<div class="sect2">
<h3 id="_event_handler_assignment_rules"><a class="anchor" href="#_event_handler_assignment_rules"></a>Event Handler Assignment Rules</h3>
<div class="paragraph">
<p>The Configuration API allows you to configure other strategies for assigning event handling classes to processors or assigning specific handler instances to particular processors.
We can separate these assignment rules into roughly two groups: Event Handler to Processing Group and Processing Group to Event Processor.
Below is an exhaustive list of all the assignment rules the <code>EventProcessingConfigurer</code> exposes:</p>
</div>
<div class="paragraph">
<p><strong>Event Handler to Processing Group</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>byDefaultAssignTo(String)</code> - defines the default Processing Group name to assign an event handler to.
It will only be taken into account if there are no more specifics rules and if the <code>ProcessingGroup</code> annotation is not present.</p>
</li>
<li>
<p><code>byDefaultAssignHandlerInstancesTo(Function&lt;Object, String&gt;)</code> - defines a lambda invoked to assign an event handling instance to a desired Processing Group by returning that group&#8217;s name.
It will only be taken into account if there are no more specifics rules and if the <code>ProcessingGroup</code> annotation is not present.</p>
</li>
<li>
<p><code>byDefaultAssignHandlerTypesTo(Function&lt;Class&lt;?&gt;, String&gt;)</code> - defines a lambda invoked to assign an event handler type to a desired Processing Group by returning that group&#8217;s name.
It will only be taken into account if there are no more specifics rules and if the <code>ProcessingGroup</code> annotation is not present.</p>
</li>
<li>
<p><code>assignHandlerInstancesMatching(String, Predicate&lt;Object&gt;)</code> - assigns event handlers to the given Processing Group name based on a predicate ingesting an event handling instance.
The operation uses a natural priority of zero.
If an instance matches several criteria, the outcome is <em>undefined</em>.</p>
</li>
<li>
<p><code>assignHandlerTypesMatching(String, Predicate&lt;Class&lt;?&gt;&gt;)</code> - assigns event handlers to the given Processing Group name based on a predicate ingesting an event handler type.
The operation uses a natural priority of zero.
If an instance matches several criteria, the outcome is <em>undefined</em>.</p>
</li>
<li>
<p><code>assignHandlerInstancesMatching(String, int, Predicate&lt;Object&gt;)</code> -  assigns event handlers to the given Processing Group name based on a predicate ingesting an event handling instance.
Uses the given priority to decide on rule-ordering.
The higher the priority value, the more important the rule is.
If an instance matches several criteria, the outcome is <em>undefined</em>.</p>
</li>
<li>
<p><code>assignHandlerTypesMatching(String, int, Predicate&lt;Class&lt;?&gt;&gt;)</code> - assigns event handlers to the given Processing Group name based on a predicate ingesting an event handler type.
Uses the given priority to decide on rule-ordering.
The higher the priority, the more important the rule is.
If an instance matches several criteria, the outcome is <em>undefined</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Processing Group to Event Processor</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>assignProcessingGroup(String, String)</code> - defines a given Processing Group name that belongs to the given Event Processor&#8217;s name.</p>
</li>
<li>
<p><code>assignProcessingGroup(Function&lt;String, String&gt;)</code> - defines a lambda invoked to assign a Processing Group name to the desired Event Processor by returning that processor&#8217;s name.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ordering_event_handlers_within_a_processor"><a class="anchor" href="#_ordering_event_handlers_within_a_processor"></a>Ordering Event Handlers within a processor</h3>
<div class="paragraph">
<p>To order event handlers within an Event Processor, the order in which event handlers are registered (as described in the <a href="../event-handlers.md#registering-event-handlers">Registering Event Handlers</a> section) is guiding.
Thus, the ordering in which an Event Processor will call event handlers for event handling is the same as their insertion ordering in the Configuration API.</p>
</div>
<div class="paragraph">
<p>If we use Spring as the mechanism for wiring everything, we can explicitly specify the event handler component ordering by adding the <code>@Order</code> annotation.
This annotation is placed on the event handler class name, containing an <code>integer</code> value to specify the ordering.</p>
</div>
<div class="paragraph">
<p>Note that it is <strong>not possible</strong> to order event handlers belonging to different Event Processors.
Each Event Processor acts as an isolated component without any intervention from other Event Processors.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Ordering Considerations</strong></p>
</div>
<div class="paragraph">
<p>Although we can place an order among event handlers within an Event Processor, separation of event handlers is recommended.</p>
</div>
<div class="paragraph">
<p>Placing an overall ordering on event handlers means those components are inclined to interact with one another, introducing a form of coupling.
Due to this, the event handling process will become complex to manage (e.g., for new team members).
Furthermore, embracing an ordering approach might lead to place <em>all</em> event handlers in a global ordering, decreasing processing speeds in general.</p>
</div>
<div class="paragraph">
<p>In all, you are free to use an ordering, but we recommend using it sparingly.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_error_handling"><a class="anchor" href="#_error_handling"></a>Error Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Errors are inevitable in any application.
Depending on where they happen, you may want to respond differently.</p>
</div>
<div class="paragraph">
<p>By default, exceptions raised by event handlers are caught in the <a href="#processing-group-listener-invocation-error-handler">Processing Group layer</a>, logged, and processing continues with the following events.
When an exception is thrown when a processor is trying to commit a transaction, update a <a href="streaming.md#token-store">token</a>, or in any other part of the process, the exception will be propagated.</p>
</div>
<div class="paragraph">
<p>In the case of a <a href="streaming.md#error-mode">Streaming Event Processor</a>, this means the processor will go into error mode, releasing any tokens and retrying at an incremental interval (starting at 1 second, up to max 60 seconds).
A <a href="subscribing.md#error-mode">Subscribing Event Processor</a> will report a publication error to the component that provided the event.</p>
</div>
<div class="paragraph">
<p>To change this behavior, both the Processing Group and Event Processor level allow customization on how to deal with exceptions:</p>
</div>
<div class="sect2">
<h3 id="_processing_group_listener_invocation_error_handler"><a class="anchor" href="#_processing_group_listener_invocation_error_handler"></a>Processing Group - Listener Invocation Error Handler</h3>
<div class="paragraph">
<p>The component dealing with exceptions thrown from an event handling method is called the <code>ListenerInvocationErrorHandler</code>.
By default, these exceptions are logged (with the <code>LoggingErrorHandler</code> implementation), and processing continues with the next handler or message.</p>
</div>
<div class="paragraph">
<p>The default <code>ListenerInvocationErrorHandler</code> used by each processing group can be customized.
Furthermore, we can configure the error handling behavior per processing group:</p>
</div>
<div class="paragraph">
<p>{% tabs %} {% tab title="Axon Configuration API" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AxonConfig {
    // omitting other configuration methods...
    public void configureProcessingGroupErrorHandling(EventProcessingConfigurer processingConfigurer) {
        // To configure a default ...
        processingConfigurer.registerDefaultListenerInvocationErrorHandler(conf -&gt; /* create listener error handler */)
                            // ... or for a specific processing group:
                            .registerListenerInvocationErrorHandler("my-processing-group", conf -&gt; /* create listener error handler */);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %}</p>
</div>
<div class="paragraph">
<p>{% tab title="Spring Boot AutoConfiguration" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class AxonConfig {
    // omitting other configuration methods...
    @Bean
    public ConfigurerModule processingGroupErrorHandlingConfigurerModule() {
        return configurer -&gt; configurer.eventProcessing(
                processingConfigurer -&gt; processingConfigurer.registerDefaultListenerInvocationErrorHandler(
                                                                    conf -&gt; /* create listener error handler */
                                                            )
                                                            // ... or for a specific processing group:
                                                            .registerListenerInvocationErrorHandler(
                                                                    "my-processing-group",
                                                                    conf -&gt; /* create listener error handler */
                                                            )
        );
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% endtabs %}</p>
</div>
<div class="paragraph">
<p>It is easy to implement custom error handling behavior.
The error handling method to implement provides the exception, the event that was handled, and a reference to the handler that was handling the message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface ListenerInvocationErrorHandler {

    void onError(Exception exception,
                 EventMessage&lt;?&gt; event,
                 EventMessageHandler eventHandler) throws Exception;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can choose to retry, ignore or rethrow the exception.
The exception will bubble up to the <a href="#event-processor-error-handler">Event Processor level</a> when rethrown.</p>
</div>
</div>
<div class="sect2">
<h3 id="_event_processor_error_handler"><a class="anchor" href="#_event_processor_error_handler"></a>Event Processor - Error Handler</h3>
<div class="paragraph">
<p>Exceptions occurring outside an event handler&#8217;s scope, or have bubbled up from there, are handled by the <code>ErrorHandler</code>.
The default error handler is the <code>PropagatingErrorHandler</code>, which will rethrow any exceptions it catches.</p>
</div>
<div class="paragraph">
<p>How the Event Processor deals with a rethrown exception differ per implementation.
The behaviour for the Subscribing- and the Streaming Event Processor can respectively be found <a href="subscribing.md#error-mode">here</a> and <a href="streaming.md#error-mode">here</a>.</p>
</div>
<div class="paragraph">
<p>We can configure a default <code>ErrorHandler</code> for all Event Processors or an <code>ErrorHandler</code> for specific processors:</p>
</div>
<div class="paragraph">
<p>{% tabs %} {% tab title="Axon Configuration API" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AxonConfig {
    // ...
    public void configureProcessingGroupErrorHandling(EventProcessingConfigurer processingConfigurer) {
        // To configure a default ...
        processingConfigurer.registerDefaultErrorHandler(conf -&gt; /* create error handler */)
                            // ... or for a specific processor:
                            .registerErrorHandler("my-processor", conf -&gt; /* create error handler */);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %}</p>
</div>
<div class="paragraph">
<p>{% tab title="Spring Boot AutoConfiguration" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class AxonConfig {
    // omitting other configuration methods...
    @Bean
    public ConfigurerModule processorErrorHandlingConfigurerModule() {
        return configurer -&gt; configurer.eventProcessing(
                processingConfigurer -&gt; processingConfigurer.registerDefaultErrorHandler(conf -&gt; /* create error handler */)
                                                            // ... or for a specific processor:
                                                            .registerErrorHandler(
                                                                    "my-processor",
                                                                    conf -&gt; /* create error handler */
                                                            )
        );
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% endtabs %}</p>
</div>
<div class="paragraph">
<p>For providing a custom solution, the <code>ErrorHandler</code>'s single method needs to be implemented:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface ErrorHandler {

    void handleError(ErrorContext errorContext) throws Exception;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the provided <code>ErrorContext</code> object, you can decide to ignore the error, schedule retries, perform dead-letter-queue delivery, or rethrow the exception.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dead_letter_queue"><a class="anchor" href="#_dead_letter_queue"></a>Dead-Letter Queue</h3>
<div class="paragraph">
<p>Although configuring a <a href="#processing-group---listener-invocation-error-handler">Listener Invocation Error Handler</a> and <a href="#event-processor---error-handler">Error Handler</a> helps you to deal with exceptions when processing events, you still end up in an event handling stop.
When you only log the error and allow processing to proceed, you will most likely end up with missing data until you fix the predicament and <a href="streaming.md#replaying-events">replay</a> past events.
If you instead propagate the exception so the event processor keeps retrying, the event processor will stall entirely when the cause is consistent.</p>
</div>
<div class="paragraph">
<p>Although this behavior is sufficient on many occasions, sometimes it is beneficial if we can unblock event handling by parking the problematic event.
To that end, you can configure a dead-letter queue for a <a href="#event-processors">processing group</a>.</p>
</div>
<div class="paragraph">
<p>An essential concept of Axon Frameworks event processors is the maintenance of event ordering, even when you configure <a href="streaming.md#parallel-processing">parallel processing</a>.
A perfect example when this is a requirement is the need to handle events of the same aggregate in their publishing order.
Simply dead lettering one failed event would cause subsequent events in the sequence to be applied to inconsistent state.</p>
</div>
<div class="paragraph">
<p>It is thus of utmost importance that a dead-letter queue for events enqueues an event and any following events in the sequence.
To that end, the supported dead-letter queue is a so-called <code>SequencedDeadLetterQueue</code>.</p>
</div>
<div class="paragraph">
<p>Integral to its design is to allow for queueing failed events and events that belong to a faulty sequence.
It does so by maintaining a sequence identifier for each event, determined by the <a href="/axon-framework/events/event-processors/streaming.md#sequential-processing">sequencing policy</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Is there support for Sagas?</strong></p>
</div>
<div class="paragraph">
<p>Currently, there is <em>no</em> support for using a dead-letter queue for <a href="#.//axon-framework/sagas/README.adoc" class="xref unresolved">sagas</a>.
We&#8217;ve taken this decision as we cannot support a sequenced dead lettering approach as we do for regular event handling.</p>
</div>
<div class="paragraph">
<p>Furthermore, we cannot do this, as a saga&#8217;s associations can vary widely between events.
Due to this, the sequence of events may change, breaking this level of support.
Hence, there&#8217;s no way of knowing whether a next event in the stream does or does not belong to a saga.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Note that you <em>cannot</em> share a dead-letter queue between different processing groups.
Hence, each processing group you want to enable this behavior for should receive a unique dead-letter queue instance.</p>
</div>
<div class="paragraph">
<p>We currently provide the following dead-letter queue implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>InMemorySequencedDeadLetterQueue</code> - In-memory variant of the dead-letter queue.
Useful for testing purposes, but as it does not persist dead letters, it is unsuited for production environments.</p>
</li>
<li>
<p><code>JpaSequencedDeadLetterQueue</code> - JPA variant of the dead-letter queue.
It constructs a <code>dead_letter_entry</code> table where it persists failed-events in.
The JPA dead-letter queue is a suitable option for production environments by persisting the dead letters.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_dead_letter_queues_and_idempotency"><a class="anchor" href="#_dead_letter_queues_and_idempotency"></a>Dead-Letter Queues and Idempotency</h4>
<div class="paragraph">
<p>Before configuring a <code>SequencedDeadLetterQueue</code> it is vital to validate whether your event handling functions are idempotent.
As a processing group consists of several Event Handling Components (as explained in the intro of this chapter), some handlers may succeed in event handling while others will not.
As a configured dead-letter queue does not stall event handling, a failure in one Event Handling Component does not cause a rollback for other event handlers.
Furthermore, as the dead-letter support is on the processing group level, <a href="#processing-dead-letter-sequences">dead-letter processing</a> will invoke <em>all</em> event handlers for that event within the processing group.</p>
</div>
<div class="paragraph">
<p>Thus, if your event handlers are not idempotent, processing letters may result in undesired side effects.
Hence, we strongly recommend making your event handlers idempotent when using the dead-letter queue.
The principle of exactly-once delivery is no longer guaranteed;
at-least-once delivery is the reality to cope with.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_a_sequenced_dead_letter_queue"><a class="anchor" href="#_configuring_a_sequenced_dead_letter_queue"></a>Configuring a sequenced Dead-Letter Queue</h4>
<div class="paragraph">
<p>A <code>JpaSequencedDeadLetterQueue</code> configuration example:</p>
</div>
<div class="paragraph">
<p>{% tabs %} {% tab title="Axon Configuration API" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AxonConfig {
    // omitting other configuration methods...
    public void configureDeadLetterQueue(EventProcessingConfigurer processingConfigurer) {
        // Replace "my-processing-group" for the processing group you want to configure the DLQ on.
        processingConfigurer.registerDeadLetterQueue(
                "my-processing-group",
                config -&gt; JpaSequencedDeadLetterQueue.builder()
                                                     .processingGroup("my-processing-group")
                                                     .maxSequences(256)
                                                     .maxSequenceSize(256)
                                                     .entityManagerProvider(config.getComponent(EntityManagerProvider.class))
                                                     .transactionManager(config.getComponent(TransactionManager.class))
                                                     .serializer(config.serializer())
                                                     .build()
        );
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% tab title="Spring Boot AutoConfiguration" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class AxonConfig {
    // omitting other configuration methods...
    @Bean
    public ConfigurerModule deadLetterQueueConfigurerModule() {
        // Replace "my-processing-group" for the processing group you want to configure the DLQ on.
        return configurer -&gt; configurer.eventProcessing().registerDeadLetterQueue(
                "my-processing-group",
                config -&gt; JpaSequencedDeadLetterQueue.builder()
                                                     .processingGroup("my-processing-group")
                                                     .maxSequences(256)
                                                     .maxSequenceSize(256)
                                                     .entityManagerProvider(config.getComponent(EntityManagerProvider.class))
                                                     .transactionManager(config.getComponent(TransactionManager.class))
                                                     .serializer(config.serializer())
                                                     .build()
        );
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% endtabs %}</p>
</div>
<div class="paragraph">
<p>You can set the maximum number of saved sequences (defaults to 1024) and the maximum number of dead letters in a sequence (also defaults to 1024).
If either of these thresholds is exceeded, the queue will throw a <code>DeadLetterQueueOverflowException</code>.
This exception means the processing group will stop processing new events altogether.
Thus, the processing group moves back to the behavior described at the start of the <a href="#error-handling">Error Handling</a> section.</p>
</div>
</div>
<div class="sect3">
<h4 id="_processing_dead_letter_sequences"><a class="anchor" href="#_processing_dead_letter_sequences"></a>Processing Dead-Letter Sequences</h4>
<div class="paragraph">
<p>Once you resolve the problem that led to dead lettering events, we can start processing the dead letters.
We recommend using the <code>SequencedDeadLetterProcessor</code> interface for this, as it processes an entire dead-letter <em>sequence</em> instead of single dead-letter entries.
It will thus ensure the event order is maintained during the retry.</p>
</div>
<div class="paragraph">
<p>The <code>SequencedDeadLetterProcessor</code> provides two operations to process dead letters:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>boolean processAny()</code> - Process the oldest dead-letter sequence.
Returns <code>true</code> if it processes a sequence successfully.</p>
</li>
<li>
<p><code>boolean process(Predicate&lt;DeadLetter&lt;?
extends EventMessage&lt;?&gt;&gt;)</code> - Process the oldest dead-letter sequence matching the predicate.
Note that the predicate only filters based on a sequence&#8217;s <em>first</em> entry.
Returns <code>true</code> if it processes a sequence successfully.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the processing of a dead letter fails, the event will be offered to the dead-letter queue again.
How the dead-lettering process reacts to this depends on the <a href="#dead-letter-enqueue-policy">enqueue policy</a>.</p>
</div>
<div class="paragraph">
<p>You can retrieve a <code>SequencedDeadLetterProcessor</code> from the <code>EventProcessingConfiguration</code> based on a processing group name <em>if</em> you have configured a dead-letter queue for this processing group.
Below are a couple of examples of how to process dead-letter sequences:</p>
</div>
<div class="paragraph">
<p>{% tabs %} {% tab title="Process the oldest dead-letter sequence matching <code>ErrorEvent</code>" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DeadletterProcessor {

    private EventProcessingConfiguration config;

    public void retryErrorEventSequence(String processingGroup) {
        config.sequencedDeadLetterProcessor(processingGroup)
              .ifPresent(letterProcessor -&gt; letterProcessor.process(
                      deadLetter -&gt; deadLetter.message().getPayload() instanceof ErrorEvent
              ));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% tab title="Process the oldest dead-letter sequence in the queue" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DeadletterProcessor {

    private EventProcessingConfiguration config;

    public void retryAnySequence(String processingGroup) {
        config.sequencedDeadLetterProcessor(processingGroup)
              .ifPresent(SequencedDeadLetterProcessor::processAny);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% tab title="Process all dead-letter sequences in the queue" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DeadletterProcessor {

    private EventProcessingConfiguration config;

    public void retryAllSequences(String processingGroup) {
        Optional&lt;SequencedDeadLetterProcessor&lt;EventMessage&lt;?&gt;&gt;&gt; optionalLetterProcessor =
                config.sequencedDeadLetterProcessor(processingGroup);
        if (!optionalLetterProcessor.isPresent()) {
            return;
        }
        SequencedDeadLetterProcessor&lt;EventMessage&lt;?&gt;&gt; letterProcessor = optionalLetterProcessor.get();

        // Retrieve all the dead lettered event sequences:
       Iterable&lt;Iterable&lt;DeadLetter&lt;? extends EventMessage&lt;?&gt;&gt;&gt;&gt; deadLetterSequences =
               config.deadLetterQueue(processingGroup)
                     .map(SequencedDeadLetterQueue::deadLetters)
                     .orElseThrow(() -&gt; new IllegalArgumentException("No such Processing Group"));

       // Iterate over all sequences:
       for (Iterable&lt;DeadLetter&lt;? extends EventMessage&lt;?&gt;&gt;&gt; sequence : deadLetterSequences) {
           Iterator&lt;DeadLetter&lt;? extends EventMessage&lt;?&gt;&gt;&gt; sequenceIterator = sequence.iterator();
           String firstLetterId = sequenceIterator.next()
                                                  .message()
                                                  .getIdentifier();

           // SequencedDeadLetterProcessor#process automatically retries an entire sequence.
           // Hence, we only need to filter on the first entry of the sequence:
          letterProcessor.process(deadLetter -&gt; deadLetter.message().getIdentifier().equals(firstLetterId));
       }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% endtabs %}</p>
</div>
</div>
<div class="sect3">
<h4 id="_dead_letter_attributes"><a class="anchor" href="#_dead_letter_attributes"></a>Dead-Letter attributes</h4>
<div class="paragraph">
<p>A dead letter contains the following attributes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">attribute</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EventMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>EventMessage</code> for which handling failed.
The message contains your event, among other <code>Message</code> properties.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cause</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional&lt;Cause&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The cause for the message to be dead lettered.
Empty if the letter is enqueued because it is part of a sequence.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enqueuedAt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Instant</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The moment in time when the event was enqueued in a dead-letter queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastTouched</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Instant</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The moment in time when this letter was last touched.
Will equal the <code>enqueuedAt</code> value if this letter is enqueued for the first time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>diagnostics</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MetaData</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The diagnostic <code>MetaData</code> concerning this letter.
Filled through the <a href="#dead-letter-enqueue-policy">enqueue policy</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dead_letter_enqueue_policy"><a class="anchor" href="#_dead_letter_enqueue_policy"></a>Dead-Letter Enqueue Policy</h4>
<div class="paragraph">
<p>By default, when you configure a dead-letter queue and event handling fails, the event is dead-lettered.
However, you might not want all event failures to result in dead-lettered entries.
Similarly, when <a href="#processing-dead-letter-sequences">letter processing</a> fails, you might want to reconsider whether you want to enqueue the letter again.</p>
</div>
<div class="paragraph">
<p>To that end, you can configure a so-called <code>EnqueuePolicy</code>.
The enqueue policy ingests a <code>DeadLetter</code> and a cause (<code>Throwable</code>) and returns an <code>EnqueueDecision</code>.
The <code>EnqueueDecision</code>, in turn, describes if the framework should or should not enqueue the dead letter.</p>
</div>
<div class="paragraph">
<p>You can customize the dead-letter policy to exclude some events when handling fails.
As a consequence, these events will be skipped.
Note that Axon Framework invokes the policy on initial event handling <em>and</em> on <a href="#processing-dead-letter-sequences">dead-letter processing</a>.</p>
</div>
<div class="paragraph">
<p>Reevaluating the policy after processing failed may be essential to ensure a dead letter isn&#8217;t stuck in the queue forever.
To deal with this scenario, you can attach additional diagnostic information to the dead letter through the policy.
For example to add a number of retries to the dead letter to base your decision on.
See the sample <code>EnqueuePolicy</code> below for this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class CustomEnqueuePolicy implements EnqueuePolicy&lt;EventMessage&lt;?&gt;&gt; {

    @Override
    public EnqueueDecision&lt;EventMessage&lt;?&gt;&gt; decide(DeadLetter&lt;? extends EventMessage&lt;?&gt;&gt; letter, Throwable cause) {
        if (cause instanceof NullPointerException) {
            // It's pointless:
            return Decisions.doNotEnqueue();
        }

        final int retries = (int) letter.diagnostics().getOrDefault("retries", -1);
        if (letter.message().getPayload() instanceof ErrorEvent) {
            // Important and new entry:
            return Decisions.enqueue(cause);
        }
        if (retries &lt; 10) {
            // Let's continue and increase retries:
            return Decisions.requeue(cause, l -&gt; l.diagnostics().and("retries", retries + 1));
        }

        // Exhausted all retries:
        return Decisions.evict();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Decisions</code> utility class provides the most reasonable decisions, but you are free to construct your own <code>EnqueueDecision</code> when necessary.
See the following example for configuring our custom policy:</p>
</div>
<div class="paragraph">
<p>{% tabs %} {% tab title="Axon Configuration API" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AxonConfig {
    // omitting other configuration methods...
    public void configureEnqueuePolicy(EventProcessingConfigurer configurer) {
        // Replace "my-processing-group" for the processing group you want to configure the policy on.
        configurer.registerDeadLetterPolicy("my-processing-group", config -&gt; new MyEnqueuePolicy());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% tab title="Spring Boot AutoConfiguration" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class AxonConfig {
    // omitting other configuration methods...
    @Bean
    public ConfigurerModule enqueuePolicyConfigurerModule() {
        // Replace "my-processing-group" for the processing group you want to configure the policy on.
        return configurer -&gt; configurer.eventProcessing()
                                       .registerDeadLetterPolicy("my-processing-group", config -&gt; new MyEnqueuePolicy());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endtab %} {% endtabs %}</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_general_processor_configuration"><a class="anchor" href="#_general_processor_configuration"></a>General processor configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alongside <a href="#assigning-handlers-to-processors">handler assignment</a> and <a href="#error-handling">error handling</a>, Event Processors allow configuration for other components too.
For <a href="subscribing.md#configuring">Subscribing</a> and <a href="streaming.md#configuring">Streaming</a> Event Processor specific options, their respective sections should be checked.
The remainder of this page will cover the generic configuration options for each Event Processor.</p>
</div>
<div class="sect2">
<h3 id="_event_processor_builders"><a class="anchor" href="#_event_processor_builders"></a>Event Processor Builders</h3>
<div class="paragraph">
<p>The <code>EventProcessingConfigurer</code> provides access to a lot of configurable components for Event Processors.
Sometimes it is easier or preferable to provide an entire function to construct an Event Processor, however.
To that end, we can configure a custom <code>EventProcessorBuilder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@FunctionalInterface
interface EventProcessorBuilder {

    // Note: the `EventHandlerInvoker` is the component which holds the event handling functions.
    EventProcessor build(String name,
                         Configuration configuration,
                         EventHandlerInvoker eventHandlerInvoker);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>EventProcessorBuilder</code> functional interface provides the event processor&#8217;s name, the <code>Configuration</code> and the <code>EventHandlerInvoker</code>, and requires returning an <code>EventProcessor</code> instance.
Note that any Axon component that an Event Processor requires (e.g., an <code>EventStore</code>) is retrievable from the <code>Configuration</code>.</p>
</div>
<div class="paragraph">
<p>The <code>EventProcessingConfigurer</code> provides two methods to configure an <code>EventProcessorBuilder</code>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>registerEventProcessorFactory(EventProcessorBuilder)</code> - allows you to define a default factory method that creates event processors for which no explicit factories are defined</p>
</li>
<li>
<p><code>registerEventProcessor(String, EventProcessorBuilder)</code> - defines the factory method to use to create a processor with given <code>name</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_event_handler_interceptors"><a class="anchor" href="#_event_handler_interceptors"></a>Event Handler Interceptors</h3>
<div class="paragraph">
<p>Since the Event Processor is the invoker of event handling methods, it is a spot to configure <a href="#../../messaging-concepts/message-intercepting.adoc" class="xref unresolved">Message Handler Interceptors</a> too.
Since Event Processors are dedicated to event handling, the <code>MessageHandlerInterceptor</code> is required to deal with an <code>EventMessage</code>.
Differently put, an <a href="../../messaging-concepts/message-intercepting.md#event-handler-interceptors">EventHandlerInterceptor</a> can be registered to Event Processors.</p>
</div>
<div class="paragraph">
<p>The <code>EventProcessingConfigurer</code> provides two methods to configure <code>MessageHandlerInterceptor</code> instances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>registerDefaultHandlerInterceptor(BiFunction&lt;Configuration, String, MessageHandlerInterceptor&lt;?
super EventMessage&lt;?&gt;&gt;&gt;)</code> - registers a default <code>MessageHandlerInterceptor</code> that will be configured on every Event Processor instance</p>
</li>
<li>
<p><code>registerHandlerInterceptor(String, Function&lt;Configuration, MessageHandlerInterceptor&lt;?
super EventMessage&lt;?&gt;&gt;&gt;)</code> - registers a <code>MessageHandlerInterceptor</code> that will be configured for the Event Processor matching the given <code>String</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_message_monitors"><a class="anchor" href="#_message_monitors"></a>Message Monitors</h3>
<div class="paragraph">
<p>Any Event Processor instance provides the means to contain a Message Monitor.
Message Monitors (discussed in more detail <a href="#../../monitoring/metrics.adoc" class="xref unresolved">here</a>) allow for monitoring the flow of messages throughout an Axon application.
For Event Processors, the message monitor deals explicitly with the events flowing through the Event Processor towards the event handling functions.</p>
</div>
<div class="paragraph">
<p>The <code>EventProcessingConfigurer</code> provides two approaches towards configuring a <code>MessageMonitor</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>registerMessageMonitor(String, Function&lt;Configuration, MessageMonitor&lt;Message&lt;?&gt;&gt;&gt;)</code> - registers the given <code>MessageMonitor</code> to the Event Processor matching the given <code>String</code></p>
</li>
<li>
<p><code>registerMessageMonitorFactory(String, MessageMonitorFactory)</code> - registers the given <code>MessageMonitorFactory</code> to construct a <code>MessageMonitor</code> for the Event Processor matching the given <code>String</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>MessageMonitorFactory</code> provides a more fine-grained approach, used throughout the Configuration API, to construct a <code>MessageMonitor</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@FunctionalInterface
public interface MessageMonitorFactory {

    MessageMonitor&lt;Message&lt;?&gt;&gt; create(Configuration configuration,
                                      Class&lt;?&gt; componentType,
                                      String componentName);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use the <code>Configuration</code> to retrieve the required dependencies to construct the <code>MessageMonitor</code>.
The type and name reflect which infrastructure component the factory constructs a monitor for.
Whenever you use the <code>MessageMonitorFactory</code> to construct a <code>MessageMonitor</code> for an Event Processor, the factory expects the <code>componentType</code> to be an <code>EventProcessor</code> implementation.
The <code>componentName</code>, on the other hand, would resemble the name of the Event Processor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transaction_management"><a class="anchor" href="#_transaction_management"></a>Transaction Management</h3>
<div class="paragraph">
<p>As components that deal with event handling, the Event Processor is a logical place to provide transaction configuration options.
Note that in the majority of the scenarios, the defaults will suffice.
This section simply serves to show these options to allow adjustment if the application requires it.</p>
</div>
<div class="paragraph">
<p>The first of these is the <code>TransactionManager</code>.
Axon uses the <code>TransactionManager</code> to attach a transaction to every <a href="#../../messaging-concepts/unit-of-work.adoc" class="xref unresolved">Unit of Work</a>.
Within a Spring environment, the <code>TransactionManager</code> defaults to a <code>SpringTransactionManager</code>, which uses Spring&#8217;s <code>PlatformTransactionManager</code> under the hood.
In non Spring environments, it would be wise to build a <code>TransactionManager</code> implement if transaction management is required, of course.
Such an implementation only requires the definition of the <code>TransactionManager#startTransaction()</code> method.
To adjust the transaction manager for an Event Processor, the <code>registerTransactionManager(String, Function&lt;Configuration, TransactionManager&gt;)</code> on the <code>EventProcessingConfigurer</code> should be used.</p>
</div>
<div class="paragraph">
<p>Secondly, you can adjust the desired <code>RollbackConfiguration</code> per Event Processor.
It is the <code>RollbackConfiguration</code> that decide when a <a href="#../../messaging-concepts/unit-of-work.adoc" class="xref unresolved">Unit of Work</a> should rollback the transaction.
The default <code>RollbackConfiguration</code> is to rollback on any type of <code>Throwable</code>;
the <a href="#../../messaging-concepts/unit-of-work.adoc" class="xref unresolved">Unit of Work</a> page describes the other options you can choose.
To adjust the default behaviour, the <code>registerRollbackConfiguration(String, Function&lt;Configuration, RollbackConfiguration&gt;)</code> function should be invoked on the <code>EventProcessingConfigurer</code>.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../event-handlers.html">Event Handlers</a></span>
  <span class="next"><a href="subscribing.html">Subscribing Event Processors</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="primary-footer">
    <div class="footer-logo ">
      <a href="https://axoniq.io/">
        <img src="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png" alt="Logo AxonIQ" loading="lazy" srcset="https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=45&amp;height=10&amp;name=Logo%20AxonIQ%20(2).png 45w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=90&amp;height=20&amp;name=Logo%20AxonIQ%20(2).png 90w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=135&amp;height=30&amp;name=Logo%20AxonIQ%20(2).png 135w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=180&amp;height=40&amp;name=Logo%20AxonIQ%20(2).png 180w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=225&amp;height=50&amp;name=Logo%20AxonIQ%20(2).png 225w, https://www.axoniq.io/hs-fs/hubfs/Logo%20AxonIQ%20(2).png?width=270&amp;height=60&amp;name=Logo%20AxonIQ%20(2).png 270w" sizes="(max-width: 90px) 100vw, 90px" width="90" height="20">
      </a>
    </div>

    <div class="footer-menu">
	    <h3>Products</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-framework/overview">Axon Framework</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-server/overview">Axon Server Standard</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-server-enterprise/overview">Axon Server Enterprise</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axoniq-cloud/overview">AxonIQ Cloud</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/axon-data-protection/overview">AxonIQ Data Protection</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Sites</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="http://support.axoniq.io/"> Client Support Portal</a></li>
          <li><a class="ext" target="_blank" href="https://developer.axoniq.io/">AxonIQ Developer Portal</a></li>
          <li><a class="ext" target="_blank" href="https://academy.axoniq.io/">AxonIQ Academy</a></li>
          <li><a class="ext" target="_blank" href="https://discuss.axoniq.io/">AxonIQ Discuss</a></li>
          <li><a class="ext" target="_blank" href="https://start.axoniq.io/">AxonIQ Initializr</a></li>
          <li><a class="ext" target="_blank" href="https://console.cloud.axoniq.io">AxonIQ Cloud</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-menu">
	    <h3>Follow us</h3>
	    <div>
        <ul role="menu">
          <li><a class="ext" target="_blank" href="https://www.youtube.com/axoniq">YouTube</a></li>
          <li><a class="ext" target="_blank" href="https://www.linkedin.com/company/axoniq">LinkedIn</a></li>
          <li><a class="ext" target="_blank" href="https://www.facebook.com/AxonIQ.io">Facebook</a></li>
          <li><a class="ext" target="_blank" href="https://twitter.com/axon_iq">Twitter</a></li>
          <li><a class="ext" target="_blank" href="https://github.com/AxonIQ">GitHub</a></li>
          <li><a class="ext" target="_blank" href="https://medium.com/axoniq">Medium</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
